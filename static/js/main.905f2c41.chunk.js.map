{"version":3,"sources":["Config/RouteConfig.jsx","Config/AppConfig.jsx","Components/Shell/PanelLeft.jsx","Plugin/Helpers/Helper.js","Patterns/Facade/FormConfig/FormConfigInterface.jsx","Patterns/Facade/FormConfig/Element/ApiConfig.jsx","Patterns/Facade/FormConfig/Element/FieldConfig.jsx","Patterns/Facade/FormConfig/Element/ItemConfig.jsx","Patterns/Facade/FormConfig/Element/CollectionConfig.jsx","Patterns/Facade/FormConfig/Element/Validation/FieldsValidationConfig.jsx","Patterns/Facade/FormConfig/Element/Validation/FormValidationConfig.jsx","Patterns/Facade/FormConfig/Element/Validation/CollectionValidationConfig.jsx","Patterns/Facade/FormConfig/Element/ValidationConfig.jsx","Patterns/Facade/FormConfig/Element/Validation/FieldValidation/FieldRules.jsx","Patterns/Strategy/Validator/Strategy/RulesClass.jsx","Patterns/Strategy/Validator/Strategy/Rules/CollectionUniqueRule.jsx","Patterns/Strategy/Validator/Strategy/Rules/CollectionRequiredRule.jsx","Patterns/Strategy/Validator/Strategy/Rules/FormDependsRule.jsx","Patterns/Facade/FormConfig/Element/FormConfig.jsx","Patterns/Facade/FormConfig/BankAccountConfig.jsx","Patterns/Facade/FormConfig/ContractorConfig.jsx","Patterns/Facade/FormConfig/CompanyConfig.jsx","Components/Shell/PanelRight.jsx","Pages/Component/LoginScreenModal.js","Components/Shell/Invitation.jsx","Components/Shell/ShellNavbar.jsx","Pages/HomePage.jsx","Patterns/Facade/FormConfig/OwnerConfig.jsx","Patterns/Facade/FormConfig/InvoiceItemConfig.jsx","Patterns/Facade/FormConfig/InvoiceConfig.jsx","Patterns/Facade/FormConfig/EconomicEventConfig.jsx","Patterns/Facade/FormConfig/EconomicOperationConfig.jsx","Patterns/Facade/FormConfig/IntproofConfig.jsx","Patterns/Facade/FormConfig/IntproofItemConfig.jsx","Pages/PanelLeftPage.jsx","Pages/PanelRightPage.jsx","Pages/FormPage.jsx","Pages/AboutPage.jsx","Pages/DynamicRoutePage.jsx","Pages/NotFoundPage.jsx","Pages/ProblemResolverPage.jsx","Pages/SandboxPage.jsx","Shell.jsx","Patterns/Facade/ResourceConfig.jsx","Plugin/HelperPlugin.js","Plugin/Helpers/Log.js","Plugin/LoggerPlugin.js","Plugin/Api/Resource.jsx","Plugin/ApiPlugin.js","Plugin/PWAPlugin.js","Plugin/DisplayablePlugin.js","Patterns/Prototype/ConcretePrototype/SwipeableWidget/SwipeableCollectionWidget.jsx","Patterns/Prototype/ConcretePrototype/SwipeableWidget/SwipeableItemWidget.jsx","Plugin/WidgetPlugin.js","index.js"],"names":["RouteConfig","name","path","options","pushState","this","AppConfig","root","theme","id","data","routes","on","init","app","console","log","serviceWorker","scope","methods","addRoute","ReactComponent","route","component","Object","assign","push","addTabsRoute","tabsConfig","tabs","tab","tabRoute","addDetailsRoute","detailRoutes","addAsyncRoute","config","props","type","async","routeTo","routeFrom","resolve","reject","contextType","React","createContext","context","configResolve","hasOwnProperty","params","PanelLeft","displayName","display","Fragment","left","cover","themeDark","link","title","slot","icon","divider","Component","Helper","actions","action","entity","collection","str","charAt","toLowerCase","substr","toUpperCase","object","company","companyName","partnership","street","house","appartment","postalCode","city","nip","regon","foundingDate","formatDate","isPartnership","bankAccounts","contractors","books","book","year","col7","col8","col9","col10","col11","col12","col13","col14","col15","col16b","z1","z2a","z2b","z2c","z2d","z2e","z2f","z2","z3","settlement","settlementDate","income","incomeCumulative","costs","costsCumulative","profit","profitCumulative","social","socialCumulative","socialDeduction","health","healthCumulative","healthDeduction","taxBase","tax","taxCumulative","closed","documents","document","col1","col2","col3","col4","col5","col6","col16a","col17","invoice","datePrep","buyer","invoiceNumber","paymentMethod","paymentDate","bankAccount","invoiceItems","amount","paid","paidValue","paidLeft","Error","parsed","email","firstName","lastName","avatar","logo","key","parseEntity","bankAccountName","bankName","accountNumber","isDefault","col7Penny","col8Penny","col9Penny","col10Penny","col11Penny","col12Penny","col13Penny","col14Penny","col15Penny","col16bPenny","items","amountPenny","paidValuePenny","paidLeftPenny","economicEvent","pos","unit","unitCount","unitPrice","unitPricePenny","legalBasis","price","pricePenny","economicOperation","proofNumber","intproofItems","genus","documentType","documentNumber","documentDate","description","economicOperations","bookColumn","isPeriodic","period","parseSuffix","target","suffixValue","zoo","sa","operation","date","map","field","formatPeriod","join","fieldName","withNoSelect","conditions","mergeFields","length","value","text","filter","option","condition","optionValue","array","childFieldName","index","getIndexOfValue","parseInt","fieldValue","findIndex","item","String","fieldDate","Date","getMonth","isNaN","getFullYear","getDate","changeYear","changeMonth","monthNames","quarterNames","incrementing","month","resultDate","day","hour","getHours","minute","getMinutes","second","getSeconds","current","toISOString","slice","firstDayMonth","lastDayMonth","Math","floor","actionName","entityName","e","keyCode","preventDefault","nextInput","getElementsByName","currentTarget","focus","setSelectionRange","col","showAsObject","penny","toString","padStart","float","Number","parseFloat","toFixed","settlements","sum","reduce","total","comparePenny","test","mapToObject","obj","forEach","Set","mapToObjectSimple","fromEntries","objectToMap","Map","entries","snakeToCamel","string","replace","m","camelToSnake","camelToArray","split","arrayHasEvery","arraySource","arrayTarget","every","v","includes","arrayHasAny","some","missingTables","toFind","FormConfigInterface","ApiConfig","FieldConfig","label","emptyValue","additionalOptions","acceptVisitor","widgetFactoryCoordinator","setFieldWidget","widget","_widget","ItemConfig","preview","event","handle","header","footer","CollectionConfig","formName","parentForm","FieldsValidationConfig","fields","FormValidationConfig","rules","arguments","rule","CollectionValidationConfig","ValidationConfig","fieldsRules","formRules","collectionRules","FieldRules","required","correctness","undefined","ResultRule","ruleName","success","message","setError","getAnswer","CollectionUniqueRule","algorithm","contextData","algorithmResult","collectionData","CollectionRequiredRule","Array","isArray","FormDependsRule","when","then","formData","whenResult","fieldFunctions","keys","FormConfig","decorator","BankAccountConfig","apiConfig","defaultChecked","delete","color","right","edit","new","form","validation","ContractorConfig","shortcut","simple","afterChange","toggledBy","disabled","CompanyConfig","fullName","after","subtitle","parseAddress","owner","collections","PanelRight","getIndexOfElementArrayById","CompanyCollectionWidget","SwipeableCollection","withConfig","withEvents","withHandlers","buildWidget","themeLight","state","online","api","resource","Fraqgment","onClick","logout","LoginScreenModal","__proto__","constructor","_request","url","dataType","request","promise","postJSON","response","catch","xhrError","loadingDone","a","dialog","close","setState","error","$f7","loginScreen","login","logger","startProcess","preloader","password","result","locationHeader","xhr","getResponseHeader","info","fillData","dbData","views","main","router","back","reloadPrevious","ignoreCache","status","JSON","parse","finally","resultAfterAll","endProcess","buttons","fill","bgColor","isLoading","toast","create","position","closeButton","open","className","noToolbar","noNavbar","noSwipeback","content","placeholder","onInput","Invitation","_isMounted","noHairlines","medium","mediaList","chevronCenter","noLinkClass","ShellNavbar","displayable","panelOpen","installApp","classname","HomePage","ProjectsCollectionWidget","user","OwnerConfig","InvoiceItemConfig","optionsWithEmptyValue","labelField","add","displayWhen","selected","href","InvoiceConfig","contractor","EconomicEventConfig","EconomicOperationConfig","IntproofConfig","IntproofItemConfig","strong","view","panelClose","raised","popupOpen","backLink","defaultValue","input","min","max","step","resizable","from","n","checkbox","radio","tag","round","outline","small","large","DynamicRoutePage","$f7route","hash","query","stringify","$f7router","ProblemResolverPage","bottom","external","accordionList","accordionItem","bold","SandboxPage","width","loginScreenOpen","resourceConfig","_form","invoiceItem","intproof","intproofItem","getFormConfig","getIRI","ownerId","entityConfig","ownerConfig","Shell","componentDidMount","window","addEventListener","deferredPrompt","showInstallButton","utils","extend","_config","formSubmit","group","ref","indexOf","_concreteFormComponent","dataset","stateAfterSubmit","_configForm","formClose","validationError","stateErrors","errors","controlChange","fieldConfig","control","closest","settings","checked","prevState","newState","storage","storeFormData","controlCalendarChange","currentRoute","opened","_api","forms","formsQueue","pop","prompt","userChoice","choiceResult","outcome","projectChange","setCurrent","appConfig","transition","PanelLeftPage","PanelRightPage","FormPage","AboutPage","NotFoundPage","logInside","HelperPlugin","helper","enable","disable","bg","Log","givenArgs","captureStackTrace","args","_arguments","objectNames","_source","source","extractNames","_prepareArgs","groupCollapsed","function","_log","groupEnd","errorObject","errorType","errorMessage","lines","stack","lineObjects","regex","line","lineObject","exec","parts","argsData","iterateObjects","trace","preparationFunction","objectLines","atObjectLineText","processTitle","LoggerPlugin","pageBeforeIn","page","pageAfterIn","pageBeforeOut","pageAfterOut","pageInit","pageBeforeRemove","Resource","dbName","version","tables","keyPath","table","db","setupDB","namespace","self","Promise","dbOpen","indexedDB","onupgradeneeded","objectStoreNames","contains","objectStore","createObjectStore","createIndex","unique","multiEntry","abort","onsuccess","onerror","code","useDB","readData","_tableObject","_saveData","setConfig","setData","tableObject","transaction","getAll","list","openCursor","ce","cursor","continue","stores","tx","_get","entityData","_put","_add","put","getCursor","IDBKeyRange","only","_delete","ApiPlugin","resultData","PWAPlugin","pwa","installed","DisplayablePlugin","lcfirst","resourceData","shell","navbar","panel","companyCollection","button","install","indexes","canDisplay","Boolean","SwipeableCollectionWidget","build","_type","_itemPrototype","_handlers","_events","wrapperClass","collectionWidget","configureProps","card","_renderCard","_renderAccordion","_renderList","buttonToPopoverWrapper","tabLinkActive","data-parent-form","renderItem","accordionContent","badge","inset","configure","render","formConfig","_formConfig","itemConfig","updateData","_composeItem","prototypeInstance","_clone","setProperty","property","k","_app","SwipeableItem","withApp","buildItem","Builder","handlers","events","newCollectionWidget","SwipeableItemWidget","sortable","onChange","btnLeft1","btnRight1","useConfig","_configureSettings","itemWidget","swipeout","onSwipeoutOpen","onSwipeoutClosed","_renderActions","configPreview","subtitleValue","afterValue","headerValue","textValue","footerValue","_itemConfig","itemActions","_renderAction","side","actionsProps","i","buttonProps","buttonAttributes","newItemWidget","WidgetPlugin","Framework7","use","Framework7React","ReactDOM","f7","getElementById"],"mappings":"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","file":"static/js/main.905f2c41.chunk.js","sourcesContent":["/**\r\n *\r\n * @property {string} name - Route name, e.g. home\r\n * @property {string} path - Route path. Means this route will be loaded when we click link that match to this path, or can be loaded by this path using API\r\n * @property {string} options - Object with additional route options (optional)\r\n * @property {string} routes - Array with nested routes\r\n * @property {string} viewName - View name where this route will be forced to load\r\n *\r\n * @property {string} master - Enables this route as Master route\r\n * @property {string} detailRoutes - Array with detail routes\r\n *\r\n * @property {string} modules - Array with Lazy Modules to load before route loading\r\n *\r\n * //content properties\r\n * @property {string} el -\r\n * @property {string} pageName -\r\n * @property {string} content -\r\n * @property {string} template -\r\n * @property {string} templateUrl -\r\n * @property {string} component - Load page from passed Framework7 Router Component\r\n * @property {string} componentUrl - load pages as a component via Ajax. Also supports dynamic route params from route path using {{paramName}} expression\r\n * @property {string} async - function(routeTo, routeFrom, resolve, reject) - Do required asynchronous manipulation and the return required route content and options\r\n * @property {string} asyncComponent - Method should return Promise resolved with Component or ES module with .default property containing Component.\r\n *\r\n * @property {Array} tabs - Array with tab routes\r\n * @property {string} actions - Action Sheet route\r\n * @property {string} popup - Popup route\r\n * @property {string} loginScreen - Login screen route\r\n * @property {string} popover - Popover route\r\n * @property {string} sheet - Sheet route\r\n * @property {string} panel - Panel route\r\n *\r\n * @property {string} on - Object with event handlers\r\n *\r\n * @property {string} alias -\r\n * @property {string} redirect -\r\n *\r\n * @property {string} beforeEnter -\r\n * @property {string} beforeLeave -\r\n *\r\n * @property {string} keepAlive - Enables so called keepAlive route. When enabled then once loaded page and its component (Vue, React or Router component) will be never destroyed. Instead, it will be detached from DOM and reused again when required.\r\n *\r\n */\r\nexport default class RouteConfig {\r\n    /** Route name, e.g. home */\r\n    name;\r\n    /** Route path. Means this route will be loaded when we click link\r\n     * that match to this path, or can be loaded by this path using API\r\n     */\r\n    path;\r\n    /** Object with additional route options (optional) */\r\n    options = {\r\n        pushState: true,\r\n    };\r\n    /** Array of nested routes (optional) */\r\n    routes;\r\n    /** View name where this route will be forced to load */\r\n    viewName;\r\n\r\n    // ### Master detail ###\r\n    /** Enables this route as Master route */\r\n    master;\r\n    /** Array with detail routes */\r\n    detailRoutes;\r\n\r\n    // ### Lazy modeules ###\r\n    /**\r\n     * Array with Lazy Modules to load before route loading\r\n     */\r\n    modules;\r\n\r\n    // ### Content Related Properties ###\r\n    /**\r\n     * Load page content via Ajax.\r\n     * Also supports dynamic route params from route path using {{paramName}} expression, e.g.\r\n     * @example\r\n     * {\r\n     *     path: '/users/:userId/posts/:postId',\r\n     *     url: 'http://myapp.com/posts/{{userId}}/{{postId}}'\r\n     * }\r\n     */\r\n    url;\r\n    /** Load page from passed Framework7 Router Component */\r\n    component;\r\n\r\n    /**\r\n     * Do required asynchronous manipulation and the return required route content and options\r\n     * should return function(routeTo, routeFrom, resolve, reject)\r\n     */\r\n    async;\r\n\r\n    constructor(name, path) {\r\n        this.name = name;\r\n        this.path = path;\r\n    }\r\n\r\n    getConfig() {\r\n        return {...this};\r\n    }\r\n\r\n}\r\n","import React from 'react';\r\nimport RouteConfig from \"./RouteConfig\";\r\n\r\nexport default class AppConfig {\r\n    root = '#app';\r\n    theme = 'auto';\r\n    name = 'Anatholius Programowanie - biuro';\r\n    id = 'pl.anatholius.biuro';\r\n    data = {};\r\n    routes = [];\r\n    on = {\r\n        init: (app) => {\r\n            console.log('F7 init');\r\n            // console.log('this', this);\r\n        },\r\n\r\n    };\r\n    serviceWorker = {\r\n        path: 'anatholius-gh-sw.js',\r\n        scope: '/',\r\n    };\r\n    methods = {};\r\n\r\n    /**\r\n     * Tworzy i dodaje konfigurację routa z komponentem\r\n     *\r\n     * @param name - nazwa trasy\r\n     * @param path - ścieżka trasy\r\n     * @param ReactComponent - nazwa komponentu strony\r\n     * @param options - opcje trasy\r\n     */\r\n    addRoute = (name, path, ReactComponent, options) => {\r\n        const route = new RouteConfig(name, path);\r\n        route.component = ReactComponent;\r\n        route.options = Object.assign(route.options, {...options});\r\n        this.routes.push(route);\r\n    };\r\n\r\n    /**\r\n     * Tworzy i dodaje konfigurację trasy kart\r\n     *\r\n     * @param name - nazwa trasy\r\n     * @param path - ścieżka trasy\r\n     * @param {Array} tabsConfig - nazwa komponentu strony\r\n     * @param options - opcje trasy\r\n     */\r\n    addTabsRoute = (name, path, tabsConfig, options) => {\r\n        const tabs = [];\r\n        for (let tab of tabsConfig) {\r\n            const tabRoute = new RouteConfig(name, path);\r\n            tabRoute.component = tab.component;\r\n            tabs.push(tabRoute);\r\n        }\r\n        const route = new RouteConfig(name, path);\r\n        route.tabs = tabs;\r\n        route.options = Object.assign(route.options, {...options});\r\n        this.routes.push(route);\r\n    };\r\n\r\n    /**\r\n     * Tworzy i dodaje konfigurację trasy złożonej z podrzędnych subtras\r\n     *\r\n     * @param name - nazwa trasy\r\n     * @param path - ścieżka trasy\r\n     * @param {Array} tabsConfig - nazwa komponentu strony\r\n     * @param options - opcje trasy\r\n     */\r\n    addDetailsRoute = (name, path, detailRoutes, options) => {\r\n        const tabs = [];\r\n        for (let tab of detailRoutes) {\r\n            const tabRoute = new RouteConfig(name, path);\r\n            tabRoute.component = tab.component;\r\n            tabs.push(tabRoute);\r\n        }\r\n        const route = new RouteConfig(name, path);\r\n        route.tabs = tabs;\r\n        route.options = Object.assign(route.options, {...options});\r\n        this.routes.push(route);\r\n    };\r\n\r\n    /**\r\n     * Tworzy i dodaje konfigurację routa asynchronicznego\r\n     *\r\n     * @param name - nazwa trasy\r\n     * @param path - ścieżka trasy\r\n     * @param config - nazwa komponentu strony\r\n     * @param options - opcje trasy\r\n     */\r\n    addAsyncRoute = (name, path, config, options) => {\r\n        const route = new RouteConfig(name, path);\r\n        // console.log('config', config);\r\n        // console.log('options', options);\r\n\r\n        options.props = {\r\n            type: config.type,\r\n        };\r\n        route.options = Object.assign(route.options, {...options});\r\n\r\n        route.async = (routeTo, routeFrom, resolve, reject) => {\r\n            console.log('routeFrom', routeFrom);\r\n            console.log('routeTo', routeTo);\r\n\r\n            config.component.contextType = React.createContext(options.context);\r\n\r\n            const configResolve = {\r\n                config: {},\r\n                options: options,\r\n            };\r\n\r\n            if (!config.hasOwnProperty('type')) {\r\n                configResolve.config.component = config.component;\r\n            } else {\r\n                configResolve.config[config.type] = {\r\n                    component: config.component,\r\n                };\r\n            }\r\n\r\n            configResolve.options.props = routeTo.params;\r\n\r\n            resolve(configResolve.config, configResolve.options);\r\n        };\r\n        this.routes.push(route);\r\n    };\r\n\r\n    getConfig() {\r\n        return {\r\n            id: this.id,\r\n            root: this.root,\r\n            theme: this.theme,\r\n            name: this.name,\r\n            data: this.data,\r\n            routes: this.routes,\r\n            serviceWorker: this.serviceWorker,\r\n            methods: this.methods,\r\n            on: this.on,\r\n        };\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport {BlockTitle, Icon, List, ListItem, Page, Panel, View} from \"framework7-react\";\r\nimport * as PropTypes from \"prop-types\";\r\n\r\nexport default class PanelLeft extends React.Component {\r\n    displayName = 'PanelLeft';\r\n    static propTypes = {\r\n        display: PropTypes.func,\r\n        // event:   PropTypes.object,\r\n    };\r\n    \r\n    display = this.props.display(this.displayName);\r\n    \r\n    render() {\r\n        this.display = this.props.display(this.displayName);\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                {this.display && <Panel left cover themeDark>\r\n                    <View>\r\n                        <Page>\r\n                            <BlockTitle>Navigacja OFF-LINE</BlockTitle>\r\n                            <List>\r\n                                <ListItem link=\"#\" title=\"Jakiś link1\">\r\n                                    <Icon slot=\"media\" icon=\"fad fa-sign-out\"></Icon>\r\n                                </ListItem>\r\n                                <ListItem link=\"#\" title=\"Jakiś link2\">\r\n                                    <Icon slot=\"media\" icon=\"fad fa-sign-out\"></Icon>\r\n                                </ListItem>\r\n                                <ListItem link=\"#\" title=\"Jakiś lin2k\">\r\n                                    <Icon slot=\"media\" icon=\"fad fa-sign-out\"></Icon>\r\n                                </ListItem>\r\n                                \r\n                                <ListItem divider title=\"Divider Here\"></ListItem>\r\n                                \r\n                                <ListItem link=\"#\" title=\"Jakiś link\">\r\n                                    <Icon slot=\"media\" icon=\"fad fa-sign-out\"></Icon>\r\n                                </ListItem>\r\n                            </List>\r\n                        </Page>\r\n                    </View>\r\n                </Panel>}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\n\r\nexport default class Helper {\r\n\r\n    static test = () => {\r\n        console.log('this', this);\r\n    };\r\n\r\n    static mapToObject = map => {\r\n        const obj = {};\r\n        map.forEach((value, key) => {\r\n            if (value instanceof Set) {\r\n                value = [...value];\r\n            }\r\n            obj[key] = value\r\n        });\r\n        return obj;\r\n    };\r\n\r\n    static mapToObjectSimple = map => Object.fromEntries(map);\r\n    static objectToMap = obj => new Map(Object.entries(obj));\r\n\r\n    static snakeToCamel = (string) => string.replace(/(_\\w)/g, (m) => m[1].toUpperCase());\r\n    static camelToSnake = (string) => string.replace(/[\\w]([A-Z])/g, (m) => m[0] + \"_\" + m[1]).toLowerCase();\r\n    static camelToArray = (string) => string.replace(/[\\w]([A-Z])/g, (m) => m[0] + \"_\" + m[1]).toLowerCase().split('_');\r\n\r\n    static arrayHasEvery = (arraySource, arrayTarget) => arrayTarget.every(v => arraySource.includes(v));\r\n    static arrayHasAny = (arraySource, arrayTarget) => {\r\n        for (let some of arraySource) {\r\n            if (arrayTarget.includes(some)) {\r\n                return true;\r\n            }\r\n        }\r\n    };\r\n\r\n    static missingTables = (arraySource, toFind) => toFind.filter(e => !arraySource.includes(e));\r\n\r\n// static renderComponent(component) {\r\n//     return renderToString(component);\r\n// }\r\n\r\n    static lcfirst(str) {\r\n        str += '';\r\n        let f = str.charAt(0).toLowerCase();\r\n        return f + str.substr(1);\r\n    }\r\n\r\n    static ucfirst(str) {\r\n        str += '';\r\n        let f = str.charAt(0).toUpperCase();\r\n        return f + str.substr(1);\r\n    }\r\n\r\n    static populate(object, entity, data) {\r\n        if (entity && data) {\r\n            switch (entity) {\r\n                case 'owner':\r\n                    break;\r\n                case 'company':\r\n                    object.company = {\r\n                        id: data['id'],\r\n                        companyName: data['companyName'],\r\n                        partnership: data['partnership'],\r\n                        street: data['street'],\r\n                        house: data['house'],\r\n                        appartment: data['appartment'],\r\n                        postalCode: data['postalCode'],\r\n                        city: data['city'],\r\n                        nip: data['nip'],\r\n                        regon: data['regon'],\r\n                        foundingDate: Helper.formatDate(data['foundingDate']),\r\n                        isPartnership: data['isPartnership'],\r\n                        bankAccounts: data['bankAccounts'],\r\n                    };\r\n                    object.contractors = data['contractors'];\r\n                    object.books = data['books'];\r\n                    break;\r\n                case 'book':\r\n                    object.book = {\r\n                        id: data['id'],\r\n                        year: data['year'],\r\n                        col7: data['col7'],\r\n                        col8: data['col8'],\r\n                        col9: data['col9'],\r\n                        col10: data['col10'],\r\n                        col11: data['col11'],\r\n                        col12: data['col12'],\r\n                        col13: data['col13'],\r\n                        col14: data['col14'],\r\n                        col15: data['col15'],\r\n                        col16b: data['col16b'],\r\n                        z1: data['z1'],\r\n                        z2a: data['z2a'],\r\n                        z2b: data['z2b'],\r\n                        z2c: data['z2c'],\r\n                        z2d: data['z2d'],\r\n                        z2e: data['z2e'],\r\n                        z2f: data['z2f'],\r\n                        z2: data['z2'],\r\n                        z3: data['z3'],\r\n                    };\r\n                    break;\r\n                case 'settlement':\r\n                    object.settlement = {\r\n                        id: data['id'],\r\n                        settlementDate: data['settlementDate'],\r\n                        income: data['income'],\r\n                        incomeCumulative: data['incomeCumulative'],\r\n                        costs: data['costs'],\r\n                        costsCumulative: data['costsCumulative'],\r\n                        profit: data['profit'],\r\n                        profitCumulative: data['profitCumulative'],\r\n                        social: data['social'],\r\n                        socialCumulative: data['socialCumulative'],\r\n                        socialDeduction: data['socialDeduction'],\r\n                        health: data['health'],\r\n                        healthCumulative: data['healthCumulative'],\r\n                        healthDeduction: data['healthDeduction'],\r\n                        taxBase: data['taxBase'],\r\n                        tax: data['tax'],\r\n                        taxCumulative: data['taxCumulative'],\r\n                        closed: data['closed'],\r\n                        documents: data['documents'],\r\n                    };\r\n                    break;\r\n                case 'document':\r\n                    object.document = {\r\n                        id: data['id'],\r\n                        type: data['type'],\r\n                        col1: data['col1'],\r\n                        col2: data['col2'],\r\n                        col3: data['col3'],\r\n                        col4: data['col4'],\r\n                        col5: data['col5'],\r\n                        col6: data['col6'],\r\n                        col7: data['col7'],\r\n                        col8: data['col8'],\r\n                        col9: data['col9'],\r\n                        col10: data['col10'],\r\n                        col11: data['col11'],\r\n                        col12: data['col12'],\r\n                        col13: data['col13'],\r\n                        col14: data['col14'],\r\n                        col15: data['col15'],\r\n                        col16a: data['col16a'],\r\n                        col16b: data['col16b'],\r\n                        col17: data['col17'],\r\n                    };\r\n                    break;\r\n                case 'invoice':\r\n                    object.invoice = {\r\n                        id: data['id'],\r\n                        city: data['city'],\r\n                        datePrep: data['datePrep'],\r\n                        buyer: data['buyer'],\r\n                        invoiceNumber: data['invoiceNumber'],\r\n                        paymentMethod: data['paymentMethod'],\r\n                        paymentDate: data['paymentDate'],\r\n                        bankAccount: data['bankAccount'],\r\n                        invoiceItems: data['invoiceItems'],\r\n                        amount: data['amount'],\r\n                        paid: data['paid'],\r\n                        paidValue: data['paidValue'],\r\n                        paidLeft: data['paidLeft'],\r\n                    };\r\n                    break;\r\n                case 'intproof':\r\n                    break;\r\n                case 'economicOperation':\r\n\r\n                    break;\r\n                default:\r\n                    throw new Error(`Unknown entity in Helper.populate() function`);\r\n            }\r\n        }\r\n        return object;\r\n    }\r\n\r\n    static parseEntity(entity, data) {\r\n        if (!data) {\r\n            return null;\r\n        }\r\n        let parsed = {\r\n            id: data['id'] ? data['id'] : null,\r\n        };\r\n        switch (entity) {\r\n            case 'owner': {\r\n                parsed.email = data['email'] ? data['email'] : null;\r\n                parsed.firstName = data['firstName'] ? data['firstName'] : null;\r\n                parsed.lastName = data['lastName'] ? data['lastName'] : null;\r\n                parsed.avatar = data['avatar'] ? data['avatar'] : null;\r\n                break;\r\n            }\r\n            case 'company': {\r\n                parsed.companyName = data['companyName'];\r\n                parsed.partnership = data['partnership'];\r\n                parsed.isPartnership = data['isPartnership'];\r\n                parsed.street = data['street'];\r\n                parsed.house = data['house'];\r\n                parsed.appartment = data['appartment'];\r\n                parsed.postalCode = data['postalCode'];\r\n                parsed.city = data['city'];\r\n                parsed.nip = data['nip'];\r\n                parsed.regon = data['regon'];\r\n                parsed.foundingDate = data['foundingDate'];\r\n                parsed.logo = data['logo'];\r\n                const bankAccounts = [];\r\n                for (let key in data['bankAccounts']) {\r\n                    if (data['bankAccounts'].hasOwnProperty(key)) {\r\n                        bankAccounts.push(Helper.parseEntity('bankAccount', data['bankAccounts'][key]));\r\n                    }\r\n                }\r\n                parsed.bankAccounts = bankAccounts;\r\n\r\n                break;\r\n            }\r\n            case 'bankAccount': {\r\n                parsed.bankAccountName = data['bankAccountName'];\r\n                parsed.bankName = data['bankName'];\r\n                parsed.accountNumber = data['accountNumber'];\r\n                parsed.isDefault = data['isDefault'];\r\n                break;\r\n            }\r\n            case 'book': {\r\n                parsed.year = data['year'];\r\n                parsed.col7 = data['col7'] ? data['col7'] : null;\r\n                parsed.col8 = data['col8'] ? data['col8'] : null;\r\n                parsed.col9 = data['col9'] ? data['col9'] : null;\r\n                parsed.col10 = data['col10'] ? data['col10'] : null;\r\n                parsed.col11 = data['col11'] ? data['col11'] : null;\r\n                parsed.col12 = data['col12'] ? data['col12'] : null;\r\n                parsed.col13 = data['col13'] ? data['col13'] : null;\r\n                parsed.col14 = data['col14'] ? data['col14'] : null;\r\n                parsed.col15 = data['col15'] ? data['col15'] : null;\r\n                parsed.col16b = data['col16b'] ? data['col16b'] : null;\r\n                parsed.z1 = data['z1'] ? data['z1'] : null;\r\n                parsed.z2a = data['z2a'] ? data['z2a'] : null;\r\n                parsed.z2b = data['z2b'] ? data['z2b'] : null;\r\n                parsed.z2c = data['z2c'] ? data['z2c'] : null;\r\n                parsed.z2d = data['z2d'] ? data['z2d'] : null;\r\n                parsed.z2e = data['z2e'] ? data['z2e'] : null;\r\n                parsed.z2f = data['z2f'] ? data['z2f'] : null;\r\n                parsed.z2 = data['z2'] ? data['z2'] : null;\r\n                parsed.z3 = data['z3'] ? data['z3'] : null;\r\n                break;\r\n            }\r\n            case 'settlement': {\r\n                parsed.settlementDate = data['settlementDate'];\r\n                parsed.documents = data['documents'];\r\n                parsed.income = data['income'] ? data['income'] : null;\r\n                parsed.incomeCumulative = data['incomeCumulative'] ? data['incomeCumulative'] : null;\r\n                parsed.costs = data['costs'] ? data['costs'] : null;\r\n                parsed.costsCumulative = data['costsCumulative'] ? data['costsCumulative'] : null;\r\n                parsed.profit = data['profit'] ? data['profit'] : null;\r\n                parsed.profitCumulative = data['profitCumulative'] ? data['profitCumulative'] : null;\r\n                parsed.social = data['social'] ? data['social'] : null;\r\n                parsed.socialCumulative = data['socialCumulative'] ? data['socialCumulative'] : null;\r\n                parsed.socialDeduction = data['socialDeduction'] ? data['socialDeduction'] : null;\r\n                parsed.health = data['health'] ? data['health'] : null;\r\n                parsed.healthCumulative = data['healthCumulative'] ? data['healthCumulative'] : null;\r\n                parsed.healthDeduction = data['healthDeduction'] ? data['healthDeduction'] : null;\r\n                parsed.taxBase = data['taxBase'] ? data['taxBase'] : null;\r\n                parsed.tax = data['tax'] ? data['tax'] : null;\r\n                parsed.taxCumulative = data['taxCumulative'] ? data['taxCumulative'] : null;\r\n                parsed.closed = data['closed'] ? data['closed'] : null;\r\n                if (data['book']) {\r\n                    parsed.book = Helper.parseEntity('book', data['book']);\r\n                }\r\n                break;\r\n            }\r\n            case 'document': {\r\n                parsed.type = data['type'];\r\n                // parsed.invoice = Helper.parseEntity('invoice', data['invoice']);\r\n                // parsed.intproof = Helper.parseEntity('intproof', data['intproof']);\r\n                parsed.col1 = data['col1'];\r\n                parsed.col2 = data['col2'];\r\n                parsed.col3 = data['col3'];\r\n                parsed.col4 = data['col4'];\r\n                parsed.col5 = data['col5'];\r\n                parsed.col6 = Helper.parseEntity('economicEvent', data['col6']);\r\n                parsed.col7 = data['col7'];\r\n                parsed.col7Penny = data['col7Penny'];\r\n                parsed.col8 = data['col8'];\r\n                parsed.col8Penny = data['col8Penny'];\r\n                parsed.col9 = data['col9'];\r\n                parsed.col9Penny = data['col9Penny'];\r\n                parsed.col10 = data['col10'];\r\n                parsed.col10Penny = data['col10Penny'];\r\n                parsed.col11 = data['col11'];\r\n                parsed.col11Penny = data['col11Penny'];\r\n                parsed.col12 = data['col12'];\r\n                parsed.col12Penny = data['col12Penny'];\r\n                parsed.col13 = data['col13'];\r\n                parsed.col13Penny = data['col13Penny'];\r\n                parsed.col14 = data['col14'];\r\n                parsed.col14Penny = data['col14Penny'];\r\n                parsed.col15 = data['col15'];\r\n                parsed.col15Penny = data['col15Penny'];\r\n                parsed.col16a = data['col16a'];\r\n                parsed.col16b = data['col16b'];\r\n                parsed.col16bPenny = data['col16bPenny'];\r\n                parsed.col17 = data['col17'];\r\n                if (data['settlement']) {\r\n                    parsed.settlement = Helper.parseEntity('settlement', data['settlement']);\r\n                }\r\n                break;\r\n            }\r\n            case 'invoice': {\r\n                parsed.city = data['city'];\r\n                parsed.datePrep = data['datePrep'];\r\n                parsed.buyer = data['buyer'];\r\n                parsed.invoiceNumber = data['invoiceNumber'];\r\n                parsed.paymentMethod = data['paymentMethod'];\r\n                parsed.paymentDate = data['paymentDate'];\r\n                parsed.bankAccount = data['bankAccount'];\r\n                const items = [];\r\n                for (let key in data['invoiceItems']) {\r\n                    if (data['invoiceItems'].hasOwnProperty(key)) {\r\n                        items.push(Helper.parseEntity('invoiceItem', data['invoiceItems'][key]));\r\n                    }\r\n                }\r\n                parsed.invoiceItems = items;\r\n                parsed.amount = data['amount'];\r\n                parsed.amountPenny = data['amountPenny'];\r\n                parsed.paidValue = data['paidValue'];\r\n                parsed.paidValuePenny = data['paidValuePenny'];\r\n                parsed.paidLeft = data['paidLeft'];\r\n                parsed.paidLeftPenny = data['paidLeftPenny'];\r\n                parsed.economicEvent = Helper.parseEntity('economicEvent', data['economicEvent']);\r\n                break;\r\n            }\r\n            case 'invoiceItem': {\r\n                parsed.pos = data['pos'];\r\n                parsed.title = data['title'];\r\n                parsed.unit = data['unit'];\r\n                parsed.unitCount = data['unitCount'];\r\n                parsed.unitPrice = data['unitPrice'];\r\n                parsed.unitPricePenny = data['unitPricePenny'];\r\n                parsed.legalBasis = data['legalBasis'];\r\n                parsed.price = data['price'];\r\n                parsed.pricePenny = data['pricePenny'];\r\n                parsed.economicOperation = Helper.parseEntity('economicOperation', data['economicOperation']);\r\n                break;\r\n            }\r\n            case 'intproof': {\r\n                parsed.city = data['city'];\r\n                parsed.datePrep = data['datePrep'];\r\n                parsed.proofNumber = data['proofNumber'];\r\n                const items = [];\r\n                for (let key in data['intproofItems']) {\r\n                    if (data['intproofItems'].hasOwnProperty(key)) {\r\n                        items.push(Helper.parseEntity('intproofItem', data['intproofItems'][key]));\r\n                    }\r\n                }\r\n                parsed.intproofItems = items;\r\n                parsed.amount = data['amount'];\r\n                parsed.amountPenny = data['amountPenny'];\r\n                parsed.economicEvent = Helper.parseEntity('economicEvent', data['economicEvent']);\r\n                break;\r\n            }\r\n            case 'intproofItem': {\r\n                parsed.pos = data['pos'];\r\n                parsed.title = data['title'];\r\n                parsed.genus = data['genus'];\r\n                parsed.documentType = data['documentType'];\r\n                parsed.documentNumber = data['documentNumber'];\r\n                parsed.documentDate = data['documentDate'];\r\n                parsed.unit = data['unit'];\r\n                parsed.unitCount = data['unitCount'];\r\n                parsed.unitPrice = data['unitPrice'];\r\n                parsed.unitPricePenny = data['unitPricePenny'];\r\n                parsed.price = data['price'];\r\n                parsed.pricePenny = data['pricePenny'];\r\n                parsed.economicOperation = Helper.parseEntity('economicOperation', data['economicOperation']);\r\n                break;\r\n            }\r\n            case 'economicEvent': {\r\n                parsed.type = data['type'];\r\n                parsed.description = data['description'];\r\n                const economicOperations = [];\r\n                for (let key in data['economicOperations']) {\r\n                    if (data['economicOperations'].hasOwnProperty(key)) {\r\n                        economicOperations.push(Helper.parseEntity('economicOperation', data['economicOperations'][key]));\r\n                    }\r\n                }\r\n                parsed.economicOperations = economicOperations;\r\n                // parsed.company = parseEntity('company', data['company']);\r\n                break;\r\n            }\r\n            case 'economicOperation': {\r\n                // parsed.economicEvent = data['economicEvent']['id'];\r\n                parsed.type = data['type'];\r\n                parsed.description = data['description'];\r\n                parsed.bookColumn = data['bookColumn'];\r\n                parsed.isPeriodic = data['isPeriodic'];\r\n                parsed.period = data['period'];\r\n                parsed.title = data['title'];\r\n                break;\r\n            }\r\n            default:\r\n                throw new Error(`Unknown entity in Helper.populate() function`);\r\n        }\r\n        return parsed;\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns React.Fragment component with formatted vignette for invoice by company data\r\n     *\r\n     * @param data\r\n     * @returns {string|*}\r\n     * @private\r\n     */\r\n    static printVignette(data) {\r\n        return (data && data.nip) && (\r\n            <React.Fragment>\r\n                <b>{data.companyName}{data.isPartnership ? ' ' + Helper.parseSuffix(data.partnership) : ''}</b><br/>\r\n                {data.street} {data.house}{data.appartment && '/' + data.appartment}<br/>\r\n                {data.postalCode} {data.city}<br/>\r\n                NIP: {data.nip}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n    /**\r\n     * Zwraca przeparsowane dane adresowe do jednolinijkowego stringa\r\n     *\r\n     * @param data\r\n     * @param target\r\n     * @returns {string}\r\n     */\r\n    static parseAddress(data, target = 'kpir') {\r\n        if (data) {\r\n            if (target === 'vignette') {\r\n                return `${data.street} ${data.house}${data.appartment && '/' + data.appartment}<br/>\r\n${data.postalCode} ${data.city}<br/>`;\r\n            } else {\r\n                return `${data.street} ${data.house}${data.appartment && '/' + data.appartment}; ${data.postalCode} ${data.city}`;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n    static parseSuffix(suffixValue) {\r\n        const suffixes = {\r\n            zoo: 'Sp. z o.o.',\r\n            sa: 'S.A.',\r\n        };\r\n        return suffixes[suffixValue];\r\n    }\r\n\r\n    static fullName(company) {\r\n        return company.companyName + (company.isPartnership ? ' ' + Helper.parseSuffix(company.partnership) : '');\r\n    }\r\n\r\n// static prepareInvoiceNumber(contractor) {\r\n//     const currentDate = new Date();\r\n//     const no = parent.api.entity.documents.reduce((total, document) => total + (document['col4'] === fullName(contractor) ? 1 : 0), 1);\r\n//     return `${contractor.shortcut}/${currentDate.getFullYear()}/${currentDate.getMonth()}/${no}`;\r\n// }\r\n\r\n    static formatItemTitle(operation, date) {\r\n        if (operation) {\r\n            const title = ['description', 'title', 'period'].map(field => {\r\n                let result;\r\n                if (field === 'description') {\r\n                    return operation['description']\r\n                }\r\n                if (!operation['isPeriodic']) {\r\n                    return '';\r\n                }\r\n\r\n                if (operation[field] !== '' && operation[field] !== null) {\r\n                    result = field !== 'period' ? ' ' + operation[field] : ' - ' +\r\n                        Helper.formatPeriod(operation[field], date)\r\n                    ;\r\n                } else {\r\n                    result = '';\r\n                }\r\n\r\n                return result;\r\n            });\r\n            return typeof (title) === 'string' ? title : title.join('');\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns json formatted options {value, text} from array where value=array['id'], text=array[fieldName]\r\n     *\r\n     * @param fieldName - field name\r\n     * @param data - value of field\r\n     * @param withNoSelect - add choose option on start\r\n     * @param conditions - conditions to find element\r\n     * @param mergeFields - fields to merge in select view\r\n     * @returns {*[]|*}\r\n     * @private\r\n     */\r\n    static formatOptions(fieldName, data, withNoSelect = true, conditions = [], mergeFields = []) {\r\n        if (data && data.length > 0) {\r\n            if (withNoSelect) {\r\n                return [\r\n                    {value: '', text: data.length === 0 ? `Brak opcji` : `Wybierz`},\r\n                    ...data.filter(option => {\r\n                        let condition = true;\r\n                        for (let key in conditions) {\r\n                            if (conditions.hasOwnProperty(key)) {\r\n                                if (option[key] !== conditions[key]) {\r\n                                    condition = false;\r\n                                }\r\n                            }\r\n                        }\r\n                        return condition;\r\n                    }).map(option => {\r\n                        const text = mergeFields.map(field => {\r\n                            let ret;\r\n\r\n                            if (option[field] !== '' && option[field] !== null) {\r\n                                ret = (field !== 'period' ? ' ' : ' - ') + option[field];\r\n                            } else {\r\n                                ret = '';\r\n                            }\r\n                            return ret;\r\n                        });\r\n                        let optionValue = '';\r\n                        if (fieldName === 'companyName') {\r\n                            optionValue = option[fieldName] + (option['isPartnership'] ? ' ' + Helper.parseSuffix(option['partnership']) : '');\r\n                        } else {\r\n                            optionValue = option[fieldName] + (option[fieldName] !== text ? (typeof (text) == 'string' ? text : text.join('')) : '')\r\n                        }\r\n                        return {\r\n                            value: option['id'],\r\n                            text: optionValue,\r\n                        };\r\n                    }),\r\n                ];\r\n            } else {\r\n                return data.map(option => {\r\n                    const text = option[fieldName] + mergeFields.map(field => {\r\n                        let ret;\r\n\r\n                        if (option[field] !== '' && option[field] !== null) {\r\n                            ret = (field !== 'period' ? ' ' : ' - ') + option[field];\r\n                        } else {\r\n                            ret = '';\r\n                        }\r\n                        return ret;\r\n                    });\r\n\r\n                    let optionValue = '';\r\n                    if (fieldName === 'companyName') {\r\n                        optionValue = option[fieldName] + (option['isPartnership'] ? ' ' + Helper.parseSuffix(option['partnership']) : '');\r\n                    } else {\r\n                        optionValue = option[fieldName] + (option[fieldName] !== text ? (typeof (text) == 'string' ? text : text.join('')) : '');\r\n                    }\r\n                    return {\r\n                        value: option['id'],\r\n                        text: optionValue,\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return [\r\n            {value: '', text: `Brak opcji`},\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Return array element by value of id attribute\r\n     *\r\n     * @param id\r\n     * @param array\r\n     * @param childFieldName - name of field to find index by id its child\r\n     * @returns {*}\r\n     * @returns {null|*}\r\n     */\r\n    static getArrayElementById(id, array, childFieldName = null) {\r\n        if (id) {\r\n            if (childFieldName !== null) {\r\n                for (let key in array) {\r\n                    if (array.hasOwnProperty(key) && array[key][childFieldName] && array[key][childFieldName]['id'] === id) {\r\n                        return array[key];\r\n                    }\r\n                }\r\n            } else {\r\n                const index = Helper.getIndexOfValue('id', id, array);\r\n                return index !== -1 ? array[index] : null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static getIndexOfElementArrayById(id, array) {\r\n        // console.group('getIndexOfElementArrayById');\r\n        // console.log(id, array);\r\n        // console.groupEnd();\r\n        if (id && array.length > 0) {\r\n            for (let key in array) {\r\n                if (array.hasOwnProperty(key)) {\r\n                    if (parseInt(id) === array[key]['id']) {\r\n                        return key;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static getIndexOfValue(fieldName, fieldValue, array) {\r\n        return array.findIndex(item => String(item[fieldName]) === String(fieldValue));\r\n    }\r\n\r\n    static getIndexOfField(fieldName, fieldValue, array) {\r\n        return array.findIndex(item => String(item[fieldName]) === String(fieldValue));\r\n    }\r\n\r\n    /**\r\n     * Return element of {array} by {fieldValue} of field {fieldName}\r\n     *\r\n     * @param fieldName\r\n     * @param fieldValue\r\n     * @param array\r\n     * @returns {*}\r\n     */\r\n    static findArrayElementByFieldValue(fieldName, fieldValue, array) {\r\n        const index = Helper.getIndexOfValue(fieldName, fieldValue, array);\r\n        return index !== -1 ? array[index] : null;\r\n    }\r\n\r\n    /**\r\n     * Wyszukuje instancję w tablicy instancji na podstawie daty bez względu w jakiej formie jest ona podana\r\n     *\r\n     * @param fieldName\r\n     * @param date\r\n     * @param array\r\n     * @returns {null|*}\r\n     */\r\n    static findArrayElementByFieldDate(fieldName, date, array) {\r\n        if (date) {\r\n            for (let key in array) {\r\n                if (array.hasOwnProperty(key)) {\r\n                    if (array[key][fieldName]) {\r\n                        let fieldDate = array[key][fieldName];\r\n\r\n                        const isBackendDate = !!fieldDate.date;\r\n                        if (isBackendDate) {\r\n                            fieldDate = new Date(fieldDate.date);\r\n                            // const backendDate = isBackendDate && !isNaN(Date.parse(fieldDate.date));\r\n                        }\r\n                        if (typeof date.getMonth === 'undefined') {\r\n                            date = new Date(date);\r\n                        }\r\n                        if (typeof fieldDate.getMonth === 'undefined') {\r\n                            fieldDate = new Date(fieldDate);\r\n                        }\r\n                        if (!isNaN(fieldDate.getMonth()) &&\r\n                            date.getFullYear() ===\r\n                            fieldDate.getFullYear()\r\n                            && date.getMonth() === fieldDate.getMonth()\r\n                            && date.getDate() === fieldDate.getDate()\r\n                        ) {\r\n                            return array[key];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static formatPeriod(period, date) {\r\n        return Helper.formatDate(date, 'invoicePeriod' + period)\r\n    }\r\n\r\n    static stringifyDate(date) {\r\n        return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\r\n    }\r\n\r\n    /**\r\n     * Formatuje datę do użycia w kontrolkach\r\n     *\r\n     * @param date\r\n     * @param type\r\n     * @param changeYear\r\n     * @param changeMonth\r\n     * @returns {string|number}\r\n     */\r\n    static formatDate(date, type, changeYear = 0, changeMonth = 0) {\r\n        if (!date) {\r\n            return '';\r\n        }\r\n\r\n        const monthNames = [\"styczeń\", \"luty\", \"marzec\", \"kwiecień\", \"maj\", \"czerwiec\",\r\n            \"lipiec\", \"sierpień\", \"wrzesień\", \"październik\", \"listopad\", \"grudzień\",\r\n        ];\r\n        const quarterNames = [\"I kwartał\", \"II kwartał\", \"III kwartał\", \"IV kwartał\"];\r\n        let incrementing = 0;\r\n        if (date && date.date) {\r\n            incrementing = 1;\r\n            date = new Date(date.date);\r\n        }\r\n        if (typeof date === 'string') {\r\n            date = new Date(date);\r\n        }\r\n        const month = date.getMonth() + changeMonth;\r\n        const resultDate = {\r\n            year: date.getFullYear() + changeYear,\r\n            month: month,\r\n            day: date.getDate(),\r\n            hour: date.getHours(),\r\n            minute: date.getMinutes(),\r\n            second: date.getSeconds(),\r\n            current: (new Date(\r\n                date.getFullYear() + changeYear,\r\n                month,\r\n                date.getDate() + incrementing,\r\n                date.getHours(),\r\n                date.getMinutes(),\r\n                date.getSeconds(),\r\n            )).toISOString().slice(0, 10),\r\n            firstDayMonth: (new Date(\r\n                date.getFullYear() + changeYear,\r\n                month,\r\n                1 + incrementing,\r\n                date.getHours(),\r\n                date.getMinutes(),\r\n                date.getSeconds(),\r\n            )).toISOString().slice(0, 10),\r\n            lastDayMonth: new Date(\r\n                date.getFullYear() + changeYear,\r\n                month + 1,\r\n                incrementing,\r\n                date.getHours(),\r\n                date.getMinutes(),\r\n                date.getSeconds(),\r\n            ).toISOString().slice(0, 10),\r\n        };\r\n\r\n        switch (type) {\r\n            case 'bookYear':\r\n                return resultDate.year;\r\n            case 'settlementPeriod':\r\n                return monthNames[resultDate.month] + ' ' + resultDate.year;\r\n            case 'invoicePeriodMonth':\r\n                return monthNames[resultDate.month];\r\n            case 'invoicePeriodQuarter':\r\n                return quarterNames[Math.floor(resultDate.month / 3) - 1];\r\n            case 'invoicePeriodYear':\r\n                return resultDate.year;\r\n            case 'settlementDate':\r\n            case 'navigationDate':\r\n                return resultDate.lastDayMonth;\r\n            default:\r\n                return resultDate.current;\r\n        }\r\n\r\n    }\r\n\r\n    const\r\n    actions = [\r\n        {action: 'companies', entity: 'company', collection: 'companies'},\r\n        {action: 'bank_accounts', entity: 'bankAccount', collection: 'bankAccounts'},\r\n        {action: 'contractors', entity: 'contractor', collection: 'contractors'},\r\n        {action: 'books', entity: 'book', collection: 'books'},\r\n        {action: 'settlements', entity: 'settlement', collection: 'settlements'},\r\n        {action: 'documents', entity: 'document', collection: 'documents'},\r\n        {action: 'invoices', entity: 'invoice', collection: 'invoices'},\r\n        {action: 'invoice_items', entity: 'invoiceItem', collection: 'invoiceItems'},\r\n        {action: 'intproofs', entity: 'intproof', collection: 'intproofs'},\r\n        {action: 'intproof_items', entity: 'intproofItem', collection: 'intproofs'},\r\n        {action: 'economic_events', entity: 'economicEvent', collection: 'economicEvents'},\r\n        {action: 'economic_operations', entity: 'economicOperation', collection: 'economicOperations'},\r\n    ];\r\n\r\n    static actionsEntity(actionName) {\r\n        console.log(actionName);\r\n        return Helper.actions[Helper.actions.findIndex(item => item.action === actionName)].entity;\r\n    }\r\n\r\n    static entitysAction(entityName) {\r\n        return Helper.actions[Helper.actions.findIndex(item => item.entity === entityName)].action;\r\n    }\r\n\r\n    static entitysCollection(entityName) {\r\n        return Helper.actions[Helper.actions.findIndex(item => item.entity === entityName)].collection;\r\n    }\r\n\r\n    static _handleComaUnitPrice(e) {\r\n        if (e.keyCode === 188 || e.keyCode === 190 || e.keyCode === 110) {\r\n            e.preventDefault();\r\n            const nextInput = document.getElementsByName(`${e.currentTarget.name}Penny`).item(0);\r\n            nextInput.focus();\r\n            nextInput.setSelectionRange(0, nextInput.value.length);\r\n        }\r\n    }\r\n\r\n    static comparePenny(document, col, showAsObject = false) {\r\n        if (document[col] === null) {\r\n            return '';\r\n        }\r\n        const unit = document[col]['unit'];\r\n        const penny = document[col]['penny'] !== null && document[col]['penny'] !== '' ? document[col]['penny'].toString().padStart(2, '0') : '00';\r\n        const value = parseInt(`${unit}${penny}`);\r\n        const float = value / 100;\r\n        if (showAsObject) {\r\n            return {\r\n                unit: unit,\r\n                penny: penny,\r\n            }\r\n        } else {\r\n            return Number.parseFloat(float.toString()).toFixed(2);\r\n        }\r\n    }\r\n\r\n    static sumColumn(settlements, col) {\r\n        const sum = settlements.reduce((total, settlement) => {\r\n            return total + parseFloat(Helper.comparePenny(settlement, 'col' + col));\r\n        }, 0);\r\n        return parseFloat(sum).toFixed(2);\r\n    }\r\n}","/**\r\n * @interface\r\n *\r\n * @property {string} type - typ konfigu\r\n * @property {ApiConfig} apiConfig - konfiguracja Api backendowego\r\n * @property {Object} fields - konfiguracja encji\r\n * @property {ItemConfig} item - konfiguracja encji\r\n * @property {CollectionConfig} collection - konfiguracja kolekcji\r\n * @property {FormConfig} form - konfiguracja kolekcji\r\n * @property {ValidationConfig} validation - konfiguracja kolekcji\r\n * @property {Object} [data] Optional - konfiguracja kolekcji\r\n */\r\nexport default class FormConfigInterface {\r\n    /** @type string */\r\n    type;\r\n    /** @type ApiConfig */\r\n    apiConfig;\r\n    /** @type Object */\r\n    fields;\r\n    /** @type ItemConfig */\r\n    item;\r\n    /** @type CollectionConfig */\r\n    collection;\r\n    /** @type FormConfig */\r\n    form;\r\n    /** @type ValidationConfig */\r\n    validation;\r\n    /** @type Object */\r\n    data;\r\n}","/**\r\n * @property {string} action\r\n */\r\nexport default class ApiConfig {\r\n    /** @type {string} - nazwa akcji */\r\n    action = \"\";\r\n    \r\n    /**\r\n     * @param {string} action\r\n     */\r\n    constructor(action) {\r\n        this.action = action;\r\n    }\r\n    \r\n}","/**\r\n * @property {string} action\r\n * @property {string} name\r\n * @property {string} label\r\n * @property {string} emptyValue\r\n */\r\nexport default class FieldConfig {\r\n    \r\n    /** @type {string} - typ pola */\r\n    type;\r\n    /** @type {string} - nazwa pola */\r\n    name;\r\n    /** @type {string} - etykieta pola */\r\n    label;\r\n    /** @type {string} - pusta wartość */\r\n    emptyValue;\r\n    \r\n    _widget;\r\n    \r\n    /**\r\n     * @param type - typ\r\n     * @param name - nazwa\r\n     * @param label - label\r\n     * @param emptyValue - pusta wartość\r\n     * @param [additionalOptions] - dodatkowe opcje\r\n     */\r\n    constructor(type, name, label, emptyValue, additionalOptions = null) {\r\n        this.type = type;\r\n        this.name = name;\r\n        this.label = label;\r\n        this.emptyValue = emptyValue;\r\n        if (additionalOptions) {\r\n            for (let key in additionalOptions) {\r\n                if (additionalOptions.hasOwnProperty(key)) {\r\n                    this[key] = additionalOptions[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    acceptVisitor = (widgetFactoryCoordinator) => {\r\n        // widgetFactoryCoordinator.visitField(this);\r\n        widgetFactoryCoordinator.setFieldWidget(this);\r\n    };\r\n    \r\n    setFieldWidget = (widget) => {\r\n        this._widget = widget;\r\n    }\r\n}","\r\nexport default class ItemConfig {\r\n    /** @type {string} - nazwa encji */\r\n    name = \"\";\r\n    /** @type {string} - tytuł wyświetlany */\r\n    title = \"\";\r\n    /** @type {string} nazwa encji w bazie danych */\r\n    entity = \"\";\r\n    /**\r\n     * @type {{footer: string, header: string, title: string}}\r\n     * @property {string|function} [header] - nazwa encji lub funkcja\r\n     * @property {string|function} [title] - nazwa encji lub funkcja\r\n     * @property {string|function} [footer] - nazwa encji lub funkcja\r\n     */\r\n    preview = {\r\n        type:   \"item\",\r\n        header: \"\",\r\n        title:  \"\",\r\n        footer: \"\",\r\n    };\r\n    \r\n    /**\r\n     *\r\n     * @param {string} name\r\n     * @param {string} title\r\n     * @param {string} entity\r\n     * @param {Object} [preview]\r\n     * @param {string|function} preview.type\r\n     * @param {string|function} preview.header\r\n     * @param {string|function} preview.title\r\n     * @param {string|function} preview.footer\r\n     * @param {string} [event] - obiekt eventów pochodzący z kontekstu\r\n     * @param {string} [handle] - obiekt handlerów pochodzących z kontekstu\r\n     */\r\n    constructor(name, title, entity, preview, event, handle) {\r\n        this.name = name;\r\n        this.title = title;\r\n        this.entity = entity;\r\n        this.preview = preview;\r\n        if (event) {\r\n            this.event = event;\r\n        }\r\n        if (handle) {\r\n            this.handle = handle;\r\n        }\r\n    }\r\n    \r\n}","/**\r\n * @property {string} name\r\n * @property {string} title\r\n * @property {string|array} emptyValue\r\n * @property {string} formName\r\n * @property {string} [parentForm]\r\n */\r\nexport default class CollectionConfig {\r\n    /** @type {string} - nazwa kolekcji */\r\n    name = \"\";\r\n    /** @type {string} - tytuł kolekcji */\r\n    title = \"\";\r\n    /** @type {string|array} emptyValue - domyślna wartość */\r\n    emptyValue = \"\";\r\n    /** @type {string} - nazwa formularza kolekcji */\r\n    formName = \"\";\r\n    /** @type {string|null} - nazwa formularza nadrzędnego */\r\n    parentForm = null;\r\n    /** @type {Object} - konfiguracja widoku formularza */\r\n    preview = {};\r\n    \r\n    /**\r\n     * @param {string} name\r\n     * @param {string} title\r\n     * @param {string|array} emptyValue\r\n     * @param {string} formName\r\n     * @param {string} preview\r\n     * @param {string} [parentForm]\r\n     */\r\n    constructor(name, title, emptyValue, formName, preview, parentForm) {\r\n        this.name = name;\r\n        this.title = title;\r\n        this.emptyValue = emptyValue;\r\n        this.formName = formName;\r\n        this.preview = preview;\r\n        this.parentForm = parentForm;\r\n    }\r\n    \r\n}","/**\r\n * #Konfiguracja walidacji w kontekście pola\r\n * ##Role\r\n * - required - czy jest niepuste <\r\n * - type consistency - czy zgadza się typ wartości\r\n * - value correctness - czy wartość jest poprawna\r\n *\r\n * @property {Object} fields - konfiguracja zasad walidacji pól\r\n */\r\nexport default class FieldsValidationConfig {\r\n    fields = {};\r\n    \r\n    /**\r\n     * Konfiguracja walidacji pola\r\n     *\r\n     * @param {Object} fields - konfiguracja zasad walidacji pól\r\n     */\r\n    constructor(fields) {\r\n        this.fields = fields;\r\n    }\r\n}","/**\r\n * #Konfiguracja walidacji w kontekście formularza\r\n * ##Role walidacji:\r\n * - depended - pole formularza jest zależne od innego\r\n *\r\n * @property {Object} [...arguments] - typ pola role validacji zdefiniowane obiektami klas ról\r\n * @see FormDependsRule\r\n *\r\n * @description **Warunki walidacji dla formularza:**\r\n * Każdy argument przekazany do konstruktora klasy powinien być instancją klasy roli\r\n * see: /App/Api/Component/ValidationRules/*\r\n */\r\nexport default class FormValidationConfig {\r\n    rules = [];\r\n    \r\n    /**\r\n     * Konfiguracja walidacji pola w kontekście formularza\r\n     *\r\n     * @param {Object} [arguments] - role validacji zdefiniowane obiektami klas ról\r\n     */\r\n    constructor() {\r\n        // console.log('arguments', arguments);\r\n        \r\n        //należy uwzględnić dowolną iloś argumentów/ról\r\n        for (let rule of arguments) {\r\n            this.rules.push(rule);\r\n        }\r\n    }\r\n}","/**\r\n * @name CollectionValidationConfig\r\n *\r\n * #Konfiguracja walidacji w kontekście kolekcji\r\n * ##Role walidacji:\r\n * - unique - see {@link CollectionUniqueRule}\r\n *\r\n * @property {Object} [...arguments] - typ pola role validacji zdefiniowane obiektami klas ról\r\n *\r\n * @description **Warunki walidacji dla formularza:**\r\n * Każdy argument przekazany do konstruktora klasy powinien być instancją klasy roli\r\n * see: ({@link /App/Api/Component/ValidationRules/} folder)\r\n */\r\nexport default class CollectionValidationConfig {\r\n    rules = [];\r\n    \r\n    /**\r\n     * Konfiguracja walidacji pola w kontekście formularza\r\n     *\r\n     * @param {[]} [arguments] - role validacji zdefiniowane obiektami klas ról\r\n     * @see CollectionUniqueRule\r\n     */\r\n    constructor() {\r\n        // console.log('arguments', arguments);\r\n        \r\n        //należy uwzględnić dowolną iloś argumentów/ról\r\n        for (let rule of arguments) {\r\n            this.rules.push(rule);\r\n        }\r\n    }\r\n}","import FieldsValidationConfig from \"./Validation/FieldsValidationConfig\";\r\nimport FormValidationConfig from \"./Validation/FormValidationConfig\";\r\nimport CollectionValidationConfig from \"./Validation/CollectionValidationConfig\";\r\n\r\n/**\r\n * Validation config should configure 3 areas:\r\n * ##1° fieldContext - ``(fields rules)``:\r\n *      *required for offline validation*\r\n *      • **required** - czy jest niepuste\r\n *      • **type consistency** - czy zgadza się typ wartości\r\n *      • **value correctness** - czy wartość jest poprawna\r\n *  ##2° itemContext - ``(how field depend on other fields in record)``\r\n *      *required for offline validation*\r\n *      np. isPartnership determinuje czy partnership jest required\r\n *      *Właściwie to ten przykład nie musi być walidowany, ponieważ załatwia go zachowanie kontrolek*\r\n *      *- Jeśli isPartnership to partnership jest włączony i wymagany*\r\n *      *- Jeśli nie isPartnership to partnership jest wyłączony i nawet nie trafia do walidacji*\r\n *  ##3° collectionContext - ``(how fields depend on other items fields)``\r\n *     *required for any validation*\r\n *     • np. __*isDefault*__ jest unikalne w kontekście kolekcji, tzn. może być tru tylko w jednym rekordzie\r\n *     • np. __*bankAccountName*__ jest unikalne w kontekście kolekcji, tzn. nie może się powtarzać w innych rekordach\r\n *     • np. __*accountNumber*__ jest unikalne w kontekście kolekcji, tzn. nie może się powtarzać w innych rekordach\r\n * @property {FieldsValidationConfig} fieldsRules - zasady walidacji pól\r\n * @property {FormValidationConfig} formRules - zasady walidacji pól w kontekście formularza\r\n * @property {CollectionValidationConfig} collectionRules - zasady walidacji pól w kontekście kolekcji\r\n */\r\nexport default class ValidationConfig {\r\n    \r\n    /**\r\n     * Constructor of ValidationConfig\r\n     *\r\n     * @param {[]} [arguments] - role walidacji zdefiniowane klasami strategii\r\n     */\r\n    constructor() {\r\n        // console.log('ValidationConfig.arguments', arguments);\r\n        for (let rules of arguments) {\r\n            if (rules instanceof FieldsValidationConfig) {\r\n                //zasady walidacji pól\r\n                this.fieldsRules = rules;\r\n            } else if (rules instanceof FormValidationConfig) {\r\n                //zasady walidacji pól w kontekście formularza\r\n                this.formRules = rules;\r\n            } else if (rules instanceof CollectionValidationConfig) {\r\n                //zasady walidacji pól w kontekście kolekcji\r\n                this.collectionRules = rules;\r\n            }\r\n        }\r\n    }\r\n    \r\n}","/**\r\n * #Konfiguracja walidacji w kontekście pola\r\n * ##Role\r\n * - required - czy jest niepuste <\r\n * - type consistency - czy zgadza się typ wartości\r\n * - value correctness - czy wartość jest poprawna\r\n * \r\n * @property {string} type - typ pola\r\n * @property {boolean} required - czy pole jest wymagane?\r\n * @property {RegExp} correcness - wzór do sprawdzenia poprawności wartości pola\r\n *  \r\n * @example ##type={wartość}\r\n * Może przyjmować wartości:\r\n *  'number' - pole <input> typu \"number\"\r\n *  'text' - pole <input> typu \"text\"\r\n *  'select' - pole <select>\r\n *  'date' - pole <input> typu \"date\"\r\n *  'checkbox' - pole <input> typu \"checkbox\"\r\n *  'radio' - pole <input> typu \"radio\"\r\n *  'collection' - kolekcja typu array\r\n *  \r\n *  @description **Warunki walidacji dla pola:**\r\n *  <table border=1 cellspacing=5 width=\"100%\">\r\n *      <tr>\r\n *          <th>type</th>\r\n *          <th>required</th>\r\n *          <th>type</th>\r\n *          <th>correctness</th>\r\n *      </tr>\r\n *      <tr>\r\n *          <td>***number***</td>\r\n *          <td>`value!==\"\"`</td>\r\n *          <td>`typeof () === 'number'`</td>\r\n *          <td>other rules</td>\r\n *      </tr>\r\n *      <tr>\r\n *          <td>***text***</td>\r\n *          <td>`value!==\"\"`</td>\r\n *          <td>`typeof () === 'string'`</td>\r\n *          <td>other rules</td>\r\n *      </tr>\r\n *      <tr>\r\n *          <td>***select***</td>\r\n *          <td>`value!==\"\"`</td>\r\n *          <td>`typeof () === 'string'`</td>\r\n *          <td>other rules</td>\r\n *      </tr>\r\n *      <tr>\r\n *          <td>***date***</td>\r\n *          <td>`value!==\"\"`</td>\r\n *          <td>`typeof () === 'datetime'`</td>\r\n *          <td>other rules</td>\r\n *      </tr>\r\n *      <tr>\r\n *          <td>***checkbox***</td>\r\n *          <td>`N/D`</td>\r\n *          <td>`typeof () === 'bool'`</td>\r\n *          <td>other rules</td>\r\n *      </tr>\r\n *      <tr>\r\n *          <td>***radio***</td>\r\n *          <td>`N/D`</td>\r\n *          <td>`typeof () === 'number'`</td>\r\n *          <td>other rules</td>\r\n *      </tr>\r\n *      <tr>\r\n *          <td>***collection***</td>\r\n *          <td>`value.length > 0`</td>\r\n *          <td>`typeof () === 'array'`</td>\r\n *          <td>other rules</td>\r\n *      </tr>\r\n *  </table>\r\n */\r\nexport default class FieldRules {\r\n    \r\n    /**\r\n     * Konfiguracja walidacji pola\r\n     *\r\n     * @param {string} type - typ pola\r\n     * @param {boolean} [required] - (opcjonalny) - czy pole jest wymagane\r\n     * @param {RegExp} [correctness] - (opcjonalny) - RegExp do sprawdzenia poprawności wartości\r\n     */\r\n    constructor(type, required, correctness) {\r\n        this.type = type;\r\n        if (required !== undefined) this.required = required;\r\n        if (correctness !== undefined) this.correctness = correctness;\r\n    }\r\n}","export class ValidatorRulesException {\r\n    displayName = 'ValidatorRulesException';\r\n    message = 'Coś jest nie tak';\r\n\r\n    constructor(message, errorData) {\r\n        if (message) {\r\n            this.message = message;\r\n        }\r\n        if (errorData !== undefined) {\r\n            console.log('errorData:', errorData);\r\n        }\r\n        throw new Error(`[${this.displayName}]: ${this.message}`);\r\n    }\r\n}\r\n\r\nexport class RuleException {\r\n    displayName = 'RulesException';\r\n    message = 'Coś jest nie tak';\r\n\r\n    constructor(message, errorData) {\r\n        if (message) {\r\n            this.message = message;\r\n        }\r\n        if (errorData !== undefined) {\r\n            console.log('errorData:', errorData);\r\n        }\r\n        throw new Error(`[${this.displayName}]: ${this.message}`);\r\n    }\r\n}\r\n\r\n/**\r\n * Klasa definiująca interfejs odpowiedzi walidacji roli\r\n */\r\nexport class ResultRule {\r\n    rule;\r\n    success = true;\r\n    message = '';\r\n\r\n    constructor(ruleName) {\r\n        this.rule = ruleName;\r\n    }\r\n\r\n    /**\r\n     * Ustawia komunikat błędu\r\n     *\r\n     * @param {string} message\r\n     */\r\n    setError = (message) => {\r\n        this.message = message;\r\n        this.success = false;\r\n    };\r\n\r\n    getAnswer = () => {\r\n        if (this.success) {\r\n            // Log.success(this.success);\r\n            return {\r\n                success: this.success,\r\n            };\r\n        } else {\r\n            // Log.error(this.message);\r\n            return {\r\n                success: this.success,\r\n                message: this.message,\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\nexport default class ValidationRules {\r\n    displayName = 'ValidationRules';\r\n    rules = [];\r\n\r\n    /**\r\n     * Wykonuje walidację roli\r\n     *\r\n     * @description Waliduje wartość w określonym kontekście wg zdefiniowanej zasady\r\n     *\r\n     * @param {string} contextName - kontekst zasady (field, form, collection)\r\n     * @param {string} rule - nazwa zasady\r\n     * @param {string} value - wartość do sprawdzenia\r\n     * @param {Object} expected - wartość oczekiwana\r\n     * @param {Object} [contextData] - obiekt z danymi kontekstu sprawdzania\r\n     * @return {boolean} - wartość logiczna sprawdzenia\r\n     * @throws ValidatorRulesException\r\n     */\r\n    validateRule = (contextName, rule, value, expected, contextData) => {\r\n        switch (contextName) {\r\n            case 'field': {\r\n                switch (rule) {\r\n                    case 'type':\r\n                        return this._field.checkType(value, expected);\r\n                    case 'required':\r\n                        return this._field.checkRequired(value, expected);\r\n                    case 'correctness':\r\n                        return this._field.checkCorrectness(value, expected);\r\n                    default:\r\n                        throw new ValidatorRulesException(`Cannot validate rule without rule !!!`);\r\n                }\r\n            }\r\n            case 'form': {\r\n                if (contextData === undefined) {\r\n                    throw new ValidatorRulesException(`Cannot validate form rules without 'contextData' !!!`);\r\n                }\r\n                switch (rule) {\r\n                    case 'depends':\r\n                        //config znajduje się w zmiennej expected\r\n                        return this._form.checkDepends(value, expected, contextData);\r\n                    case 'test':\r\n                        break;\r\n                    default:\r\n                        throw new ValidatorRulesException(`Cannot validate rule without rule !!!`);\r\n                }\r\n                break;\r\n            }\r\n            case 'collection': {\r\n                if (contextData === undefined) {\r\n                    throw new ValidatorRulesException(`Cannot validate collection rules without 'contextData' !!!`);\r\n                }\r\n                // Log.info({\r\n                //     inputData: {\r\n                //         context: context,\r\n                //         rule: rule,\r\n                //         value: value,\r\n                //         expected: expected,\r\n                //         contextData: contextData,\r\n                //     },\r\n                // });\r\n\r\n                switch (rule) {\r\n                    case 'required':\r\n                        return this._collection.checkRequired(value, expected, contextData);\r\n                    case 'unique':\r\n                        return this._collection.checkUnique(value, expected, contextData);\r\n                    case 'requiredValue':\r\n                        return this._collection.checkRequiredValue(value, expected, contextData);\r\n                    default:\r\n                        throw new ValidatorRulesException(`Cannot validate rule without rule !!!`);\r\n                }\r\n            }\r\n            default:\r\n                throw new Error(`Undefined contextName ${contextName}`);\r\n        }\r\n    };\r\n\r\n    _field = {\r\n        /**\r\n         * Sprawdza zgodność typu wartości z wartością oczekiwaną\r\n         *\r\n         * @param value - wartość do sprawdzenia\r\n         * @param expected - wartość oczekiwana\r\n         * @return {boolean} boolean - wartość logiczna sprawdzenia\r\n         * @private\r\n         */\r\n        checkType: (value, expected) => {\r\n            let translatedType = null;\r\n            if (typeof value === 'object') {\r\n                if (Array.isArray(value)) {\r\n                    if (value[0] instanceof Date) {\r\n                        translatedType = 'date';\r\n                    } else {\r\n                        translatedType = 'collection';\r\n                    }\r\n                }\r\n            } else if (typeof value === 'string') {\r\n                translatedType = 'text';\r\n            } else if (typeof value === 'boolean') {\r\n                translatedType = 'checkbox';\r\n            } else if (value === undefined) {\r\n                translatedType = null;\r\n            } else {\r\n                translatedType = typeof value;\r\n            }\r\n            return translatedType === expected || translatedType === null;\r\n        },\r\n\r\n        /**\r\n         * Sprawdza czy wartość 'value' posiada zawartość zgodnie oczekiwaniem expected\r\n         *\r\n         * @param value - wartość do sprawdzenia\r\n         * @param expected - wartość oczekiwana\r\n         * @return {boolean} - wartość logiczna sprawdzenia\r\n         * @private\r\n         */\r\n        checkRequired: (value, expected) => {\r\n            console.log('value', value);\r\n            console.log('expected', expected);\r\n            console.log('checking Required for field result:', (value !== \"\" && value !== null) === expected || expected === undefined);\r\n            return (value !== \"\" && value !== null) === expected || expected === undefined;\r\n        },\r\n\r\n        /**\r\n         * TODO: Zaimplementować kiedy będzie potrzebne\r\n         *\r\n         * @param value\r\n         * @param expected\r\n         * @return {boolean}\r\n         */\r\n        checkCorrectness: (value, expected) => {\r\n            console.error('TODO: sprawdzanie poprawności wartości');\r\n            return typeof value === expected;\r\n        },\r\n    };\r\n\r\n    _form = {\r\n        /**\r\n         * Waliduje formularz zgodnie ze zdefiniowanymi zasadami\r\n         *\r\n         * @param value\r\n         * @param {Object} rule - zasady walidacji\r\n         * @param {Object} formData - dane całego formularza do wykorzystania przez zasady walidacji\r\n         */\r\n        checkDepends: (value, rule, formData) => {\r\n            // Log.intention([this.displayName,\r\n            //     `Mamy dane:`,\r\n            //     `value=\"${value}\"`,\r\n            //     `rule`, rule,\r\n            //     `formData`, formData,\r\n            //     `.. i co dalej?`,\r\n            //     `Zasada powinna zawierać:`,\r\n            //     `warunek - when`, rule['when'],\r\n            //     `oraz akcję do sprawdzenia na bieżącym polu - then`, rule['then'],\r\n            //     `zatem sprawdzenie będzie polegać na wykonaniu warunku`,\r\n            //     `i przy jego spełnieniu sprawdzić czy rola dla pola (this._field.check(what?)) jest valid`,\r\n            //     `...`,\r\n            //     `więc żeby uprościć proces analizy oraz`,\r\n            //     `właściwie udokumentować dowolnie skomplikowaną zasadę`,\r\n            //     `definicję - algorytm (funkcję realizującą) powinniśmy umieścić razem z konfiguracją zasady`,\r\n            //     `powinna ona być pod sprytnym skrótem rule.algorithm:`, rule.algorithm,\r\n            //     `...`,\r\n            //     `a wogóle znamy tutja this._field`, this._field,\r\n            // ]);\r\n\r\n            return rule.algorithm(value, rule, formData)(this._field);\r\n        },\r\n    };\r\n\r\n    _collection = {\r\n        /**\r\n         *\r\n         * @param value\r\n         * @param {CollectionRequiredRule} rule - obiekt zasady walidacji\r\n         * @param {Object} contextData - obiekt zawierający nazwę pola oraz dane kolekcji\r\n         * @return {Object} - obiekt rezultatu wykonania algorytmu walidacji zasady\r\n         */\r\n        checkRequired: (value, rule, contextData) => {\r\n            const algorithmResult = rule.algorithm(value, contextData);\r\n            console.log('Collection.checkRequired algorithmResult=', algorithmResult);\r\n            return algorithmResult;\r\n        },\r\n        /**\r\n         *\r\n         * @param value - wartość do sprawdzenia spłeniania zasady\r\n         * @param {CollectionUniqueRule} rule - obiekt zasady\r\n         * @param {Object} contextData - obiekt zawierający nazwę pola oraz dane kolekcji\r\n         * @return {Object} - obiekt rezultatu wykonania algorytmu walidacji zasady\r\n         */\r\n        checkUnique: (value, rule, contextData) => {\r\n            const algorithmResult = rule.algorithm(value, contextData);\r\n            console.log('Collection.checkUnique algorithmResult=', algorithmResult);\r\n            return algorithmResult;\r\n        },\r\n        /**\r\n         *\r\n         * @param value\r\n         * @param {CollectionRequiredRule} rule - obiekt zasady walidacji\r\n         * @param {Object} contextData - obiekt zawierający nazwę pola oraz dane kolekcji\r\n         * @return {Object} - obiekt rezultatu wykonania algorytmu walidacji zasady\r\n         */\r\n        checkRequiredValue: (value, rule, contextData) => {\r\n            const algorithmResult = rule.algorithm(value, contextData);\r\n            console.log('Collection.checkRequiredValue algorithmResult=', algorithmResult);\r\n            return algorithmResult;\r\n        },\r\n    };\r\n}","/**\r\n * Zasada walidacji unikalności pola formularza w kontekście kolekcji rekordów\r\n */\r\nimport {ResultRule} from \"../RulesClass\";\r\n\r\n/**\r\n * @class\r\n * @name CollectionUniqueRule\r\n * @description Klasa definiująca zasadę walidacji '*unique*' dla kontekstu '*collection*'\r\n * @tutorial collectionUniqueRule\r\n */\r\nexport default class CollectionUniqueRule {\r\n    displayName = 'CollectionUniqueRule';\r\n\r\n    /**\r\n     * #Algorytm walidacji zasady 'unique' dla kolekcji\r\n     *\r\n     * @param value - wartość do sprawdzenia\r\n     * @param contextData - Obiekt zawierający nazwę pola oraz dane kolekcji\r\n     * @return {ResultRule}\r\n     */\r\n    algorithm = (value, contextData) => {\r\n        // Log.intention([this.displayName,\r\n        //     `Mamy dane:`,\r\n        //     `fieldName = \"${contextData.fieldName}\"`,\r\n        //     `value=\"${value}\"`,\r\n        //     `typeof value=\"${typeof value}\"`,\r\n        //     `contextData`, contextData,\r\n        // ]);\r\n        const algorithmResult = new ResultRule('required');\r\n        \r\n        if (contextData.collectionData) {\r\n            for (let item of contextData.collectionData) {\r\n                if (item[contextData.fieldName] === value) {\r\n                    algorithmResult.setError(`Ta wartość nie może się powtarzać w kolekcji`);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return algorithmResult.getAnswer();\r\n    };\r\n}","/**\r\n * Zasada walidacji wymagalności pola formularza w kontekście kolekcji rekordów\r\n */\r\nimport {ResultRule} from \"../RulesClass\";\r\n\r\n/**\r\n * @class\r\n * @name CollectionUniqueRule\r\n * @description Klasa definiująca zasadę walidacji '*unique*' dla kontekstu '*collection*'\r\n * @tutorial collectionRequiredRule\r\n */\r\nexport default class CollectionRequiredRule {\r\n    displayName = 'CollectionRequiredRule';\r\n\r\n    \r\n    /**\r\n     * #Algorytm walidacji zasady 'required' dla kolekcji\r\n     *\r\n     * @param value - wartość do sprawdzenia\r\n     * @param contextData - Obiekt zawierający nazwę pola oraz dane kolekcji\r\n     * @return {ResultRule}\r\n     */\r\n    algorithm = (value, contextData) => {\r\n        // Log.intention([this.displayName,\r\n        //     `Mamy dane:`,\r\n        //     `fieldName = \"${contextData.fieldName}\"`,\r\n        //     `value=\"${value}\"`,\r\n        //     `typeof value=\"${typeof value}\"`,\r\n        //     `contextData`, contextData,\r\n        // ]);\r\n        \r\n        const algorithmResult = new ResultRule('required');\r\n        \r\n        if (!value || (Array.isArray(value) && value.length === 0) || !Array.isArray(value)) {\r\n            algorithmResult.setError('W kolekcji musi istnieć przynajmniej jeden element');\r\n        }\r\n        \r\n        // if (contextData.collectionData.length === 0) {\r\n        //     algorithmResult.setError('W kolekcji wymagany jest przynajmniej jeden element');\r\n        // }\r\n        // for (let item of contextData.collectionData) {\r\n        //     if (item[contextData.fieldName] === value) {\r\n        //         algorithmResult.setError('W kolekcji wymagany jest przynajmniej jeden element');\r\n        //         break;\r\n        //     }\r\n        // }\r\n        \r\n        return algorithmResult.getAnswer();\r\n    };\r\n}","/**\r\n * Zasada walidacji pola formularza zależnego od wartości innego pola\r\n */\r\nimport {ResultRule} from \"../RulesClass\";\r\nimport FormDependsRuleException from \"./Exceptions/FormDependsRuleException\";\r\n\r\n/**\r\n * @class\r\n * @name FormDependsRule\r\n * @description Klasa definiująca zasadę walidacji '*depends*' dla kontekstu '*form*'\r\n * @tutorial formDependsRule\r\n */\r\nexport default class FormDependsRule {\r\n    displayName = 'FormDependsRule';\r\n    when;\r\n    then;\r\n\r\n    /**\r\n     * Określa rolę zależności w kontekście formularza\r\n     *\r\n     * @param {Object} when - struktura warunku roli\r\n     * @param {Object} then - struktura akcji do wykonania dla spełnionego warunku\r\n     */\r\n    constructor(when, then) {\r\n        this.when = when;\r\n        this.then = then;\r\n    }\r\n\r\n    /**\r\n     * #Algorytm walidacji zasady 'depends' dla formularza\r\n     * Dane wejściowe:\r\n     * - when - warunek który należy sprawdzić aby wykonać akcję sprawdzania docelowego pola\r\n     * - then - walidacja docelowego pola\r\n     *  @example\r\n     *  when {\r\n     *      field: ? - nazwa pola którego wartośc należy sprawdić\r\n     *      value: ? - wartość pola które należy sprawdić\r\n     *  }\r\n     *  then = {\r\n     *      required: ? - algorytm walidacji w kontekście 'field', e.g. checkRequired\r\n     *  }\r\n     * @param value\r\n     * @param {Object} rule - zasady walidacji\r\n     * @param {Object} formData - dane całego formularza do wykorzystania przez zasady walidacji\r\n     *\r\n     * @return {Object} - zwraca wartość wyliczoną wg funkcji wykonującej prostą walidację na polu formularza\r\n     * @tutorial /assets/docs/tutorials/formDependsRule.algorithm\r\n     * Nazwa tej funkcji to translacje indeksu w this.then:\r\n     * - required - wykonuje funkcję Rules._field.checkRequired(whenResult)\r\n     *\r\n     */\r\n    algorithm = (value, rule, formData) => {\r\n        // Log.intention([this.displayName,\r\n        //     `Mamy dane:`,\r\n        //     `value=\"${value}\"`,\r\n        //     `rule`, rule,\r\n        //     `formData`, formData,\r\n        // ]);\r\n        const whenResult = formData[this.when.field] === this.when.value;\r\n        const algorithmResult = new ResultRule('depends');\r\n        console.log('whenResult', whenResult);\r\n        if (whenResult) {\r\n            return (fieldFunctions) => {\r\n                const fieldChecker = Object.keys(this.then)[0];\r\n                //TODO: fix with new helper in app\r\n                // const fieldValidationResult = fieldFunctions[`check${Helper.ucfirst(fieldChecker)}`](value, this.then[fieldChecker]);\r\n                const fieldValidationResult = `fieldChecker`;\r\n\r\n                if (!fieldValidationResult) {\r\n                    switch (fieldChecker) {\r\n                        case 'type':\r\n                            algorithmResult.setError(`To pole ma niewłaściwy typ danych`);\r\n                            break;\r\n                        case 'required':\r\n                            algorithmResult.setError(`To pole jest wymagane`);\r\n                            break;\r\n                        case 'correctness':\r\n                            algorithmResult.setError(`To pole ma nieprawidłową wartość`);\r\n                            break;\r\n                        default:\r\n                            throw new FormDependsRuleException(`Niezdefiniowany algorytm`, fieldChecker);\r\n                    }\r\n                }\r\n                return algorithmResult.getAnswer();\r\n            };\r\n        } else {\r\n            return () => {\r\n                return algorithmResult.getAnswer();\r\n            };\r\n        }\r\n    };\r\n}","/**\r\n * @property {string} name\r\n * @property {string} type - (item, collection)\r\n * @property {string} decorator\r\n */\r\nexport default class FormConfig {\r\n    /** @type {string} - nazwa formularza */\r\n    name = \"\";\r\n    /** @type {string} - typ formularza - może to być item lub collection */\r\n    type = \"\";\r\n    /** @type {Object} - konfiguracja widoku formularza */\r\n    decorator = {};\r\n    \r\n    /**\r\n     * @param {string} name\r\n     * @param {string} type\r\n     * @param {string} decorator\r\n     */\r\n    constructor(name, type, decorator) {\r\n        this.name = name;\r\n        this.type = type;\r\n        this.decorator = decorator;\r\n    }\r\n    \r\n}","/**\r\n * Klasa Konfiguracji kontekstu konta bankowego\r\n *\r\n * @implements FormConfigInterface\r\n *\r\n * @fileOverview Klasa Konfiguracji kontekstu konta bankowego\r\n */\r\nimport FormConfigInterface from \"./FormConfigInterface\";\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport CollectionValidationConfig from \"./Element/Validation/CollectionValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport CollectionUniqueRule from \"../../Strategy/Validator/Strategy/Rules/CollectionUniqueRule\";\r\nimport FormConfig from \"./Element/FormConfig\";\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu konta bankowego\r\n * @description bankAccount - powinien określać:\r\n * - *apiConfig*  - ustawienia Api backendowego\r\n * - *fields*     - konfigurację pól\r\n * - *item*       - ustawienia pojedynczego bankAccount\r\n * - *collection* - ustawienia kolekcji bankAccounts\r\n * - *validation* - reguły walidacji w kontekstach:\r\n *      1° **[fieldContext]** (fields rules):\r\n *          *required for offline validation*\r\n *          • **required** - czy jest niepuste\r\n *          • **type consistency** - czy zgadza się typ wartości\r\n *          • **value correctness** - czy wartość jest poprawna\r\n *      2° **[itemContext]** (how field depend on other fields in record)\r\n *          *required for offline validation*\r\n *          • np. isPartnership determinuje czy partnership jest required\r\n *      3° **[collectionContext]** (how fields depend on other items fields)\r\n *          *required for any validation*\r\n *          •\r\n *\r\n *\r\n * @implements FormConfigInterface\r\n *\r\n */\r\nexport default class BankAccountConfig extends FormConfigInterface {\r\n    type = 'entity';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'bank_accounts',\r\n    );\r\n    \r\n    fields = {\r\n        id:              new FieldConfig('hidden', 'id', 'ID', null),\r\n        bankAccountName: new FieldConfig('text', 'bankAccountName', 'Nazwa konta bankowego', ''),\r\n        accountNumber:   new FieldConfig('text', 'accountNumber', 'Numer konta', ''),\r\n        bankName:        new FieldConfig('text', 'bankName', 'Nazwa banku', ''),\r\n        isDefault:       new FieldConfig('checkbox', 'isDefault', 'Konto domyślne', false),\r\n    };\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'bankAccount',\r\n        'Konto bankowe',\r\n        'BankAccount',\r\n        {\r\n            type:           'radio',\r\n            defaultChecked: 'isDefault',\r\n            data:           {\r\n                header: \"bankAccountName\",\r\n                title:  \"accountNumber\",\r\n                footer: null,\r\n            },\r\n            emptyValue:     {\r\n                title: \"Zaznacz domyślne\",\r\n            },\r\n            actions:        {\r\n                left:  {\r\n                    delete: {\r\n                        color:  'red',\r\n                        label:  'Usuń',\r\n                        icon:   'fad fa-trash',\r\n                        action: 'bankAccount',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color:  'orange',\r\n                        label:  'Edytuj',\r\n                        icon:   'fad fa-pencil',\r\n                        action: 'bankAccount',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    collection = new CollectionConfig(\r\n        'bankAccounts',\r\n        'Konta bankowe',\r\n        [],\r\n        'bankAccount',\r\n        {\r\n            title:   {\r\n                new:  'Nowe konto bankowe',\r\n                edit: 'Edycja konta bankowego',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color:  'green',\r\n                    label:  'Dodaj',\r\n                    icon:   'fal fa-plus',\r\n                    action: '/form/bankAccount/',\r\n                },\r\n            },\r\n        },\r\n        'company',\r\n    );\r\n    \r\n    form = new FormConfig(\r\n        'bankAccount',\r\n        'sheet',\r\n    );\r\n    \r\n    /**\r\n     * Konfiguracja walidacji\r\n     * @type {ValidationConfig}\r\n     */\r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id:              new FieldRules('number'),\r\n            bankAccountName: new FieldRules('text', true),\r\n            accountNumber:   new FieldRules('text', true),\r\n            bankName:        new FieldRules('text', true),\r\n            isDefault:       new FieldRules('checkbox'),\r\n        }),\r\n        new CollectionValidationConfig({\r\n            bankAccountName: new CollectionUniqueRule(),\r\n            accountNumber:   new CollectionUniqueRule(),\r\n            // isDefault:       new CollectionRequiredValueRule(true), \r\n            // - should be validated when company form is submitted\r\n        }),\r\n    );\r\n    \r\n    data = null;\r\n}","import FormConfigInterface from \"./FormConfigInterface\";\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport FormConfig from \"./Element/FormConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport FormValidationConfig from \"./Element/Validation/FormValidationConfig\";\r\nimport FormDependsRule from \"../../Strategy/Validator/Strategy/Rules/FormDependsRule\";\r\nimport CollectionValidationConfig from \"./Element/Validation/CollectionValidationConfig\";\r\nimport CollectionUniqueRule from \"../../Strategy/Validator/Strategy/Rules/CollectionUniqueRule\";\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu kontrahenta\r\n *\r\n * @implements FormConfigInterface\r\n * \r\n */\r\nexport default class ContractorConfig extends FormConfigInterface {\r\n    type = 'entity';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'contractors',\r\n    );\r\n    \r\n    fields = {\r\n        id:            new FieldConfig('hidden', 'id', 'ID', null),\r\n        shortcut:      new FieldConfig('text', 'shortcut', 'Nazwa firmy', ''),\r\n        companyName:   new FieldConfig('text', 'companyName', 'Nazwa firmy', ''),\r\n        isPartnership: new FieldConfig('toggle', 'isPartnership', 'Spółka', false, {\r\n            simple: true,\r\n            event:  {\r\n                afterChange: 'isPartnershipChanged',\r\n            },\r\n        }),\r\n        partnership:   new FieldConfig('selectToggle', 'partnership', 'Rodzaj spółki', '', {\r\n            options:   [\r\n                {value: '', text: ''},\r\n                {value: 'sa', text: 'S.A.'},\r\n                {value: 'zoo', text: 'Sp. z o.o.'},\r\n            ],\r\n            toggledBy: {\r\n                field: 'isPartnership',\r\n                when:  {\r\n                    disabled: false,\r\n                },\r\n            },\r\n        }),\r\n        street:        new FieldConfig('text', 'street', 'Ulica', ''),\r\n        house:         new FieldConfig('text', 'house', 'Nr domu', ''),\r\n        appartment:    new FieldConfig('text', 'appartment', 'Nr lokalu', ''),\r\n        postalCode:    new FieldConfig('text', 'postalCode', 'Kod pocztowy', ''),\r\n        city:          new FieldConfig('text', 'city', 'Miejscowość', ''),\r\n        nip:           new FieldConfig('text', 'nip', 'NIP', ''),\r\n        regon:         new FieldConfig('text', 'regon', 'REGON', ''),\r\n    };\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'contractor',\r\n        'Kontrahent',\r\n        'ContractorAccount',\r\n        {\r\n            type:       'simple',\r\n            data:       {\r\n                header: \"nip\",\r\n                title:  \"companyName\",\r\n                // footer: (item) => Helper.parseAddress(item),\r\n            },\r\n            emptyValue: {\r\n                title: \"Wybierz nabywcę\",\r\n            },\r\n            actions:    {\r\n                left:  {\r\n                    delete: {\r\n                        color:  'red',\r\n                        label:  'Usuń',\r\n                        icon:   'fad fa-trash',\r\n                        action: 'contractor',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color:  'orange',\r\n                        label:  'Edytuj',\r\n                        icon:   'fad fa-pencil',\r\n                        action: 'contractor',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    /** @type {CollectionConfig} - konfiguracja kolekcji  */\r\n    collection = new CollectionConfig(\r\n        'contractors',\r\n        'Kontrahenci',\r\n        [],\r\n        'contractor',\r\n        {\r\n            title:   {\r\n                new:  'Nowy kontrahent',\r\n                edit: 'Edycja kontrahenta',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color:  'green',\r\n                    label:  'Dodaj',\r\n                    icon:   'fal fa-plus',\r\n                    action: '/form/contractor/',\r\n                },\r\n            },\r\n        },\r\n        'company',\r\n    );\r\n    \r\n    form = new FormConfig(\r\n        'contractor',\r\n        'item',\r\n        'popup',\r\n    );\r\n    \r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id:            new FieldRules('number'),\r\n            shortcut:      new FieldRules('text'),\r\n            companyName:   new FieldRules('text', true),\r\n            isPartnership: new FieldRules('checkbox'),\r\n            partnership:   new FieldRules('text'),\r\n            street:        new FieldRules('text', true),\r\n            house:         new FieldRules('text', true),\r\n            appartment:    new FieldRules('text'),\r\n            postalCode:    new FieldRules('text', true),\r\n            city:          new FieldRules('text', true),\r\n            nip:           new FieldRules('text', true),\r\n            regon:         new FieldRules('text'),\r\n        }),\r\n        new FormValidationConfig({\r\n            partnership: new FormDependsRule(\r\n                {field: 'isPartnership', value: true},\r\n                {required: true},\r\n            ),\r\n        }),\r\n        new CollectionValidationConfig({\r\n            companyName: new CollectionUniqueRule(),\r\n            nip:         new CollectionUniqueRule(),\r\n        }),\r\n    );\r\n    \r\n    data = {};\r\n}","import FormConfigInterface from \"./FormConfigInterface\";\r\n\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport CollectionValidationConfig from \"./Element/Validation/CollectionValidationConfig\";\r\nimport FormValidationConfig from \"./Element/Validation/FormValidationConfig\";\r\n\r\nimport CollectionUniqueRule from \"../../Strategy/Validator/Strategy/Rules/CollectionUniqueRule\";\r\nimport CollectionRequiredRule from \"../../Strategy/Validator/Strategy/Rules/CollectionRequiredRule\";\r\nimport FormDependsRule from \"../../Strategy/Validator/Strategy/Rules/FormDependsRule\";\r\n\r\nimport FormConfig from \"./Element/FormConfig\";\r\nimport BankAccountConfig from \"./BankAccountConfig\";\r\nimport ContractorConfig from \"./ContractorConfig\";\r\nimport Helper from \"../../../Plugin/Helpers/Helper\";\r\n\r\n\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu firmy\r\n *\r\n * @implements FormConfigInterface\r\n */\r\nexport default class CompanyConfig extends FormConfigInterface {\r\n    type = 'entity';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'companies',\r\n    );\r\n    \r\n    fields = {\r\n        id:            new FieldConfig('hidden', 'id', 'ID', null),\r\n        companyName:   new FieldConfig('text', 'companyName', 'Nazwa firmy', ''),\r\n        isPartnership: new FieldConfig('toggle', 'isPartnership', 'Spółka', false, {\r\n            simple: true,\r\n            event:  {\r\n                afterChange: 'isPartnershipChanged',\r\n            },\r\n        }),\r\n        partnership:   new FieldConfig('selectToggle', 'partnership', 'Rodzaj spółki', '', {\r\n            options:   [\r\n                {value: '', text: ''},\r\n                {value: 'sa', text: 'S.A.'},\r\n                {value: 'zoo', text: 'Sp. z o.o.'},\r\n            ],\r\n            toggledBy: {\r\n                field: 'isPartnership',\r\n                when:  {\r\n                    disabled: false,\r\n                },\r\n            },\r\n        }),\r\n        street:        new FieldConfig('text', 'street', 'Ulica', ''),\r\n        house:         new FieldConfig('text', 'house', 'Nr domu', ''),\r\n        appartment:    new FieldConfig('text', 'appartment', 'Nr lokalu', ''),\r\n        postalCode:    new FieldConfig('text', 'postalCode', 'Kod pocztowy', ''),\r\n        city:          new FieldConfig('text', 'city', 'Miejscowość', ''),\r\n        nip:           new FieldConfig('text', 'nip', 'NIP', ''),\r\n        regon:         new FieldConfig('text', 'regon', 'REGON', ''),\r\n        foundingDate:  new FieldConfig('datepicker', 'foundingDate', 'Data założenia', null),\r\n        bankAccounts:  new BankAccountConfig(),\r\n        contractors:   new ContractorConfig(),\r\n    };\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'company',\r\n        'Firma',\r\n        'Company',\r\n        {\r\n            type:       \"radio\",\r\n            data:       {\r\n                header:   \"\",\r\n                title:    (item) => Helper.fullName(item),\r\n                after:    \"nip\",\r\n                subtitle: \"\", // only for mediaList\r\n                text:     (item) => Helper.parseAddress(item), // only for mediaList\r\n                footer:   \"\",\r\n            },\r\n            emptyValue: {\r\n                title: \"Wybierz firmę\",\r\n            },\r\n            actions:    {\r\n                left:  {\r\n                    delete: {\r\n                        color:  'red',\r\n                        label:  'Usuń',\r\n                        icon:   'fad fa-trash',\r\n                        action: 'company',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color:  'orange',\r\n                        label:  'Edytuj',\r\n                        icon:   'fad fa-pencil',\r\n                        action: 'company',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        'companyChange',\r\n    );\r\n    \r\n    /** @type {CollectionConfig} - konfiguracja kolekcji  */\r\n    collection = new CollectionConfig(\r\n        'companies',\r\n        'Firmy',\r\n        [],\r\n        'company',\r\n        {\r\n            title:   {\r\n                new:  'Nowa firma',\r\n                edit: 'Edycja firmy',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color:  'green',\r\n                    label:  'Dodaj',\r\n                    icon:   'fal fa-plus',\r\n                    action: '/form/company/',\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    form = new FormConfig(\r\n        'company',\r\n        'item',\r\n        'popup',\r\n    );\r\n    \r\n    /**\r\n     * Konfiguracja walidacji\r\n     * @description\r\n     * ##Powinny być trzy konteksty walidacji:\r\n     * 1. ###fieldsConfig\r\n     *      Konfiguracja walidacji pól formularza\r\n     * 2. ###formConfig\r\n     *      Konfiguracja walidacji formularza\r\n     * 3. ###collectionConfig\r\n     *      Konfiguracja walidacji kolekcji\r\n     * @type {ValidationConfig}\r\n     */\r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id:            new FieldRules('number'),\r\n            owner:         false,\r\n            companyName:   new FieldRules('text', true),\r\n            isPartnership: new FieldRules('checkbox'),\r\n            partnership:   new FieldRules('text'),\r\n            street:        new FieldRules('text', true),\r\n            house:         new FieldRules('text', true),\r\n            appartment:    new FieldRules('text'),\r\n            postalCode:    new FieldRules('text', true),\r\n            city:          new FieldRules('text', true),\r\n            nip:           new FieldRules('text', true),\r\n            regon:         new FieldRules('text'),\r\n            foundingDate:  new FieldRules('date', true),\r\n            bankAccounts:  new FieldRules('collection', true),\r\n            contractors:   new FieldRules('collection'),\r\n        }),\r\n        new FormValidationConfig({\r\n            partnership: new FormDependsRule(\r\n                {field: 'isPartnership', value: true},\r\n                {required: true},\r\n            ),\r\n        }),\r\n        new CollectionValidationConfig({\r\n            companyName:  new CollectionUniqueRule(),\r\n            nip:          new CollectionUniqueRule(),\r\n            bankAccounts: new CollectionRequiredRule(),\r\n        }),\r\n    );\r\n    \r\n    data = {\r\n        collections: {\r\n            company: [\r\n                'contractors',\r\n                'bankAccounts',\r\n                'economicEvents',\r\n            ],\r\n        },\r\n    };\r\n}","import React from \"react\";\r\nimport {Icon, Link, List, ListGroup, ListItem, Navbar, Page, Panel, View} from \"framework7-react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport Helper from \"../../Plugin/Helpers/Helper\";\r\nimport CompanyConfig from \"../../Patterns/Facade/FormConfig/CompanyConfig\";\r\n\r\nexport default class PanelRight extends React.Component {\r\n    displayName = 'PanelRight';\r\n    static propTypes = {\r\n        display: PropTypes.func,\r\n        data: PropTypes.object,\r\n        state: PropTypes.object,\r\n        config: PropTypes.object,\r\n        app: PropTypes.object,\r\n        widgetFactory: PropTypes.object,\r\n    };\r\n\r\n    display = this.props.display(this.displayName);\r\n\r\n    render() {\r\n        this.display = this.props.display(this.displayName);\r\n        console.log('this.props', this.props);\r\n        // eslint-disable-next-line no-unused-vars\r\n        let companySelected = null;\r\n        if (this.props.data.current.company) {\r\n            companySelected = {\r\n                field: 'companyName',\r\n                value: this.props.data.current.company && this.props.data.current.company.id,\r\n                // index: this.props.app.methods.getIndexOfElementArrayById(this.props.data.current.company.id, this.props.data.collection.company),\r\n                index: Helper.getIndexOfElementArrayById(this.props.data.current.company.id, this.props.data.collection.company),\r\n            };\r\n            // console.log('companySelected', companySelected);\r\n        }\r\n\r\n\r\n        const CompanyCollectionWidget = this.props.app.widget\r\n            .SwipeableCollection('accordion')\r\n            .withConfig(new CompanyConfig())\r\n            .withEvents(this.props.app.event)\r\n            .withHandlers(this.props.app.handle)\r\n            .buildWidget()\r\n        ;\r\n\r\n        // console.log('this.props.handle', this.props.handle);\r\n        return (\r\n            <React.Fragment>\r\n                <Panel right cover themeLight>\r\n                    <View>\r\n                        <Page>\r\n                            <Navbar title=\"Operations\" subtitle=\"Useful actions or nothing\">\r\n                                {!this.props.state.online &&\r\n                                <Link slot=\"nav-right\" color={this.props.app.online ? 'black' : 'red'}>\r\n                                    <Icon icon={`fad fa-wifi${this.props.app.online ? '' : '-slash'}`}/>\r\n                                </Link>}\r\n                            </Navbar>\r\n                            <List>\r\n                                <ListGroup>\r\n                                    {this.props.display('buttonCompany') && (\r\n                                        <CompanyCollectionWidget item field=\"company\" data={{\r\n                                            items: this.props.app.api.resource.data.collection.company,\r\n                                            current: this.props.app.api.resource.data.current,\r\n                                        }}/>\r\n                                    )}\r\n\r\n\r\n                                    {this.props.display('buttonLogout') &&\r\n                                    <React.Fraqgment>\r\n                                        <ListItem divider title=\"Divider Here\"/>\r\n                                        <ListItem link=\"#\" title=\"Wyloguj\" onClick={this.props.app.event.logout}>\r\n                                            <Icon slot=\"media\" icon=\"fad fa-sign-out\"/>\r\n                                        </ListItem>\r\n                                    </React.Fraqgment>\r\n                                    }\r\n                                </ListGroup>\r\n                            </List>\r\n                        </Page>\r\n                    </View>\r\n                </Panel>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}","import React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport {\n    BlockFooter,\n    Card,\n    List,\n    ListButton,\n    ListInput,\n    ListItem,\n    LoginScreen,\n    LoginScreenTitle,\n    Page,\n} from \"framework7-react\";\n// import {AppReactContext} from \"../../Context/Contexts\";\n\nexport default class LoginScreenModal extends React.Component {\n    displayName = this.__proto__.constructor.name;\n    static propTypes = {\n        app: PropTypes.func,\n        api: PropTypes.object,\n        errorMessage: PropTypes.string,\n    };\n    static contextType = React.createContext(this.$f7);\n    event = {\n        _request: (url, data, dataType) => {\n            return this.app.request.promise.postJSON(url, data, dataType).then(response => {\n                console.log('response', response);\n            }).catch(xhrError => {\n                console.log('_request.xhrError', xhrError);\n                console.log('_request.xhrError.response', xhrError.response);\n            })\n        },\n        loadingDone: async () => {\n            await this.app.dialog.close();\n        },\n        close: () => {\n\n            this.setState({\n                error: null,\n            });\n            this.$f7.loginScreen.close();\n        },\n        login: () => {\n            this.app.logger.startProcess('Logowanie...');\n            this.app.dialog.preloader('Loading...');\n\n            return this.app.request.promise.postJSON('https://localhost:8000/api/login', {\n                email: this.state.email,\n                password: this.state.password,\n            },'json').then(response => {\n                console.log('response',response);\n\n                // const headers = response.xhr.getAllResponseHeaders();\n                // const arrHeaders = headers.trim().split(/[\\r\\n]+/);\n\n                const locationHeader = response.xhr.getResponseHeader('location');\n\n                this.app.logger.info({locationHeader:locationHeader});\n                // this.app.logger.log(arrHeaders);\n                let result;\n                if (response) {\n                    if (response.data) {\n                        this.app.api.resource.fillData(response.data).then(async dbData => {\n                            console.log('this.app.api.resource.data',this.app.api.resource.data);\n                            // await this.setState(this.state);\n                            await this.$f7.views.main.router.back({reloadPrevious: true, ignoreCache: true });\n                            await this.$f7.loginScreen.close();\n                        });\n                    }\n                    if (locationHeader) {\n                        result = response.data;\n                    }\n                } else {\n                    this.setState({\n                        error: {\n                            type: 'Internal Error',\n                            message: `Wstąpił problem z przetworzeniem zapytania`,\n                        },\n                    });\n                    result = 'Zły response';\n                }\n                return result;\n            }).catch(xhrError => {\n                if (xhrError.status >= 400 && xhrError.status < 500) {\n                    const response = xhrError.xhr.response;\n                    console.log('xhrError', xhrError);\n                    console.log('response', response);\n                    console.log('_request.xhrError.response', JSON.parse(response));\n                } else {\n                    this.app.logger.error(xhrError);\n                }\n                console.log('_request.xhrError', xhrError);\n                console.log('_request.xhrError.response', xhrError.response);\n                return xhrError.xhr;\n            }).catch(error => {\n                console.log('error', error);\n                if (error.message) {\n                    this.setState({\n                        error: {\n                            type: error.name,\n                            message: error.message,\n                        },\n                    });\n                    this.app.logger.error(error);\n                } else {\n                    new Error(error);\n                }\n                return new Error(error);\n            }).finally(resultAfterAll => {\n                console.log('resultAfterAll', resultAfterAll);\n                this.app.logger.endProcess();\n                this.app.dialog.close();\n            });\n            //*/\n        },\n    };\n    buttons = {\n        'signIn': {\n            fill: true,\n            bgColor: 'green',\n            title: 'Zaloguj',\n        },\n        'close': {\n            fill: true,\n            bgColor: 'orange',\n            title: 'Zamknij',\n        },\n    };\n\n    constructor(props, context) {\n        super(props);\n        this.app = this.$f7;\n\n        this.state = {\n            email: '',\n            password: '',\n            error: null,\n            isLoading: false,\n        };\n\n        if (this.state.error) {\n            this.$f7.toast.create({\n                text: this.state.error,\n                position: 'top',\n                closeButton: true,\n            }).open();\n        }\n    }\n\n    render() {\n        // this.app.logger.info({\n        //     this: this,\n        // });\n\n        return (\n            <LoginScreen className=\"main-login-screen\" back>\n                <Page name=\"login\" noToolbar noNavbar noSwipeback loginScreen>\n                    <LoginScreenTitle>Logowanie</LoginScreenTitle>\n                    <List form>\n                        {this.state.error && (\n                            <ListItem>\n                                <Card className=\"width-100 bg-color-red\"\n                                      title={this.state.error.type}\n                                      content={this.state.error.message}/>\n                            </ListItem>\n                        )}\n                        <ListInput\n                            label=\"Email\"\n                            type=\"text\"\n                            placeholder=\"Your email\"\n                            value={this.state.email}\n                            onInput={(e) => {\n                                this.setState({email: e.target.value});\n                            }}\n                        />\n                        <ListInput\n                            label=\"Password\"\n                            type=\"password\"\n                            placeholder=\"Your password\"\n                            value={this.state.password}\n                            onInput={(e) => {\n                                this.setState({password: e.target.value});\n                            }}\n                        />\n                    </List>\n                    <List>\n                        <ListButton {...this.buttons['signIn']} onClick={this.event.login}/>\n                        <ListButton {...this.buttons['close']} onClick={this.event.close}/>\n                        <BlockFooter>\n                            Aby korzystać z aplikacji musisz się zalogować<br/>\n                            Po poprawnym zalogowaniu będzie możliwa instalacja aplikacji w twoim urządzeniu\n                        </BlockFooter>\n                    </List>\n                </Page>\n            </LoginScreen>\n        )\n    }\n}","import React from \"react\";\r\nimport {Block, BlockHeader, BlockTitle, Icon, List, ListItem} from \"framework7-react\";\r\nimport LoginScreenModal from \"../../Pages/Component/LoginScreenModal\";\r\n\r\nexport default class Invitation extends React.Component {\r\n    displayName = this.__proto__.constructor.name;\r\n    // static contextType = AppReactContext;\r\n    event = {};\r\n\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.app = this.$f7;\r\n    }\r\n\r\n    /*\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n        this._isMounted && self.addEventListener(\"online\", () => {\r\n            this.setState({\r\n                online: true,\r\n            })\r\n        });\r\n        this._isMounted && self.addEventListener(\"offline\", () => {\r\n            this.setState({\r\n                online: false,\r\n            })\r\n        });\r\n    }\r\n    \r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n    \r\n    componentDidUpdate() {\r\n        if (this.api.resource.db) {\r\n            this.api.resource.getConfig('owner').then(owner => {\r\n                if (this._isMounted) {\r\n                    // logger.groupInfo(this.displayName, 'componentDidUpdate', {\r\n                    //     owner: owner,\r\n                    // });\r\n                    if (!this.state.owner && owner || this.state.owner && !owner) {\r\n                        this.setState(prevState => {\r\n                            const newState = {...prevState};\r\n                            newState.owner = owner;\r\n                            logger.setState(newState, this.displayName, 'componentDidUpdate');\r\n                            return newState;\r\n                        });\r\n                    }\r\n                }\r\n            }).then(success => {\r\n                console.log('Invitation update success');\r\n            });\r\n        }\r\n    }\r\n    //*/\r\n\r\n    render() {\r\n        // logger.groupInfo(this.displayName, 'render', {\r\n        //     'this.state':       this.state,\r\n        //     'this.props.state': this.props.state,\r\n        // });\r\n        return (\r\n            <Block noHairlines>\r\n                <BlockHeader>\r\n                    <BlockTitle medium>Strona startowa</BlockTitle>\r\n                    <p>Welcome to Anatholius GitHub Page.</p>\r\n                    <p>Here is a list of projects that you can read more closely by reading the descriptions,\r\n                        as well as look at their codes</p>\r\n                </BlockHeader>\r\n\r\n                <List mediaList className=\"media-center\">\r\n                    <ListItem chevronCenter title=\"Problem Resolver Project\"\r\n                              subtitle=\"Application project supporting problem solving\"\r\n                              text=\"available without logging in\"\r\n                              link=\"/problem-resolver/\" noLinkClass\r\n                    >\r\n                        <Icon slot=\"media\" icon=\"fad fa-project-diagram fa-2x\"/>\r\n                    </ListItem>\r\n                    <ListItem chevronCenter title=\"KPiR Project\" disabled={true}\r\n                              subtitle=\"The page with projects descriptions\"\r\n                              text=\"available after logging in\"\r\n                              link=\"/kpir/\" noLinkClass\r\n                    >\r\n                        <Icon slot=\"media\" icon=\"fad fa-file-invoice-dollar fa-3x\"/>\r\n                    </ListItem>\r\n                    <ListItem chevronCenter title=\"Sandbox\" //disabled={true}\r\n                              subtitle=\"The page with projects descriptions\"\r\n                              text=\"available after logging in\"\r\n                              link=\"/sandbox/\" noLinkClass\r\n                    >\r\n                        <Icon slot=\"media\" icon=\"fad fa-presentation fa-2x\"/>\r\n                    </ListItem>\r\n                </List>\r\n                <LoginScreenModal/>\r\n            </Block>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport {Icon, Link, Navbar, NavLeft, NavRight} from \"framework7-react\";\r\n\r\n/**\r\n * This Shell Navbar\r\n */\r\nexport default class ShellNavbar extends React.Component {\r\n    displayName = this.__proto__.constructor.name;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.app = this.$f7;\r\n    }\r\n\r\n    render() {\r\n        console.log(this.displayName, this.app);\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Navbar title=\"Anatholius GitHub Page\" subtitle=\"Website for the presentation of my projects on GitHub\">\r\n                    <NavLeft slot=\"nav-left\">\r\n                        {this.app.displayable('panelLeft') && <Link color=\"black\" panelOpen=\"left\">\r\n                            <Icon icon=\"fad fa-arrow-alt-from-left\"/>\r\n                        </Link>}\r\n                    </NavLeft>\r\n\r\n                    <NavRight slot=\"nav-right\">\r\n\r\n                        {this.app.displayable('buttonInstall') &&\r\n                        <Link color=\"black\" onClick={this.app.event.installApp}>\r\n                            <Icon classname=\"no-link icon-only\" icon={`fad fa-phone-laptop`}/>\r\n                        </Link>}\r\n\r\n                        {!this.app.online && <Link color=\"black\">\r\n                            <Icon classname=\"no-link icon-only\"\r\n                                  icon={`fad fa-wifi${this.app.online ? '' : '-slash'}`}/>\r\n                        </Link>}\r\n\r\n                        {!this.app.displayable('panelRight') &&\r\n                        <Link color=\"black\" icon=\"fad fa-arrow-to-left\" panelOpen=\"right\"/>}\r\n                    </NavRight>\r\n                </Navbar>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nimport {BlockHeader, BlockTitle, Page, PageContent} from 'framework7-react';\r\nimport PanelLeft from \"../Components/Shell/PanelLeft\";\r\nimport PanelRight from \"../Components/Shell/PanelRight\";\r\nimport Invitation from \"../Components/Shell/Invitation\";\r\nimport ShellNavbar from \"../Components/Shell/ShellNavbar\";\r\nimport CompanyConfig from \"../Patterns/Facade/FormConfig/CompanyConfig\";\r\n\r\nexport default class HomePage extends React.Component {\r\n    displayName = this.__proto__.constructor.name;\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n\r\n        const {$f7} = this;\r\n        this.app = $f7;\r\n\r\n        this.state = {};\r\n        console.log(`${this.displayName} is constructing`);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        //     console.log(`${this.displayName} is mounting`);\r\n        this.app.logger.startProcess('init IndexedDB data');\r\n        this.app.api.init().then(() => {\r\n            // this.context.data = this.app.api.resource.data;\r\n            this.setState(this.state)\r\n        });\r\n        this.app.logger.endProcess();\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        const ProjectsCollectionWidget = this.app.widget\r\n            .SwipeableCollection('card')\r\n            .withConfig(new CompanyConfig())\r\n            .withEvents(this.app.event)\r\n            .withHandlers(this.app.handle)\r\n            .buildWidget()\r\n        ;\r\n        return <Page>\r\n            <ShellNavbar data={this.context.data} state={this.state} app={this.app}/>\r\n\r\n\r\n            {this.app.displayable('panelLeft') && (\r\n                <PanelLeft/>\r\n            )}\r\n\r\n            {this.app.displayable('resourceData') && (\r\n                <PanelRight display={this.app.displayable} data={this.app.api.resource.data} state={this.state}\r\n                            config={this.context.config}\r\n                            app={this.app}\r\n                />\r\n            )}\r\n\r\n            {!this.app.displayable('user') ? (\r\n                <Invitation event={this.event} state={this.state}/>\r\n            ) : (\r\n                <PageContent>\r\n                    <BlockHeader>\r\n                        <BlockTitle medium>\r\n                            Witaj{this.app.displayable('user') ? ' ' + this.app.api.resource.data.config.user['firstName'] : ''}\r\n                        </BlockTitle>\r\n                    </BlockHeader>\r\n\r\n                    {!this.app.displayable('company') && this.app.displayable('companyCollection') && (\r\n                        <ProjectsCollectionWidget mediaList field=\"company\" data={{\r\n                            items: this.app.api.resource.data.collection.company,\r\n                            current: this.app.api.resource.data.current,\r\n                        }}/>\r\n                    )}\r\n\r\n                </PageContent>\r\n            )}\r\n\r\n        </Page>;\r\n    }\r\n}\r\nHomePage.contextType = React.createContext({});\r\n","import FormConfigInterface from \"./FormConfigInterface\";\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport FormConfig from \"./Element/FormConfig\";\r\n\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu właściciela\r\n *\r\n * @implements FormConfigInterface\r\n *\r\n */\r\nexport default class OwnerConfig extends FormConfigInterface {\r\n    type = 'entity';\r\n    \r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'users',\r\n    );\r\n    \r\n    fields;\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'owner',\r\n        'Właściciel',\r\n        'User',\r\n    );\r\n    \r\n    collection;\r\n    \r\n    form = new FormConfig(\r\n        'owner',\r\n        'item',\r\n        'popup',\r\n    );\r\n    \r\n    validation;\r\n    \r\n    data = null;\r\n}","import FormConfigInterface from \"./FormConfigInterface\";\r\n\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport FormConfig from \"./Element/FormConfig\";\r\nimport FormValidationConfig from \"./Element/Validation/FormValidationConfig\";\r\nimport FormDependsRule from \"../../Strategy/Validator/Strategy/Rules/FormDependsRule\";\r\nimport CollectionValidationConfig from \"./Element/Validation/CollectionValidationConfig\";\r\nimport CollectionUniqueRule from \"../../Strategy/Validator/Strategy/Rules/CollectionUniqueRule\";\r\nimport CollectionRequiredRule from \"../../Strategy/Validator/Strategy/Rules/CollectionRequiredRule\";\r\n\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu pozycji na fakturze\r\n *\r\n * @implements FormConfigInterface\r\n *\r\n */\r\nexport default class InvoiceItemConfig extends FormConfigInterface {\r\n    type = 'collection';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'invoice_items',\r\n    );\r\n    \r\n    fields = {\r\n        id:                new FieldConfig('hidden', 'id', 'ID', null),\r\n        economicEvent:     new FieldConfig('selectCollection', 'economicEvent', 'Zdarzenie gospodarcze', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection:            {\r\n                name:       'economicEvents',\r\n                labelField: 'description',\r\n            },\r\n            buttons:               {\r\n                right: {\r\n                    add:  {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color:       'green',\r\n                        label:       'Dodaj',\r\n                        icon:        'fal fa-plus',\r\n                        href:        '/form/economicEvent/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color:       'orange',\r\n                        label:       'Edytuj',\r\n                        icon:        'fad fa-pencil',\r\n                        href:        '/form/economicEvent/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n        economicOperation: new FieldConfig('selectCollection', 'economicOperation', 'Operacja gospodarcza', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection:            {\r\n                name:       'economicOperations',\r\n                labelField: 'description',\r\n            },\r\n            buttons:               {\r\n                right: {\r\n                    add:  {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color:       'green',\r\n                        label:       'Dodaj',\r\n                        icon:        'fal fa-plus',\r\n                        href:        '/form/economicOperation/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color:       'orange',\r\n                        label:       'Edytuj',\r\n                        icon:        'fad fa-pencil',\r\n                        href:        '/form/economicOperation/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n        pos:               new FieldConfig('text', 'pos', 'Nr pozycji', ''),\r\n        title:             new FieldConfig('text', 'title', 'Tytuł operacji', ''),\r\n        legalBasis:        new FieldConfig('text', 'legalBasis', 'Podstawa prawna', ''),\r\n        unit:              new FieldConfig('text', 'unit', 'Jednostka', ''),\r\n        unitCount:         new FieldConfig('text', 'unitCount', 'Ilość', ''),\r\n        unitPrice:         new FieldConfig('text', 'unitPrice', 'Cena jednostkowa', ''),\r\n        price:             new FieldConfig('text', 'price', 'Wartość', ''),\r\n    };\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'invoiceItem',\r\n        'Pozycja na fakturze',\r\n        'InvoiceItem',\r\n        {\r\n            type:       'simple',\r\n            data:       {\r\n                header: null,\r\n                title:  'economicOperation',\r\n                footer: 'price',\r\n            },\r\n            emptyValue: {\r\n                title: \"Wybierz pozycję na fakturze\",\r\n            },\r\n            actions:    {\r\n                left:  {\r\n                    delete: {\r\n                        color:  'red',\r\n                        label:  'Usuń',\r\n                        icon:   'fad fa-trash',\r\n                        action: 'invoiceItem',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color:  'orange',\r\n                        label:  'Edytuj',\r\n                        icon:   'fad fa-pencil',\r\n                        action: 'invoiceItem',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    collection = new CollectionConfig(\r\n        'invoiceItems',\r\n        'Pozycje na fakturze',\r\n        [],\r\n        'invoiceItem',\r\n        {\r\n            type:    'card',\r\n            title:   {\r\n                new:  'Nowa pozycja na fakturze',\r\n                edit: 'Edycja pozycji na fakturze',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color:  'green',\r\n                    label:  'Dodaj',\r\n                    icon:   'fal fa-plus',\r\n                    action: '/form/invoiceItem/',\r\n                },\r\n            },\r\n        },\r\n        'invoice',\r\n    );\r\n    \r\n    form = new FormConfig(\r\n        'invoiceItem',\r\n        'collection',\r\n        'sheet',\r\n    );\r\n    \r\n    /**\r\n     * Konfiguracja walidacji\r\n     * @type {ValidationConfig}\r\n     */\r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id:                new FieldRules('number'),\r\n            economicEvent:     new FieldRules('text', true),\r\n            economicOperation: new FieldRules('text', true),\r\n            title:             new FieldRules('text'),\r\n            legalBasis:        new FieldRules('text', true),\r\n            unit:              new FieldRules('text', true),\r\n            unitCount:         new FieldRules('text', true),\r\n            unitPrice:         new FieldRules('text', true),\r\n            price:             new FieldRules('text', true),\r\n        }),\r\n        new FormValidationConfig({\r\n            paidValue: new FormDependsRule(\r\n                {field: 'paid', value: true},\r\n                {required: true},\r\n            ),\r\n        }),\r\n        new CollectionValidationConfig({\r\n            invoiceNumber: new CollectionUniqueRule(),\r\n            invoiceItems:  new CollectionRequiredRule(),\r\n        }),\r\n    );\r\n    \r\n    data = {\r\n        collections: {\r\n            company: [\r\n                'economicEvents',\r\n                'economicOperations',\r\n            ],\r\n        },\r\n    };\r\n    \r\n}","import FormConfigInterface from \"./FormConfigInterface\";\r\n\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport FormValidationConfig from \"./Element/Validation/FormValidationConfig\";\r\nimport CollectionValidationConfig from \"./Element/Validation/CollectionValidationConfig\";\r\n\r\nimport FormDependsRule from \"../../Strategy/Validator/Strategy/Rules/FormDependsRule\";\r\nimport CollectionUniqueRule from \"../../Strategy/Validator/Strategy/Rules/CollectionUniqueRule\";\r\nimport CollectionRequiredRule from \"../../Strategy/Validator/Strategy/Rules/CollectionRequiredRule\";\r\n\r\nimport InvoiceItemConfig from \"./InvoiceItemConfig\";\r\nimport FormConfig from \"./Element/FormConfig\";\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu faktury\r\n * \r\n * @implements FormConfigInterface\r\n * \r\n */\r\nexport default class InvoiceConfig extends FormConfigInterface {\r\n    type = 'entity';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'invoices',\r\n    );\r\n    \r\n    fields = {\r\n        economicEvent: new FieldConfig('selectCollection', 'economicEvent', 'Zdarzenie gospodarcze', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection:            {\r\n                name:       'economicEvents',\r\n                labelField: 'description',\r\n            },\r\n            buttons:               {\r\n                right: {\r\n                    add:  {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color:       'green',\r\n                        label:       'Dodaj',\r\n                        icon:        'fal fa-plus',\r\n                        href:        '/form/economicEvent/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color:       'orange',\r\n                        label:       'Edytuj',\r\n                        icon:        'fad fa-pencil',\r\n                        href:        '/form/economicEvent/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n        id:            new FieldConfig('hidden', 'id', 'ID', null),\r\n        city:          new FieldConfig('text', 'city', 'Miejscowość', ''),\r\n        datePrep:      new FieldConfig('datepicker', 'datePrep', 'Data wystawienia', ''),\r\n        contractor:    new FieldConfig('selectCollection', 'contractor', 'Nabywca', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection:            {\r\n                name:       'contractors',\r\n                labelField: 'companyName',\r\n            },\r\n            buttons:               {\r\n                right: {\r\n                    add:  {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color:       'green',\r\n                        label:       'Dodaj',\r\n                        icon:        'fal fa-plus',\r\n                        href:        '/form/contractor/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color:       'orange',\r\n                        label:       'Edytuj',\r\n                        icon:        'fal fa-pencil',\r\n                        href:        '/form/contractor/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n        invoiceNumber: new FieldConfig('text', 'invoiceNumber', 'Numer faktury', ''),\r\n        paymentMethod: new FieldConfig('select', 'paymentMethod', 'Sposób płatności', 'transfer', {\r\n            options:               [\r\n                {value: 'transfer', text: 'przelew'},\r\n                {value: 'cash', text: 'gotówka'},\r\n            ],\r\n            optionsWithEmptyValue: false,\r\n        }),\r\n        paymentDate:   new FieldConfig('datepicker', 'paymentDate', 'Data płatności', ''),\r\n        bankAccount:   new FieldConfig('selectCollection', 'bankAccount', 'Konto do przelewu', '', {\r\n            optionsWithEmptyValue: false,\r\n            collection:            {\r\n                name:       'bankAccounts',\r\n                labelField: 'bankAccountName',\r\n            },\r\n        }),\r\n        invoiceItems:  new InvoiceItemConfig(),\r\n        amount:        new FieldConfig('text', 'amount', 'Razem', ''),\r\n        paid:          new FieldConfig('checkbox', 'paid', '', ''),\r\n        paidValue:     new FieldConfig('text', 'paidValue', 'Zapłacono', ''),\r\n        paidLeft:      new FieldConfig('text', 'paidLeft', 'Pozostało do zapłaty', ''),\r\n    };\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'invoice',\r\n        'Faktura',\r\n        'Invoice',\r\n        {\r\n            type:       'simple',\r\n            data:       {\r\n                header: \"datePrep\",\r\n                title:  \"invoiceNumber\",\r\n                after:  \"amount\",\r\n                // footer: (item) => Helper.fullName(item.contractor),\r\n            },\r\n            emptyValue: {\r\n                title: \"Wybierz fakturę\",\r\n            },\r\n            actions:    {\r\n                left:  {\r\n                    delete: {\r\n                        color:  'red',\r\n                        label:  'Usuń',\r\n                        icon:   'fad fa-trash',\r\n                        action: 'invoice',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color:  'orange',\r\n                        label:  'Edytuj',\r\n                        icon:   'fad fa-pencil',\r\n                        action: 'invoice',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    /** @type {CollectionConfig} - konfiguracja kolekcji  */\r\n    collection = new CollectionConfig(\r\n        'invoices',\r\n        'Faktury',\r\n        [],\r\n        'invoice',\r\n        {\r\n            title:   {\r\n                new:  'Nowa faktura',\r\n                edit: 'Edycja faktury',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color:  'green',\r\n                    label:  'Dodaj',\r\n                    icon:   'fal fa-plus',\r\n                    action: '/form/invoice/',\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    form = new FormConfig(\r\n        'invoice',\r\n        'item',\r\n        'popup',\r\n    );\r\n    \r\n    /**\r\n     * Konfiguracja walidacji faktury\r\n     * @type {ValidationConfig}\r\n     */\r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id:            new FieldRules('number'),\r\n            economicEvent: new FieldRules('text', true),\r\n            city:          new FieldRules('text', true),\r\n            datePrep:      new FieldRules('datepicker', true),\r\n            contractor:    new FieldRules('text', true),\r\n            invoiceNumber: new FieldRules('text', true),\r\n            paymentMethod: new FieldRules('text', true),\r\n            paymentDate:   new FieldRules('datepicker', true),\r\n            bankAccount:   new FieldRules('text', true),\r\n            invoiceItems:  false,\r\n            amount:        new FieldRules('text', true),\r\n            paid:          new FieldRules('text'),\r\n            paidValue:     new FieldRules('text'),\r\n            paidLeft:      new FieldRules('text', true),\r\n        }),\r\n        new FormValidationConfig({\r\n            paidValue: new FormDependsRule(\r\n                {field: 'paid', value: true},\r\n                {required: true},\r\n            ),\r\n        }),\r\n        new CollectionValidationConfig({\r\n            invoiceNumber: new CollectionUniqueRule(),\r\n            invoiceItems:  new CollectionRequiredRule(),\r\n        }),\r\n    );\r\n    \r\n    data = {\r\n        collections: {\r\n            company: [\r\n                'contractors',\r\n                'bankAccounts',\r\n                'economicEvents',\r\n            ],\r\n        },\r\n    };\r\n}","import FormConfigInterface from \"./FormConfigInterface\";\r\n\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport FormConfig from \"./Element/FormConfig\";\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu pozycji na fakturze\r\n *\r\n * @implements FormConfigInterface\r\n *\r\n */\r\nexport default class EconomicEventConfig extends FormConfigInterface {\r\n    type = 'entity';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'economic_events',\r\n    );\r\n    \r\n    fields = {\r\n        id:                new FieldConfig('hidden', 'id', 'ID', null),\r\n        description:       new FieldConfig('text', 'title', 'Tytuł operacji', ''),\r\n        economicOperation: new FieldConfig('selectCollection', 'economicOperation', 'Operacja gospodarcza', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection:            {\r\n                name:       'economicOperations',\r\n                labelField: 'description',\r\n            },\r\n            buttons:               {\r\n                right: {\r\n                    add:  {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color:       'green',\r\n                        label:       'Dodaj',\r\n                        icon:        'fal fa-plus',\r\n                        href:        '/form/economicOperation/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color:       'orange',\r\n                        label:       'Edytuj',\r\n                        icon:        'fad fa-pencil',\r\n                        href:        '/form/economicOperation/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n    };\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'economicEvent',\r\n        'Zdarzenie gospodarcze',\r\n        'EconomicEvent',\r\n        {\r\n            type:       'simple',\r\n            data:       {\r\n                header: null,\r\n                title:  'description',\r\n                footer: null,\r\n            },\r\n            emptyValue: {\r\n                title: \"Wybierz zdarzenie gospodarcze\",\r\n            },\r\n            actions:    {\r\n                left:  {\r\n                    delete: {\r\n                        color:  'red',\r\n                        label:  'Usuń',\r\n                        icon:   'fad fa-trash',\r\n                        action: 'economicEvent',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color:  'orange',\r\n                        label:  'Edytuj',\r\n                        icon:   'fad fa-pencil',\r\n                        action: 'economicEvent',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    collection = new CollectionConfig(\r\n        'economicEvents',\r\n        'Zdarzenia gospodarcze',\r\n        [],\r\n        'economicEvent',\r\n        {\r\n            title:   {\r\n                new:  'Nowe zdarzenie gospodarcze',\r\n                edit: 'Edycja zdarzenia gospodarczego',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color:  'green',\r\n                    label:  'Dodaj',\r\n                    icon:   'fal fa-plus',\r\n                    action: '/form/economicEvent/',\r\n                },\r\n            },\r\n        },\r\n        'invoice',\r\n    );\r\n    \r\n    form = new FormConfig(\r\n        'economicEvent',\r\n        'item',\r\n        'sheet',\r\n    );\r\n    \r\n    /**\r\n     * Konfiguracja walidacji\r\n     * @type {ValidationConfig}\r\n     */\r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id:                new FieldRules('number'),\r\n            description:       new FieldRules('text', true),\r\n            economicOperation: new FieldRules('text', true),\r\n        }),\r\n    );\r\n    \r\n    data = {\r\n        collections: {\r\n            company: [\r\n                'economicEvents',\r\n            ],\r\n        },\r\n    };\r\n    \r\n}","import FormConfigInterface from \"./FormConfigInterface\";\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport FormConfig from \"./Element/FormConfig\";\r\nimport FormValidationConfig from \"./Element/Validation/FormValidationConfig\";\r\nimport FormDependsRule from \"../../Strategy/Validator/Strategy/Rules/FormDependsRule\";\r\nimport CollectionValidationConfig from \"./Element/Validation/CollectionValidationConfig\";\r\nimport CollectionUniqueRule from \"../../Strategy/Validator/Strategy/Rules/CollectionUniqueRule\";\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu pozycji na fakturze\r\n *\r\n * @implements FormConfigInterface\r\n *\r\n */\r\nexport default class EconomicOperationConfig extends FormConfigInterface {\r\n    type = 'entity';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'economic_operations',\r\n    );\r\n    \r\n    fields = {\r\n        id:            new FieldConfig('hidden', 'id', 'ID', null),\r\n        economicEvent: new FieldConfig('selectCollection', 'economicEvent', 'Zdarzenie gospodarcze', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection:            {\r\n                name:       'economicEvents',\r\n                labelField: 'description',\r\n            },\r\n            buttons:               {\r\n                right: {\r\n                    add:  {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color:       'green',\r\n                        label:       'Dodaj',\r\n                        icon:        'fal fa-plus',\r\n                        href:        '/form/economicEvent/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color:       'orange',\r\n                        label:       'Edytuj',\r\n                        icon:        'fad fa-pencil',\r\n                        href:        '/form/economicEvent/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n        type:          new FieldConfig('text', 'type', 'Typ operacji', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection:            {\r\n                name:       'economicOperations',\r\n                labelField: 'description',\r\n            },\r\n            buttons:               {\r\n                right: {\r\n                    add:  {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color:       'green',\r\n                        label:       'Dodaj',\r\n                        icon:        'fal fa-plus',\r\n                        href:        '/form/economicOperation/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color:       'orange',\r\n                        label:       'Edytuj',\r\n                        icon:        'fad fa-pencil',\r\n                        href:        '/form/economicOperation/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n        bookColumn:    new FieldConfig('text', 'bookColumn', 'Docelowa kolumna księgi', ''),\r\n        description:   new FieldConfig('text', 'description', 'Opis operacji', ''),\r\n        isPeriodic:    new FieldConfig('toggle', 'isPeriodic', 'Cykliczna?', ''),\r\n        title:         new FieldConfig('text', 'title', 'Tytuł cyklu operacji', ''),\r\n        period:        new FieldConfig('text', 'period', 'Cykl operacji', ''),\r\n    };\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'economicOperation',\r\n        'Operacja gospodarcza',\r\n        'EconomicOperation',\r\n        {\r\n            type:       'simple',\r\n            data:       {\r\n                header: null,\r\n                title:  'description',\r\n                footer: null,\r\n            },\r\n            emptyValue: {\r\n                title: \"Wybierz operację gospodarczą\",\r\n            },\r\n            actions:    {\r\n                left:  {\r\n                    delete: {\r\n                        color:  'red',\r\n                        label:  'Usuń',\r\n                        icon:   'fad fa-trash',\r\n                        action: 'economicOperation',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color:  'orange',\r\n                        label:  'Edytuj',\r\n                        icon:   'fad fa-pencil',\r\n                        action: 'economicOperation',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    collection = new CollectionConfig(\r\n        'economicOperations',\r\n        'Operacje gospodarcze',\r\n        [],\r\n        'economicOperation',\r\n        {\r\n            title:   {\r\n                new:  'Nowa operacja gospodarcza',\r\n                edit: 'Edycja operacji gospodarczej',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color:  'green',\r\n                    label:  'Dodaj',\r\n                    icon:   'fal fa-plus',\r\n                    action: '/form/economicOperation/',\r\n                },\r\n            },\r\n        },\r\n        'economicEvent',\r\n    );\r\n    \r\n    form = new FormConfig(\r\n        'economicOperation',\r\n        'item',\r\n        'sheet',\r\n    );\r\n    \r\n    /**\r\n     * Konfiguracja walidacji\r\n     * @type {ValidationConfig}\r\n     */\r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id:            new FieldRules('number'),\r\n            economicEvent: new FieldRules('text', true),\r\n            type:          new FieldRules('text', true),\r\n            bookColumn:    new FieldRules('text', true),\r\n            description:   new FieldRules('text', true),\r\n        }),\r\n        new FormValidationConfig({\r\n            title:  new FormDependsRule(\r\n                {field: 'isPeriodic', value: true},\r\n                {required: true},\r\n            ),\r\n            period: new FormDependsRule(\r\n                {field: 'isPeriodic', value: true},\r\n                {required: true},\r\n            ),\r\n        }),\r\n        new CollectionValidationConfig({\r\n            description: new CollectionUniqueRule(),\r\n            //TODO: zależność wielopolowa (isPeriodic :: title :: period)\r\n            \r\n            // nip:          new CollectionUniqueRule(),\r\n            // bankAccounts: new CollectionRequiredRule(),\r\n        }),\r\n    );\r\n    \r\n    data = {\r\n        collections: {\r\n            company: [\r\n                'economicEvents',\r\n                'economicOperations',\r\n            ],\r\n        },\r\n    };\r\n    \r\n}","import FormConfigInterface from \"./FormConfigInterface\";\r\n\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport CollectionValidationConfig from \"./Element/Validation/CollectionValidationConfig\";\r\n\r\nimport CollectionUniqueRule from \"../../Strategy/Validator/Strategy/Rules/CollectionUniqueRule\";\r\nimport CollectionRequiredRule from \"../../Strategy/Validator/Strategy/Rules/CollectionRequiredRule\";\r\n\r\nimport FormConfig from \"./Element/FormConfig\";\r\n\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu faktury\r\n *\r\n * @implements FormConfigInterface\r\n * \r\n */\r\nexport default class IntproofConfig extends FormConfigInterface {\r\n    type = 'entity';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'intproofs',\r\n    );\r\n    \r\n    fields = {\r\n        id:          new FieldConfig('hidden', 'id', 'ID', null),\r\n        city:        new FieldConfig('text', 'city', 'Miejscowość', ''),\r\n        datePrep:    new FieldConfig('datepicker', 'datePrep', 'Data wystawienia', ''),\r\n        proofNumber: new FieldConfig('text', 'proofNumber', 'Numer DW', ''),\r\n        // intproofItems: new IntproofItemContext(),\r\n        amount:      new FieldConfig('text', 'amount', 'Razem', ''),\r\n    };\r\n    \r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'intproof',\r\n        'Dowód wewnętrzny',\r\n        'Intproof',\r\n        {\r\n            type:       'simple',\r\n            data:       {\r\n                header: (item) => 'full name of owner',//Helper.fullName(item.buyer),\r\n                title:  \"proofNumber\",\r\n                after:  \"amount\",\r\n                footer: null,\r\n            },\r\n            emptyValue: {\r\n                title: \"Wybierz DW\",\r\n            },\r\n            actions:    {\r\n                left:  {\r\n                    delete: {\r\n                        color:  'red',\r\n                        label:  'Usuń',\r\n                        icon:   'fad fa-trash',\r\n                        action: 'intproof',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color:  'orange',\r\n                        label:  'Edytuj',\r\n                        icon:   'fad fa-pencil',\r\n                        action: 'intproof',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    /** @type {CollectionConfig} - konfiguracja kolekcji  */\r\n    collection = new CollectionConfig(\r\n        'intproofs',\r\n        'Dowody wewnętrzne',\r\n        [],\r\n        'intproof',\r\n        {\r\n            title:   {\r\n                new:  'Nowy dowód wewnętrzny',\r\n                edit: 'Edycja dowodu wewnętrznego',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color:  'green',\r\n                    label:  'Dodaj',\r\n                    icon:   'fal fa-plus',\r\n                    action: '/form/intproof/',\r\n                },\r\n            },\r\n        },\r\n    );\r\n    \r\n    form = new FormConfig(\r\n        'intproof',\r\n        'item',\r\n        'popup',\r\n    );\r\n    \r\n    /**\r\n     * Konfiguracja walidacji faktury\r\n     * @type {ValidationConfig}\r\n     */\r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id:            new FieldRules('number'),\r\n            city:          new FieldRules('text', true),\r\n            datePrep:      new FieldRules('datepicker', true),\r\n            proofNumber:   new FieldRules('text', true),\r\n            intproofItems: false,\r\n            amount:        new FieldRules('text', true),\r\n        }),\r\n        new CollectionValidationConfig({\r\n            proofNumber:   new CollectionUniqueRule(),\r\n            intproofItems: new CollectionRequiredRule(),\r\n        }),\r\n    );\r\n    \r\n    data = null;\r\n}","import FormConfigInterface from \"./FormConfigInterface\";\r\n\r\nimport ApiConfig from \"./Element/ApiConfig\";\r\nimport FieldConfig from \"./Element/FieldConfig\";\r\nimport ItemConfig from \"./Element/ItemConfig\";\r\nimport CollectionConfig from \"./Element/CollectionConfig\";\r\nimport ValidationConfig from \"./Element/ValidationConfig\";\r\nimport FieldsValidationConfig from \"./Element/Validation/FieldsValidationConfig\";\r\nimport FieldRules from \"./Element/Validation/FieldValidation/FieldRules\";\r\nimport FormConfig from \"./Element/FormConfig\";\r\nimport FormValidationConfig from \"./Element/Validation/FormValidationConfig\";\r\nimport FormDependsRule from \"../../Strategy/Validator/Strategy/Rules/FormDependsRule\";\r\nimport CollectionValidationConfig from \"./Element/Validation/CollectionValidationConfig\";\r\nimport CollectionUniqueRule from \"../../Strategy/Validator/Strategy/Rules/CollectionUniqueRule\";\r\nimport CollectionRequiredRule from \"../../Strategy/Validator/Strategy/Rules/CollectionRequiredRule\";\r\n\r\n\r\n/**\r\n * Klasa konfiguracji kontekstu pozycji na fakturze\r\n *\r\n * @implements FormConfigInterface\r\n *\r\n */\r\nexport default class IntproofItemConfig extends FormConfigInterface {\r\n    type = 'collection';\r\n    /** @type {ApiConfig} = konfiguracja Api backendowego */\r\n    apiConfig = new ApiConfig(\r\n        'intproof_items',\r\n    );\r\n\r\n    fields = {\r\n        id: new FieldConfig('hidden', 'id', 'ID', null),\r\n        economicEvent: new FieldConfig('selectCollection', 'economicEvent', 'Zdarzenie gospodarcze', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection: {\r\n                name: 'economicEvents',\r\n                labelField: 'description',\r\n            },\r\n            buttons: {\r\n                right: {\r\n                    add: {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color: 'green',\r\n                        label: 'Dodaj',\r\n                        icon: 'fal fa-plus',\r\n                        href: '/form/economicEvent/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color: 'orange',\r\n                        label: 'Edytuj',\r\n                        icon: 'fad fa-pencil',\r\n                        href: '/form/economicEvent/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n        economicOperation: new FieldConfig('selectCollection', 'economicOperation', 'Operacja gospodarcza', '', {\r\n            optionsWithEmptyValue: true,\r\n            collection: {\r\n                name: 'economicOperations',\r\n                labelField: 'description',\r\n            },\r\n            buttons: {\r\n                right: {\r\n                    add: {\r\n                        displayWhen: {\r\n                            selected: false,\r\n                        },\r\n                        color: 'green',\r\n                        label: 'Dodaj',\r\n                        icon: 'fal fa-plus',\r\n                        href: '/form/economicOperation/',\r\n                    },\r\n                    edit: {\r\n                        displayWhen: {\r\n                            selected: true,\r\n                        },\r\n                        color: 'orange',\r\n                        label: 'Edytuj',\r\n                        icon: 'fad fa-pencil',\r\n                        href: '/form/economicOperation/:id/',\r\n                    },\r\n                },\r\n            },\r\n        }),\r\n        pos: new FieldConfig('text', 'pos', 'Nr pozycji', ''),\r\n        title: new FieldConfig('text', 'title', 'Tytuł operacji', ''),\r\n        unit: new FieldConfig('text', 'unit', 'Jednostka', ''),\r\n        unitCount: new FieldConfig('text', 'unitCount', 'Ilość', ''),\r\n        unitPrice: new FieldConfig('text', 'unitPrice', 'Cena jednostkowa', ''),\r\n        price: new FieldConfig('text', 'price', 'Wartość', ''),\r\n    };\r\n\r\n    /** @type {ItemConfig} - konfiguracja encji  */\r\n    item = new ItemConfig(\r\n        'intproofItem',\r\n        'Pozycja na fakturze',\r\n        'IntproofItem',\r\n        {\r\n            type: 'simple',\r\n            data: {\r\n                header: null,\r\n                title: 'economicOperation',\r\n                footer: 'price',\r\n            },\r\n            emptyValue: {\r\n                title: \"Wybierz pozycję na fakturze\",\r\n            },\r\n            actions: {\r\n                left: {\r\n                    delete: {\r\n                        color: 'red',\r\n                        label: 'Usuń',\r\n                        icon: 'fad fa-trash',\r\n                        action: 'intproofItem',//TODO: tu chyba trzbea machnąć jakiś callback\r\n                    },\r\n                },\r\n                right: {\r\n                    edit: {\r\n                        color: 'orange',\r\n                        label: 'Edytuj',\r\n                        icon: 'fad fa-pencil',\r\n                        action: 'intproofItem',\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    );\r\n\r\n    collection = new CollectionConfig(\r\n        'intproofItems',\r\n        'Pozycje na fakturze',\r\n        [],\r\n        'intproofItem',\r\n        {\r\n            type: 'card',\r\n            title: {\r\n                new: 'Nowa pozycja na fakturze',\r\n                edit: 'Edycja pozycji na fakturze',\r\n            },\r\n            actions: {\r\n                new: {\r\n                    color: 'green',\r\n                    label: 'Dodaj',\r\n                    icon: 'fal fa-plus',\r\n                    action: '/form/intproofItem/',\r\n                },\r\n            },\r\n        },\r\n        'intproof',\r\n    );\r\n\r\n    form = new FormConfig(\r\n        'intproofItem',\r\n        'collection',\r\n        'sheet',\r\n    );\r\n\r\n    /**\r\n     * Konfiguracja walidacji\r\n     * @type {ValidationConfig}\r\n     */\r\n    validation = new ValidationConfig(\r\n        new FieldsValidationConfig({\r\n            id: new FieldRules('number'),\r\n            economicEvent: new FieldRules('text', true),\r\n            economicOperation: new FieldRules('text', true),\r\n            title: new FieldRules('text'),\r\n            legalBasis: new FieldRules('text', true),\r\n            unit: new FieldRules('text', true),\r\n            unitCount: new FieldRules('text', true),\r\n            unitPrice: new FieldRules('text', true),\r\n            price: new FieldRules('text', true),\r\n        }),\r\n        new FormValidationConfig({\r\n            paidValue: new FormDependsRule(\r\n                {field: 'paid', value: true},\r\n                {required: true},\r\n            ),\r\n        }),\r\n        new CollectionValidationConfig({\r\n            proofNumber: new CollectionUniqueRule(),\r\n            intproofItems: new CollectionRequiredRule(),\r\n        }),\r\n    );\r\n\r\n    data = {\r\n        collections: {\r\n            company: [\r\n                'economicEvents',\r\n                'economicOperations',\r\n            ],\r\n        },\r\n    };\r\n\r\n}","import React from 'react';\nimport {Page, Navbar, Block, BlockTitle, List, ListItem, Button, Col} from 'framework7-react';\n\nexport default () => (\n    <Page>\n        <Navbar title=\"Left Panel\"/>\n        <Block strong>\n            <p>Left panel content goes here</p>\n        </Block>\n        <BlockTitle>Load page in panel</BlockTitle>\n        {/*<List>*/}\n        {/*  <ListItem link=\"/about/\" title=\"About\"></ListItem>*/}\n        {/*  <ListItem link=\"/form/\" title=\"Form\"></ListItem>*/}\n        {/*</List>*/}\n        <BlockTitle>Load page in main view</BlockTitle>\n        <List>\n            <ListItem link=\"/about/\" title=\"About\" view=\"#main-view\" panelClose/>\n            <ListItem link=\"/dynamic-route/blog/45/post/125/?foo=bar#about/\" title=\"Dynamic Route\" view=\"#main-view\"\n                      panelClose/>\n            <ListItem link=\"/form/problem/\" title=\"Start issue\" view=\"#main-view\" panelClose/>\n            <ListItem link=\"/form/problem/\" title=\"Popup issue\" fill raised popupOpen=\"#popup\"/>\n        </List>\n    </Page>\n);\n","import React from 'react';\nimport { Page, Navbar, Block, BlockTitle, List, ListItem } from 'framework7-react';\n\nexport default () => (\n  <Page>\n    <Navbar title=\"Right Panel\" />\n    <Block strong>\n      <p>Right panel content goes here</p>\n    </Block>\n    <BlockTitle>Load page in panel</BlockTitle>\n    <List>\n      <ListItem link=\"/about/\" title=\"About\"></ListItem>\n      <ListItem link=\"/form/\" title=\"Form\"></ListItem>\n    </List>\n    <BlockTitle>Load page in main view</BlockTitle>\n    <List>\n      <ListItem link=\"/about/\" title=\"About\" view=\"#main-view\" panelClose></ListItem>\n      <ListItem link=\"/form/\" title=\"Form\" view=\"#main-view\" panelClose></ListItem>\n    </List>\n  </Page>\n);\n","import React from 'react';\nimport {\n    Page,\n    Navbar,\n    List,\n    ListItem,\n    ListInput,\n    Toggle,\n    BlockTitle,\n    Row,\n    Button,\n    Range,\n    Block,\n} from 'framework7-react';\n\nexport default () => (\n    <Page>\n        <Navbar title=\"Form\" backLink=\"Back\"/>\n        <BlockTitle>Form Example</BlockTitle>\n        <List form>\n            <ListInput\n                label=\"Name\"\n                type=\"text\"\n                placeholder=\"Name\"\n            />\n            <ListInput\n                label=\"E-mail\"\n                type=\"email\"\n                placeholder=\"E-mail\"\n            />\n            <ListInput\n                label=\"URL\"\n                type=\"url\"\n                placeholder=\"URL\"\n            />\n            <ListInput\n                label=\"Password\"\n                type=\"password\"\n                placeholder=\"Password\"\n            />\n            <ListInput\n                label=\"Phone\"\n                type=\"tel\"\n                placeholder=\"Phone\"\n            />\n            <ListInput\n                label=\"Gender\"\n                type=\"select\"\n                defaultValue=\"Male\"\n            >\n                <option>Male</option>\n                <option>Female</option>\n            </ListInput>\n            <ListInput\n                label=\"Birth date\"\n                type=\"date\"\n                placeholder=\"Birth date\" value=\"2014-04-30\"\n            />\n            <ListItem title=\"Toggle\">\n                <Toggle slot=\"after\"/>\n            </ListItem>\n            <ListInput\n                label=\"Slider\"\n                input={false}\n            >\n                <Range label={true} slot=\"input\" min={0} max={100} value={50} step={1}/>\n            </ListInput>\n            <ListInput\n                label=\"Textarea\"\n                type=\"textarea\"\n                placeholder=\"Bio\"\n            />\n            <ListInput\n                label=\"Resizable\"\n                type=\"textarea\"\n                placeholder=\"Bio\"\n                resizable\n            />\n        </List>\n        \n        <BlockTitle>Checkbox group</BlockTitle>\n        <List form>\n            {Array.from(Array(3).keys()).map(n => (\n                <ListItem key={n} checkbox name=\"my-checkbox\" value={n + 1} title={`Checkbox ${n + 1}`}/>\n            ))}\n        </List>\n        \n        <BlockTitle>Radio buttons group</BlockTitle>\n        <List form>\n            {Array.from(Array(3).keys()).map(n => (\n                <ListItem key={n} radio name=\"my-radio\" defaultChecked={n === 0} value={n + 1}\n                          title={`Radio ${n + 1}`}/>\n            ))}\n        </List>\n        \n        <BlockTitle>Buttons</BlockTitle>\n        <Block strong>\n            <Row tag=\"p\">\n                <Button className=\"col\">Button</Button>\n                <Button className=\"col\" fill>Fill</Button>\n            </Row>\n            <Row tag=\"p\">\n                <Button className=\"col\" raised>Raised</Button>\n                <Button className=\"col\" raised fill>Raised Fill</Button>\n            </Row>\n            <Row tag=\"p\">\n                <Button className=\"col\" round>Round</Button>\n                <Button className=\"col\" round fill>Round Fill</Button>\n            </Row>\n            <Row tag=\"p\">\n                <Button className=\"col\" outline>Outline</Button>\n                <Button className=\"col\" round outline>Outline Round</Button>\n            </Row>\n            <Row tag=\"p\">\n                <Button className=\"col\" small outline>Small</Button>\n                <Button className=\"col\" small round outline>Small Round</Button>\n            </Row>\n            <Row tag=\"p\">\n                <Button className=\"col\" small fill>Small</Button>\n                <Button className=\"col\" small round fill>Small Round</Button>\n            </Row>\n            <Row tag=\"p\">\n                <Button className=\"col\" large raised>Large</Button>\n                <Button className=\"col\" large fill raised>Large Fill</Button>\n            </Row>\n            <Row tag=\"p\">\n                <Button className=\"col\" large fill raised color=\"red\">Large Red</Button>\n                <Button className=\"col\" large fill raised color=\"green\">Large Green</Button>\n            </Row>\n        </Block>\n    </Page>\n);\n","import React from 'react';\nimport { Page, Navbar, Link, Block, BlockTitle } from 'framework7-react';\n\nexport default () => (\n  <Page>\n    <Navbar title=\"About\" backLink=\"Back\"></Navbar>\n    <BlockTitle>About My App</BlockTitle>\n    <Block strong>\n      <p>Here is About page!</p>\n      <p>You can go <Link back>back</Link>.</p>\n      <p>Mauris posuere sit amet metus id venenatis. Ut ante dolor, tempor nec commodo rutrum, varius at sem. Nullam ac nisi non neque ornare pretium. Nulla mauris mauris, consequat et elementum sit amet, egestas sed orci. In hac habitasse platea dictumst.</p>\n      <p>Fusce eros lectus, accumsan eget mi vel, iaculis tincidunt felis. Nulla tincidunt pharetra sagittis. Fusce in felis eros. Nulla sit amet aliquam lorem, et gravida ipsum. Mauris consectetur nisl non sollicitudin tristique. Praesent vitae metus ac quam rhoncus mattis vel et nisi. Aenean aliquet, felis quis dignissim iaculis, lectus quam tincidunt ligula, et venenatis turpis risus sed lorem. Morbi eu metus elit. Ut vel diam dolor.</p>\n    </Block>\n  </Page>\n);\n","import React, { Component } from 'react';\nimport { Page, Navbar, Block, Link } from 'framework7-react';\n\nexport default class DynamicRoutePage extends Component {\n  render() {\n    return (\n      <Page>\n        <Navbar title=\"Dynamic Route\" backLink=\"Back\" />\n        <Block strong>\n          <ul>\n            <li><b>Url:</b> {this.$f7route.url}</li>\n            <li><b>Path:</b> {this.$f7route.path}</li>\n            <li><b>Hash:</b> {this.$f7route.hash}</li>\n            <li><b>Params:</b>\n              <ul>\n                {Object.keys(this.$f7route.params).map(key => (\n                  <li key={key}><b>{key}:</b> {this.$f7route.params[key]}</li>\n                ))}\n              </ul>\n            </li>\n            <li><b>Query:</b>\n              <ul>\n                {Object.keys(this.$f7route.query).map(key => (\n                  <li key={key}><b>{key}:</b> {this.$f7route.query[key]}</li>\n                ))}\n              </ul>\n            </li>\n            <li><b>Route:</b> {JSON.stringify(this.$f7route.route)}</li>\n          </ul>\n        </Block>\n        <Block strong>\n          <Link onClick={() => this.$f7router.back()}>Go back via Router API</Link>\n        </Block>\n      </Page>\n    );\n  }\n}","import React from 'react';\nimport { Page, Navbar, Block } from 'framework7-react';\n\nexport default () => (\n  <Page>\n    <Navbar title=\"Not found\" backLink=\"Back\" />\n    <Block strong>\n      <p>Sorry</p>\n      <p>Requested content not found.</p>\n    </Block>\n  </Page>\n);\n","import React, {Component} from 'react';\r\nimport {\r\n    AccordionContent,\r\n    Block,\r\n    BlockTitle,\r\n    Link,\r\n    List,\r\n    ListItem,\r\n    Navbar,\r\n    NavLeft,\r\n    NavRight,\r\n    NavTitle,\r\n    Page,\r\n    Toolbar,\r\n} from 'framework7-react';\r\n\r\n\r\nexport default class ProblemResolverPage extends Component {\r\n    displayName = 'HomePage';\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n        console.log('HomePage.props', props);\r\n        console.log('context', context);\r\n    }\r\n\r\n    render() {\r\n        return <Page>\r\n            <Navbar>\r\n                <NavLeft>\r\n                    <Link slot=\"title\" icon=\"fad fa-chevron-left\" panelOpen=\"left\"/>\r\n                </NavLeft>\r\n                <NavTitle>\r\n                    Problem Resolver\r\n                    <span className=\"subtitle\">Problem solving application</span>\r\n                </NavTitle>\r\n                <NavRight>\r\n                    <Link color=\"black\" icon=\"fad fa-arrow-to-left\" panelOpen=\"right\"/>\r\n                </NavRight>\r\n            </Navbar>\r\n            <Toolbar bottom>\r\n                <Link>The Left Link</Link>\r\n                <Link href=\"https://github.com/anatholius/problem-resolver\" external target=\"_blank\">See the code</Link>\r\n                <Link>The Right Link</Link>\r\n            </Toolbar>\r\n\r\n            <Block strong>\r\n                <blockquote>The materials were inspired by the website <Link\r\n                    link=\"https://www.skillsyouneed.com/ips/problem-solving.html\" external>skillsyouneed.com</Link>\r\n                </blockquote>\r\n                <BlockTitle>How to solve the problem?</BlockTitle>\r\n                <p>To be able to think about solving a problem, you must be aware of the fundamental importance of the\r\n                    problem.</p>\r\n                <p>Much work in solving a problem is to understand the essence of the problem. Instead of focusing on\r\n                    symptoms, look for the source of the problem. If the problem has a cause and the cause can be\r\n                    eliminated, the problem is solved.</p>\r\n                <h5>To successfully solve problems, you need key skills such as:</h5>\r\n                <List accordionList>\r\n                    <ListItem accordionItem title=\"Creativity\">\r\n                        <AccordionContent>\r\n                            <Block>\r\n                                <p>\r\n                                    Problems are usually resolved intuitively or systematically. Intuition is used when\r\n                                    no new knowledge is needed, i.e. you know enough to be able to make a quick decision\r\n                                    and solve a problem, or you use common sense or experience to solve a problem. Very\r\n                                    complex problems or problems you have never experienced before will probably require\r\n                                    a more systematic and logical approach to solve them, and for this you will need\r\n                                    creative thinking.\r\n                                </p>\r\n                            </Block>\r\n                        </AccordionContent>\r\n                    </ListItem>\r\n                    <ListItem accordionItem title=\"Research Skills\">\r\n                        <AccordionContent>\r\n                            <Block>\r\n                                <p>\r\n                                    (Search / research skills) - Defining and solving problems often requires some\r\n                                    research: it can be a simple Google search engine or a more rigorous research\r\n                                    project.\r\n                                </p>\r\n                            </Block>\r\n                        </AccordionContent>\r\n                    </ListItem>\r\n                    <ListItem accordionItem title=\"Teamwork\">\r\n                        <AccordionContent>\r\n                            <Block>\r\n                                <p>\r\n                                    Many problems can be defined and solved thanks to the contribution of others.\r\n                                    Teamwork does not necessarily have to be about professional work, but it is equally\r\n                                    important at home, in the school, or in the company of friends.\r\n                                </p>\r\n                            </Block>\r\n                        </AccordionContent>\r\n                    </ListItem>\r\n                    <ListItem accordionItem title=\"Emotional intelligence\">\r\n                        <AccordionContent>\r\n                            <Block>\r\n                                <p>\r\n                                    It is worth considering the impact that the problem and / or its solution has on you\r\n                                    and other people. Emotional intelligence, the ability to recognize emotions in\r\n                                    yourself and others, will help you find the right solution\r\n                                </p>\r\n                            </Block>\r\n                        </AccordionContent>\r\n                    </ListItem>\r\n                    <ListItem accordionItem title=\"Risk management\">\r\n                        <AccordionContent>\r\n                            <Block>\r\n                                <p>\r\n                                    Solving a problem involves some risk - this risk should be compared with not solving\r\n                                    the problem\r\n                                </p>\r\n                            </Block>\r\n                        </AccordionContent>\r\n                    </ListItem>\r\n                    <ListItem accordionItem title=\"Decision-making\">\r\n                        <AccordionContent>\r\n                            <Block>\r\n                                <p>\r\n                                    Problem solving and decision making are closely related skills, and decision making\r\n                                    is an important part of the problem solving process because you will often have to\r\n                                    deal with various options and alternatives.\r\n                                </p>\r\n                            </Block>\r\n                        </AccordionContent>\r\n                    </ListItem>\r\n                </List>\r\n            </Block>\r\n            <Block strong>\r\n                <BlockTitle bold>What is the problem</BlockTitle>\r\n                The Concise Oxford Dictionary (1995) defines it as:\r\n                <blockquote>A doubtful or difficult matter that needs to be resolved</blockquote>\r\n                and\r\n                <blockquote>Something difficult to understand, achieve or solve</blockquote>\r\n                <b>It is also worth considering our own view of the problem</b>\r\n                <p>We are constantly exposed to opportunities in life, at work, at school and at home. However, many\r\n                    opportunities are lost or are not fully exploited. We are often not sure how to take advantage of\r\n                    this opportunity and create barriers, the reasons why we cannot take advantage of it. These barriers\r\n                    can transform a potentially positive situation into a negative one - a problem.</p>\r\n                <p>Are we missing a big problem? It is human nature to notice and focus on small, easy-to-solve\r\n                    problems, but it is much harder to work on large problems that can cause some of the smaller\r\n                    ones.</p>\r\n                <p>When dealing with a potential problem, consider the following questions:</p>\r\n                <p>Is the problem a real problem or is it just how we perceive it</p>\r\n                <p>Is this problem a chance?</p>\r\n                <p>Does the problem need a solution?</p>\r\n            </Block>\r\n            <Block strong>\r\n                <BlockTitle bold><b>All problems have two common features: goals and barriers</b></BlockTitle>\r\n                <h3>Goals</h3>\r\n                <b>Problems include actions to achieve a certain objective or desired state of affairs and may include\r\n                    avoiding a situation or event</b>\r\n                <p>Goals can be anything you want to achieve or where you want to be. If you're hungry, your goal is\r\n                    probably to eat something. If you are an entrepreneur, your main goal is to make a profit from\r\n                    revenues, and this main goal may need to be divided into many sub-goals to achieve the ultimate goal\r\n                    of obtaining these profits.</p>\r\n                <h3>Barriers</h3>\r\n                <b>If there were no barriers to achieving the goal, there would be no problems. Problem solving is about\r\n                    overcoming barriers or obstacles that prevent you from reaching your goal immediately.</b>\r\n                <p>According to our examples above, if you feel hungry your goal is food. The lack of food may be a\r\n                    barrier to this. So you should go to the store and buy food, removing the barrier and solving this\r\n                    problem. There may be many more barriers for entrepreneurs, so try to recognize them and remove or\r\n                    find other ways to achieve your business goals.</p>\r\n            </Block>\r\n            <Block>\r\n                <p>Trying to solve a complex problem may be a mistake. An old adage says \"a common problem is a halved\r\n                    problem.\" So sharing a problem with someone else can be a good way to get closer to it.</p>\r\n            </Block>\r\n            <Block>\r\n                <h2>Stages of problem solving</h2>\r\n                <b>Successful troubleshooting usually involves a series of steps or steps, such as those described\r\n                    below.</b>\r\n                <h3>1. Problem identification</h3>\r\n                <b>This stage includes: detection and diagnosis of the problem; determining the nature of the problem;\r\n                    problem definition</b>\r\n                <p>The first phase of problem solving may seem obvious, but often requires more reflection and analysis.\r\n                    Identifying the problem alone can be a difficult task. Is this a problem at all? What is the nature\r\n                    of the problem, are there really many problems? What is the best way to define a problem? By\r\n                    spending some time defining a problem, you will not only understand it better, but you will be able\r\n                    to convey its nature to others, which leads to the second phase.</p>\r\n                <h3>2. Problem structure</h3>\r\n                <b>This stage includes: observation period, careful control, establishing facts and developing a clear\r\n                    picture of the problem</b>\r\n                <p>After identifying the problem, structuring it involves obtaining additional information about the\r\n                    problem and increasing understanding. In this phase, it's about establishing facts and analyzing,\r\n                    building a more comprehensive picture of both the goal (s) and the barrier (barriers). This stage\r\n                    may not be necessary for very simple problems, but is necessary for problems of a more complex\r\n                    nature</p>\r\n                <h3>3. Searching for possible solutions</h3>\r\n                <b>At this stage, you will generate a number of possible courses of action, but with little attempt to\r\n                    evaluate them at this stage</b>\r\n                <p>Based on the information gathered in the first two phases of the problem solving structure, it's time\r\n                    to start thinking about possible solutions to the identified problem. In a group situation, this\r\n                    stage is often carried out as a brainstorming process, allowing each person in the group to express\r\n                    their views on possible solutions (or partial solutions). In organizations, different people will\r\n                    have different expertise in different areas, and it is therefore useful to hear the views of each\r\n                    stakeholder</p>\r\n                <h3>4. Decision making</h3>\r\n                <b>This stage involves analyzing various possible directions of action and then selecting the best\r\n                    solution to implement</b>\r\n                <p>This is perhaps the most complex part of the problem solving process. Continuing the previous step,\r\n                    it's time to look at each potential solution and thoroughly analyze it. Some solutions may not be\r\n                    possible due to other problems, such as time limits or budgets. At this stage, it is also important\r\n                    to think about what can happen if nothing is done to solve the problem - sometimes trying to solve a\r\n                    great problem that leads to many other problems requires very creative thinking and innovative\r\n                    ideas.</p>\r\n                <p>Finally, decide what course of action - making decisions is an important skill. (About this subpage\r\n                    to earn)</p>\r\n                <h3>5. Implementation</h3>\r\n                <b>This stage involves adopting and carrying out the chosen course of action</b>\r\n                <p>Implementation means acting on the chosen solution. During implementation, more problems may arise,\r\n                    especially if the identification or structure of the original problem has not been fully carried\r\n                    out.</p>\r\n                <h3>6. Monitoring / seeking opinions</h3>\r\n                <b>The last stage concerns the review of the results of solving problems in a given period, including\r\n                    obtaining feedback on the success of the results of the chosen solution</b>\r\n                <p>The final troubleshooting step is to check if the process was successful. This can be achieved by\r\n                    monitoring and receiving feedback from people affected by any changes. It is good practice to record\r\n                    the results and any additional problems that arise.</p>\r\n            </Block>\r\n        </Page>;\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {\r\n    Block,\r\n    BlockTitle,\r\n    Button,\r\n    Col,\r\n    Link,\r\n    List,\r\n    ListItem,\r\n    Navbar,\r\n    NavLeft,\r\n    NavRight,\r\n    NavTitle,\r\n    Page,\r\n    Row,\r\n    Toolbar,\r\n} from 'framework7-react';\r\n\r\n\r\nexport default class SandboxPage extends Component {\r\n    displayName = 'HomePage';\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n        console.log('HomePage.props', props);\r\n        console.log('context', context);\r\n    }\r\n\r\n    render() {\r\n        return <Page>\r\n            <Navbar>\r\n                <NavLeft>\r\n                    <Link slot=\"title\" icon=\"fad fa-chevron-left\" panelOpen=\"left\"/>\r\n                </NavLeft>\r\n                <NavTitle>\r\n                    Piaskownica\r\n                    <span className=\"subtitle\">Fun and checking components</span>\r\n                </NavTitle>\r\n                <NavRight>\r\n                    <Link color=\"black\" icon=\"fad fa-arrow-to-left\" panelOpen=\"right\"/>\r\n                </NavRight>\r\n            </Navbar>\r\n            <Toolbar bottom>\r\n                <Link>Left Link</Link>\r\n                <Link>Right Link</Link>\r\n            </Toolbar>\r\n            <br/><br/>\r\n            <BlockTitle>Navigation</BlockTitle>\r\n            <List>\r\n                <ListItem link=\"/about/\" title=\"About\"/>\r\n                <ListItem link=\"/form/\" title=\"Form\"/>\r\n            </List>\r\n            <BlockTitle>Modals</BlockTitle>\r\n            <Block strong>\r\n                <Row>\r\n                    <Col width=\"50\">\r\n                        <Button fill raised popupOpen=\"#popup\">Popup</Button>\r\n                    </Col>\r\n                    <Col width=\"50\">\r\n                        <Button fill raised loginScreenOpen=\"#login-screen\">Login Screen</Button>\r\n                    </Col>\r\n                </Row>\r\n            </Block>\r\n            <BlockTitle>Panels</BlockTitle>\r\n            <Block strong>\r\n                <Row>\r\n                    <Col width=\"50\">\r\n                        <Button fill raised panelOpen=\"left\">Left Panel</Button>\r\n                    </Col>\r\n                    <Col width=\"50\">\r\n                        <Button fill raised panelOpen=\"right\">Right Panel</Button>\r\n                    </Col>\r\n                </Row>\r\n            </Block>\r\n            <List>\r\n                <ListItem link=\"/dynamic-route/blog/45/post/125/?foo=bar#about\" title=\"Dynamic Route\"/>\r\n                <ListItem link=\"/load-something-that-doesnt-exist/\" title=\"Default Route (404)\"/>\r\n            </List>\r\n        </Page>;\r\n    }\r\n}\r\n","import React from 'react';\r\nimport {App, View} from \"framework7-react\";\r\nimport AppConfig from \"./Config/AppConfig\";\r\nimport HomePage from \"./Pages/HomePage\";\r\nimport ResourceConfig from \"./Patterns/Facade/ResourceConfig\";\r\nimport PanelLeftPage from \"./Pages/PanelLeftPage\";\r\nimport PanelRightPage from \"./Pages/PanelRightPage\";\r\nimport FormPage from \"./Pages/FormPage\";\r\nimport AboutPage from \"./Pages/AboutPage\";\r\nimport DynamicRoutePage from \"./Pages/DynamicRoutePage\";\r\nimport NotFoundPage from \"./Pages/NotFoundPage\";\r\nimport ProblemResolverPage from \"./Pages/ProblemResolverPage\";\r\nimport SandboxPage from \"./Pages/SandboxPage\";\r\n\r\nconst resourceConfig = new ResourceConfig();\r\n\r\nexport default class Shell extends React.Component {\r\n    displayName = this.__proto__.constructor.name;\r\n    static contextType = React.createContext(resourceConfig._form);\r\n    _config;\r\n    app;\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n\r\n        const appConfig = new AppConfig();\r\n        appConfig.addAsyncRoute('home', '/', {\r\n            component: HomePage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            context: appConfig,\r\n        });\r\n        appConfig.addAsyncRoute('problemResolver', '/problem-resolver/', {\r\n            component: ProblemResolverPage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            context: appConfig,\r\n        });\r\n        // appConfig.addAsyncRoute('kpir', '/kpir/', {\r\n        //     component: KpirPage,\r\n        // }, {\r\n        //     transition: 'f7-cover-v',\r\n        //     context: appConfig,\r\n        // });\r\n        appConfig.addAsyncRoute('sandbox', '/sandbox/', {\r\n            component: SandboxPage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            context: appConfig,\r\n        });\r\n        appConfig.addAsyncRoute('panelLeft', '/panel-left/', {\r\n            component: PanelLeftPage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            context: appConfig,\r\n        });\r\n        appConfig.addAsyncRoute('panelRight', '/panel-right/', {\r\n            component: PanelRightPage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            context: appConfig,\r\n        });\r\n        appConfig.addAsyncRoute('simpleForm', '/form/', {\r\n            component: FormPage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            context: appConfig,\r\n        });\r\n        appConfig.addAsyncRoute('form', '/form/:formName/', {\r\n            component: FormPage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            context: appConfig,\r\n        });\r\n        appConfig.addAsyncRoute('about', '/about/', {\r\n            component: AboutPage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            context: appConfig,\r\n        });\r\n        appConfig.addAsyncRoute('dynamicPage', '/dynamic-route/blog/:blogId/post/:postId/', {\r\n            component: DynamicRoutePage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            // context:    appConfig,\r\n        });\r\n        appConfig.addAsyncRoute('notFounPage', '(.*)', {\r\n            component: NotFoundPage,\r\n        }, {\r\n            transition: 'f7-cover-v',\r\n            // context:    appConfig,\r\n        });\r\n        this._config = appConfig;\r\n\r\n\r\n        // console.log('this', this);\r\n        // console.log('this.context', this.context);\r\n        console.log('appConfig', appConfig);\r\n\r\n        this.state = {};\r\n        this.deferredPrompt = null;\r\n\r\n        // this.$f7.api.init().then(() => {\r\n        //     console.log('api',this.app.api.resource);\r\n        // });\r\n    }\r\n\r\n\r\n    componentDidMount = () => {\r\n        console.log(`${this.displayName} is mounting`, this);\r\n        this.app = this.$f7;\r\n\r\n        window.addEventListener('beforeinstallprompt', e => {\r\n            // Stash the event so it can be triggered later.\r\n            this.deferredPrompt = e;\r\n\r\n            this.setState({\r\n                showInstallButton: true,\r\n            });\r\n        });\r\n        window.addEventListener(\"online\", () => {\r\n            console.log('online listener');\r\n            this.setState({\r\n                online: true,\r\n            });\r\n        });\r\n        window.addEventListener(\"offline\", async () => {\r\n            console.log('offline listener');\r\n            this.setState({\r\n                online: false,\r\n            });\r\n        });\r\n\r\n        // console.log('this.app', this.app);\r\n\r\n        this.app.utils.extend(this.app, {\r\n            _config: this._config,\r\n            event: this.event,\r\n            handle: this.handle,\r\n        });\r\n\r\n        this.app.logger.startProcess('init IndexedDB data');\r\n        this.app.api.init().then(() => {\r\n            this._config.data = this.app.api.resource.data;\r\n            this.app.logger.info(this._config.data);\r\n            this.setState(this.state);\r\n        });\r\n        this.app.logger.endProcess();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <App params={this._config}>\r\n                <View main url=\"/\" pushState/>\r\n            </App>\r\n        );\r\n    }\r\n\r\n\r\n    handle = {\r\n        formSubmit: async (e) => {\r\n            console.group(`handle.formSubmit w ${this.displayName}`);\r\n\r\n            let ref = this.ref;\r\n            if (this.constructor.name.indexOf('Decorator') !== -1) {\r\n                ref = this._concreteFormComponent.ref;\r\n            }\r\n\r\n            const dataset = ref[this.props.formName].current.dataset;\r\n            const formName = dataset.form;\r\n            const formData = this.state.form;\r\n\r\n            let stateAfterSubmit = {};\r\n\r\n            await this.$f7.methods.formSubmit(formName, formData, this._configForm).then(entity => {\r\n                console.log(`Here we can do something with freshly saved ${formName}:`, entity);\r\n                this.handle.formClose(formName);\r\n            }).catch(validationError => {\r\n                console.error('validationError', validationError);\r\n                if (typeof validationError === 'string') {\r\n                    throw new Error('validationError');\r\n                } else {\r\n                    console.log('validationError', typeof validationError, validationError);\r\n                }\r\n                let stateErrors = this.state.errors || {};\r\n                stateErrors[formName] = validationError.errors;\r\n\r\n                stateAfterSubmit = Object.assign(this.state, {\r\n                    errors: stateErrors,\r\n                });\r\n            });\r\n\r\n            await this.setState(stateAfterSubmit);\r\n\r\n        },\r\n        controlChange: (e) => {\r\n            const control = e.currentTarget;\r\n            const dataset = control.closest('form').dataset;\r\n\r\n            let fieldConfig;\r\n            if (this.settings.fields[control.name]) {\r\n                fieldConfig = this.settings.fields[control.name];\r\n            } else {\r\n                fieldConfig = this.settings.fields[dataset.form].collection;\r\n            }\r\n\r\n            if (fieldConfig) {\r\n                if (fieldConfig.event && fieldConfig.event['beforeChange'] && typeof this.event[fieldConfig.event['beforeChange']] === 'function') {\r\n                    this.event[fieldConfig.event['beforeChange']](e);\r\n                }\r\n                let value = control.value;\r\n                if (control.type === 'checkbox') {\r\n                    value = control.checked;\r\n                }\r\n\r\n                this.setState(prevState => {\r\n                    const newState = {...prevState};\r\n                    newState.form[control.name] = value;\r\n                    this.storage[this.formName][control.name] = value;\r\n                    this.$f7.form.storeFormData(`${this.formName}-form`, this.storage[this.formName]);\r\n                    return newState;\r\n                });\r\n\r\n                //update local storage\r\n                if (fieldConfig.event && fieldConfig.event['afterChange'] !== undefined && typeof this.event[fieldConfig.event['afterChange']] === 'function') {\r\n                    this.event[fieldConfig.event['afterChange']](e);\r\n                }\r\n            }\r\n        },\r\n        controlCalendarChange: (value, fieldName, form) => {\r\n            if (this.state\r\n                && ((!this.state.form[fieldName] && value) ||\r\n                    (this.state.form[fieldName] && value.toString() !== this.state.form[fieldName].toString()))\r\n            ) {\r\n                this.setState(prevState => {\r\n                    const newState = {...prevState};\r\n                    newState.form[fieldName] = value[0] ? value[0].toISOString().slice(0, 10) : [];\r\n                    // this.settings.storage[dataset.form][fieldName] = newState.form[dataset.form][fieldName];\r\n                    return newState;\r\n                });\r\n            }\r\n        },\r\n        formClose: (form) => {\r\n            if (form.currentTarget) {\r\n                console.log('closing form2', form.currentTarget);\r\n            }\r\n            let formName = '';\r\n            if (typeof form === 'string') {\r\n                formName = form;\r\n            } else {\r\n                console.error('The form is:', form);\r\n                formName = this.formName;\r\n            }\r\n\r\n            if (this.$f7.views.main.router.currentRoute['modal'].opened) {\r\n                this.$f7.views.main.router.back();\r\n\r\n                delete this._api.forms[formName];\r\n                this._api.formsQueue.pop();\r\n            } else {\r\n                console.log('Modal is already closed');\r\n            }\r\n        },\r\n    };\r\n\r\n    event = {\r\n        installApp: () => {\r\n            // Show the prompt\r\n            this.deferredPrompt.prompt();\r\n            // Wait for the user to respond to the prompt\r\n            this.deferredPrompt.userChoice\r\n                .then((choiceResult) => {\r\n                    if (choiceResult.outcome === 'accepted') {\r\n                        console.log('User accepted the A2HS prompt');\r\n                        this.setState({\r\n                            showInstallButton: false,\r\n                        });\r\n                    } else {\r\n                        console.log('User dismissed the A2HS prompt');\r\n                    }\r\n                    this.deferredPrompt = null;\r\n                });\r\n        },\r\n        projectChange: (e) => {\r\n            const control = e.currentTarget;\r\n            this.app.api.resource.setCurrent(control.value, 'company').then(result => {\r\n                this.setState({\r\n                    current: result,\r\n                });\r\n            });\r\n        },\r\n    };\r\n\r\n\r\n}\r\n","import OwnerConfig from \"./FormConfig/OwnerConfig\";\r\nimport CompanyConfig from \"./FormConfig/CompanyConfig\";\r\nimport BankAccountConfig from \"./FormConfig/BankAccountConfig\";\r\nimport ContractorConfig from \"./FormConfig/ContractorConfig\";\r\nimport InvoiceConfig from \"./FormConfig/InvoiceConfig\";\r\nimport InvoiceItemConfig from \"./FormConfig/InvoiceItemConfig\";\r\nimport EconomicEventConfig from \"./FormConfig/EconomicEventConfig\";\r\nimport EconomicOperationConfig from \"./FormConfig/EconomicOperationConfig\";\r\nimport IntproofConfig from \"./FormConfig/IntproofConfig\";\r\nimport IntproofItemConfig from \"./FormConfig/IntproofItemConfig\";\r\n\r\nexport default class ResourceConfig {\r\n    _form = {\r\n        owner: new OwnerConfig(),\r\n        company: new CompanyConfig(),\r\n        bankAccount: new BankAccountConfig(),\r\n        contractor: new ContractorConfig(),\r\n        economicEvent: new EconomicEventConfig(),\r\n        economicOperation: new EconomicOperationConfig(),\r\n        invoice: new InvoiceConfig(),\r\n        invoiceItem: new InvoiceItemConfig(),\r\n        intproof: new IntproofConfig(),\r\n        intproofItem: new IntproofItemConfig(),\r\n    };\r\n\r\n    getFormConfig = (formName) => {\r\n        return this._form[formName];\r\n    };\r\n\r\n    /**\r\n     * Generuje IRI dla danej encji\r\n     * (uwzględnia IRI dla ownera)\r\n     *\r\n     * @param entityName - nazwa encji\r\n     * @param ownerId - id właściciela firmy\r\n     * @returns {string}\r\n     */\r\n    getIRI = (entityName, ownerId) => {\r\n        if (entityName === 'owner') {\r\n            const entityConfig = this.getFormConfig(entityName);\r\n            const ownerConfig = this.getFormConfig('owner');\r\n            console.log('entityConfig', entityConfig);\r\n            console.log('ownerConfig', ownerConfig);\r\n            return `/api/${entityName !== 'owner' ? 'kpir/' : ''}${entityConfig.apiConfig.action}/${ownerId}`;\r\n        } else {\r\n            throw new Error(`No IRI generated for entity ${entityName}`);\r\n        }\r\n    };\r\n}","import Helper from \"./Helpers/Helper\";\r\n\r\nlet logInside = true;\r\n\r\nconst HelperPlugin = {\r\n    name: 'helper',\r\n    // extend app params with helper params\r\n    params: {\r\n        helper: false,\r\n    },\r\n    create: function () {\r\n        const app = this;\r\n        // extend app methods with helper methods when app instance just created\r\n        app.helper = Helper;\r\n\r\n        app.helper.enable = () => {\r\n            logInside = true;\r\n        };\r\n        app.helper.disable = () => {\r\n            logInside = false;\r\n        };\r\n    },\r\n    on: {\r\n        init: function () {\r\n            const app = this;\r\n            if (app.params.helper) logInside = true;\r\n            if (logInside) console.log('HelperPlugin init');\r\n        },\r\n    },\r\n};\r\nexport default HelperPlugin;","// const getStackTrace = function () {\r\n//     const obj = {};\r\n//     Error.captureStackTrace(obj, getStackTrace);\r\n//     return obj.stack;\r\n// };\r\nconst color = {\r\n    log: {\r\n        text: '#fff',\r\n        bg: '#242424',\r\n    },\r\n    info: {\r\n        text: '#fff',\r\n        bg: '#287aec',\r\n    },\r\n    success: {\r\n        text: '#fff',\r\n        bg: '#339529',\r\n    },\r\n    warning: {\r\n        // text: '#ffdd9e',\r\n        text: '#403827',\r\n        bg: '#f5bd00',\r\n    },\r\n    error: {\r\n        text: '#ff8080',\r\n        bg: '#290000',\r\n    },\r\n    intention: {\r\n        text: '#000',\r\n        bg: '#65b72d',\r\n    },\r\n    effect: {\r\n        text: '#ffc122',\r\n        bg: '#65b72d',\r\n    },\r\n    todo: {\r\n        text: '#a8c023',\r\n        bg: '#242424',\r\n    },\r\n    keys: {\r\n        value: '#c93a36',\r\n        key: '#c863d0',\r\n    },\r\n};\r\nconst defaultCollapsed = true;\r\n\r\nexport default class Log {\r\n    static state = 'standby';\r\n\r\n    static helper;\r\n\r\n    static _source = (obj) => {\r\n        const lines = obj.stack.split(\"\\n\");\r\n        // console.info('lines', lines);\r\n        const result = {\r\n            lines: lines,\r\n            lineObjects: [],\r\n        };\r\n\r\n        const regex = /at\\s([^(]+)\\s\\((.*):(\\d+):(\\d+)\\)/g;\r\n        for (let line of lines) {\r\n            const lineObject = regex.exec(line);\r\n            result.lineObjects.push(lineObject);\r\n        }\r\n\r\n        const lineObject = result.lineObjects[2];\r\n\r\n\r\n        if (lineObject && lineObject[1] && lineObject[1].indexOf('.') !== -1) {\r\n            // return lineObject[1].split('.')[1];\r\n            // return lineObject[1];\r\n            const parts = lineObject[1].split('.');\r\n            result['object'] = parts[0];\r\n            result['function'] = parts[1];\r\n        } else {\r\n            if (lineObject && lineObject[1].indexOf('new') === 0) {\r\n                const parts = lineObject[1].split(' ');\r\n                result['object'] = parts[1];\r\n                result['function'] = 'constructor';\r\n            } else {\r\n                // const parts = lineObject[1].split('.'); \r\n                result['object'] = 'Object';\r\n                result['function'] = lineObject ? lineObject[1] : lineObject;\r\n                // return lineObject[1];\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    static _arguments = (argsData) => {\r\n        let args;\r\n\r\n        if (Array.isArray(argsData[0])) {\r\n            args = argsData[0];\r\n        } else {\r\n            args = Object.keys(argsData).map(key => argsData[key]);\r\n        }\r\n        return args;\r\n    };\r\n    static _log = (args, iterateObjects = true) => {\r\n        for (let item of args) {\r\n            if (!item) continue;\r\n\r\n            if (typeof item === 'object' && iterateObjects) {\r\n                let map = null;\r\n                if (item instanceof Map) {\r\n                    map = item;\r\n                } else {\r\n                    map = Log.helper.objectToMap(item);\r\n                }\r\n\r\n                for (let [key, value] of map) {\r\n                    if (typeof value === 'string') {\r\n                        console.log(`%c${key}%c: %c\"${value}\"%c`\r\n                            , `background: ${color.log.bg};color: ${color.keys.key};font-weight:700`\r\n                            , `background: ${color.log.bg};color: ${color.log.text}`\r\n                            , `background: ${color.log.bg};color: ${color.keys.value};font-weight:400;font-style:italic`\r\n                            , `background: ${color.log.bg};color: ${color.log.text}`,\r\n                        );\r\n                    } else {\r\n                        console.log(`%c${key}%c:`\r\n                            , `background: ${color.log.bg};color: ${color.keys.key};font-weight:700`\r\n                            , `background: ${color.log.bg};color: ${color.log.text}`\r\n                            , value,\r\n                        );\r\n                    }\r\n                }\r\n            } else {\r\n                console.log(item);\r\n            }\r\n        }\r\n        console.groupCollapsed('trace:');\r\n        console.trace();\r\n        console.groupEnd();\r\n    };\r\n\r\n    static extractNames = (objectNames, preparationFunction) => {\r\n        const objectLines = [];\r\n        // eslint-disable-next-line\r\n        for (let [index, lineObject] of objectNames.lineObjects.entries()) {\r\n            if (lineObject === null || lineObject[1].indexOf(preparationFunction) !== -1) {\r\n                continue;\r\n            } else {\r\n            // console.log('index',index);\r\n                objectLines.push(lineObject);\r\n            }\r\n        }\r\n        const source = {\r\n            object: '',\r\n            function: '',\r\n        };\r\n        if (objectLines[0]) {\r\n            const atObjectLineText = objectLines[0][1];\r\n            if (atObjectLineText.indexOf('new') === 0) {\r\n                source.object = atObjectLineText.substr(4);\r\n                source.function = 'constructor()';\r\n            } else if (atObjectLineText.indexOf('.') !== -1) {\r\n                source.object = atObjectLineText.substr(0, atObjectLineText.indexOf('.'));\r\n                source.function = atObjectLineText.substr(atObjectLineText.indexOf('.') + 1) + '()';\r\n            }\r\n        }\r\n        return source\r\n    };\r\n\r\n    /** @private */\r\n    static _prepareArgs(givenArgs) {\r\n        const obj = {};\r\n        Error.captureStackTrace(obj);\r\n        let args = this._arguments(givenArgs);\r\n\r\n\r\n        const objectNames = this._source(obj);\r\n\r\n        const source = this.extractNames(objectNames, '_prepareArgs');\r\n        return {args, source};\r\n    }\r\n\r\n    static startProcess = (processTitle) => {\r\n        Log.state = 'process';\r\n        // console.clear();\r\n        console.group('Process:', processTitle);\r\n    };\r\n    static endProcess = () => {\r\n        Log.state = 'standby';\r\n        console.groupEnd();\r\n        console.info('PROCESS ENDED');\r\n    };\r\n\r\n    static intention() {\r\n        let {args, source} = this._prepareArgs(arguments);\r\n\r\n        console.groupCollapsed(`%cIntention%c of %c${source.object}%c ${source.function}`,\r\n            `background: ${color.intention.bg};color: ${color.intention.text};border:1px solid ${Log.state === 'process' ? '#ff0020' : '#aaa'};font-weight:700;padding:1px 7px;border-radius:3px`,\r\n            `background: ${color.log.bg};color: grey`,\r\n            `background: ${color.log.bg};color: ${color.log.text};border:1px solid #aaa;color: white;font-weight:700;padding:1px 7px;border-radius:3px`,\r\n            `background: ${color.log.bg};color: ${color.log.text}`);\r\n        this._log(args, false);\r\n        console.groupEnd();\r\n    }\r\n\r\n    static effect() {\r\n        let {args, source} = this._prepareArgs(arguments);\r\n\r\n        console.groupCollapsed(`%cEffect%c of %c${source.object}%c ${source.function}`,\r\n            `background: ${color.effect.bg};color: ${color.effect.text};border:1px solid ${Log.state === 'process' ? '#ff0020' : '#aaa'};font-weight:700;padding:1px 7px;border-radius:3px`,\r\n            `background: ${color.log.bg};color: grey`,\r\n            `background: ${color.log.bg};color: ${color.log.text};border:1px solid #aaa;color: white;font-weight:700;padding:1px 7px;border-radius:3px`,\r\n            `background: ${color.log.bg};color: ${color.log.text}`);\r\n        this._log(args, false);\r\n        console.groupEnd();\r\n    }\r\n\r\n    static todo() {\r\n        let {args, source} = this._prepareArgs(arguments);\r\n\r\n        console.groupCollapsed(`%cTODO%c in %c${source.object}%c ${source.function}`,\r\n            `background: ${color.todo.bg};color: ${color.todo.text};border:1px solid ${Log.state === 'process' ? '#ff0020' : '#aaa'};font-weight:700;padding:1px 7px;border-radius:3px`,\r\n            `background: ${color.log.bg};color: grey`,\r\n            `background: ${color.log.bg};color: ${color.log.text};border:1px solid #aaa;color: white;font-weight:700;padding:1px 7px;border-radius:3px`,\r\n            `background: ${color.log.bg};color: ${color.log.text}`);\r\n        this._log(args, false);\r\n        console.groupEnd();\r\n    }\r\n\r\n\r\n    static log() {\r\n        // console.log('arguments', arguments);\r\n        let {args, source} = this._prepareArgs(arguments);\r\n\r\n        console[`group${defaultCollapsed ? 'Collapsed' : ''}`](`%c${source.object}%c ${source.function}`\r\n            , `background: ${color.log.bg};color: ${color.log.text};border:1px solid ${Log.state === 'process' ? '#ff0020' : '#aaa'};color: white;font-weight:700;padding:1px 7px;border-radius:3px`\r\n            , `background: ${color.log.bg};color: ${color.log.text}`);\r\n        this._log(args);\r\n        console.groupEnd();\r\n    }\r\n\r\n    static info() {\r\n        let {args, source} = this._prepareArgs(arguments);\r\n\r\n        console[`group${defaultCollapsed ? 'Collapsed' : ''}`](`%cInfo%c %c${source.object}%c ${source.function}`\r\n            , `background: ${color.info.bg};color: ${color.info.text};font-weight:700;border:1px solid ${Log.state === 'process' ? '#ff0020' : '#aaa'};padding:2px 7px;border-radius:3px;`, `background: ${color.log.bg};color: ${color.log.text}`\r\n            , `background: ${color.log.bg};color: ${color.log.text};border:1px solid #aaa;color: white;font-weight:700;padding:1px 7px;border-radius:3px`\r\n            , `background: ${color.log.bg};color: ${color.log.text}`);\r\n        this._log(args);\r\n        console.groupEnd();\r\n    }\r\n\r\n\r\n    static success() {\r\n        let {args, source} = this._prepareArgs(arguments);\r\n\r\n        console[`group${defaultCollapsed ? 'Collapsed' : ''}`](`%cSuccess%c %c${source.object}%c ${source.function}`\r\n            , `background: ${color.success.bg};color: ${color.success.text};font-weight:700;border:1px solid ${Log.state === 'process' ? '#ff0020' : '#aaa'};padding:2px 7px;border-radius:3px;`, `background: ${color.log.bg};color: ${color.log.text}`\r\n            , `background: ${color.log.bg};color: ${color.log.text};border:1px solid #aaa;color: white;font-weight:700;padding:1px 7px;border-radius:3px`\r\n            , `background: ${color.log.bg};color: ${color.log.text}`);\r\n        this._log(args);\r\n        console.groupEnd();\r\n    }\r\n\r\n    static warning() {\r\n        let {args, source} = this._prepareArgs(arguments);\r\n\r\n        console[`group${defaultCollapsed ? 'Collapsed' : ''}`](`%cWarning%c %c${source.object}%c ${source.function}`\r\n            , `background: ${color.warning.bg};color: ${color.warning.text};font-weight:700;border:1px solid ${Log.state === 'process' ? '#ff0020' : color.warning.text};padding:2px 7px;border-radius:3px;`, `background: ${color.log.bg};color: ${color.log.text}`\r\n            , `background: ${color.log.bg};color: ${color.log.text};border:1px solid #aaa;color: white;font-weight:700;padding:1px 7px;border-radius:3px`\r\n            , `background: ${color.log.bg};color: ${color.log.text}`);\r\n        this._log(args);\r\n        console.groupEnd();\r\n    }\r\n\r\n    static error() {\r\n        let {args, source} = this._prepareArgs(arguments);\r\n\r\n        const errorObject = args[0];\r\n        const errorType = errorObject.name;\r\n        const errorMessage = errorObject.message;\r\n\r\n        console[`group${defaultCollapsed && !errorType ? 'Collapsed' : ''}`](`%c${errorType ? errorType : 'Error'}%c in %c${source.object}%c ${source.function}`\r\n            , `background: ${color.error.bg};color: ${color.error.text};font-weight:700;border:1px solid ${Log.state === 'process' ? '#ff0020' : color.error.text};padding:2px 7px;border-radius:3px;`, `background: ${color.log.bg};color: ${color.log.text}`\r\n            , `background: ${color.log.bg};color: ${color.log.text};border:1px solid #aaa;color: white;font-weight:700;padding:1px 7px;border-radius:3px`\r\n            , `background: ${color.log.bg};color: ${color.log.text}`);\r\n        if (errorMessage) {\r\n            console.error(errorMessage);\r\n        } else {\r\n            this._log(args);\r\n        }\r\n        console.groupEnd();\r\n    }\r\n\r\n}\r\n","import Log from \"./Helpers/Log\";\r\n\r\nlet logInside = false;\r\n\r\nconst LoggerPlugin = {\r\n    name: 'logger',\r\n    // extend app params with debugger params\r\n    params: {\r\n        logger: false,\r\n    },\r\n    create: function () {\r\n        const app = this;\r\n        // extend app methods with debugger methods when app instance just created\r\n        app.logger = Log;\r\n        if (app.helper) {\r\n            app.logger.helper = app.helper;\r\n        } else {\r\n            throw new Error('You have to install HelperPlugin before LogPlugin');\r\n        }\r\n\r\n        app.logger.enable = () => {\r\n            logInside = true;\r\n        };\r\n        app.logger.disable = () => {\r\n            logInside = false;\r\n        };\r\n    },\r\n    on: {\r\n        init: function () {\r\n            const app = this;\r\n            if (app.params.log) logInside = true;\r\n            if (logInside) console.log('LoggerPlugin init');\r\n        },\r\n        pageBeforeIn: function (page) {\r\n            if (logInside) console.log('pageBeforeIn', page);\r\n        },\r\n        pageAfterIn: function (page) {\r\n            if (logInside) console.log('pageAfterIn', page);\r\n        },\r\n        pageBeforeOut: function (page) {\r\n            if (logInside) console.log('pageBeforeOut', page);\r\n        },\r\n        pageAfterOut: function (page) {\r\n            if (logInside) console.log('pageAfterOut', page);\r\n        },\r\n        pageInit: function (page) {\r\n            if (logInside) console.log('pageInit', page);\r\n        },\r\n        pageBeforeRemove: function (page) {\r\n            if (logInside) console.log('pageBeforeRemove', page);\r\n        },\r\n    },\r\n};\r\nexport default LoggerPlugin;","// import {contextConfig} from \"../../Context/Contexts\";\r\n\r\nexport default class Resource {\r\n    displayName = this.constructor.name;\r\n    config = {\r\n        dbName: 'kpir',\r\n        version: 1,\r\n        tables: {\r\n            config: {name: 'config'},\r\n            current: {name: 'current'},\r\n            company: {name: 'company', keyPath: ['owner', 'id']},\r\n            book: {name: 'book', keyPath: ['owner', 'company', 'id']},\r\n            settlement: {name: 'settlement', keyPath: ['owner', 'company', 'book', 'id']},\r\n            document: {name: 'document', keyPath: ['owner', 'company', 'book', 'settlement', 'id']},\r\n            invoice: {name: 'invoice', keyPath: ['owner', 'company', 'book', 'settlement', 'document', 'id']},\r\n            intproof: {\r\n                name: 'intproof',\r\n                keyPath: ['owner', 'company', 'book', 'settlement', 'document', 'id'],\r\n            },\r\n            economicEvent: {name: 'economicEvent', keyPath: ['owner', 'company', 'id']},\r\n            economicOperation: {name: 'economicOperation', keyPath: ['owner', 'company', 'economicEvent', 'id']},\r\n        },\r\n        entity: {\r\n            user: {table: 'config'},\r\n            owner: {table: 'config'},\r\n            company: {table: 'company'},\r\n            book: {table: 'book'},\r\n            settlement: {table: 'settlement'},\r\n            document: {table: 'document'},\r\n            invoice: {table: 'invoice'},\r\n            intproof: {table: 'intproof'},\r\n            economicEvent: {table: 'economicEvent'},\r\n            economicOperation: {table: 'economicOperation'},\r\n        },\r\n    };\r\n    db = null;\r\n    data = {\r\n        config: {},\r\n        current: {},\r\n        collection: {},\r\n    };\r\n\r\n    log = [];\r\n\r\n    init(config) {\r\n        console.log(`${this.displayName}.init()`, config);\r\n\r\n        this.url = config.url;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Intencją tej metody jest skonfigurowanie bazy\r\n     *\r\n     * @param data\r\n     * @param namespace\r\n     */\r\n    setupDB = async (data, namespace) => {\r\n        const self = this;\r\n        if (!namespace) {\r\n            namespace = self.config.dbName;\r\n        }\r\n        return await new Promise(function (resolve, reject) {\r\n            let db;\r\n            if (namespace !== self.config.dbName) {\r\n                db = null;\r\n            }\r\n\r\n            // If setupDB has already been run and the database was set up, no need to\r\n            // open the database again; just run our callback and return!\r\n            if (db) {\r\n                // callback();\r\n                resolve(self.db);\r\n                return;\r\n            }\r\n\r\n            let dbName = namespace === '' ? self.config.dbName : namespace;\r\n            let dbOpen = indexedDB.open(dbName, self.config.version);\r\n\r\n            // Fires when the version of the database goes up, or the database is created\r\n            // for the first time\r\n            dbOpen.onupgradeneeded = e => {\r\n                db = e.target['result'];\r\n                if (data) {\r\n                    //Jeśli są dane przy otwieraniu bazy tzn że trzeba utworzyć tabele, inaczej nie ma co zaśmiecać\r\n                    // pamięci. Taka sytuacje jest wtedy go na stronę wejzdie gośc i sobie będzie chciał poklikać\r\n                    // bez tworzenia tabel w bazie\r\n\r\n                    const dbTables = Object.keys(self.config.tables);\r\n\r\n                    for (let table of dbTables) {\r\n                        if (!self.config.tables[table]) {\r\n                            throw new Error(`Tabela '${table}' nie jest skonfigurowana do użycia w IndexedDB`);\r\n                        }\r\n                        if (!db.objectStoreNames.contains(self.config.tables[table].name)) {\r\n                            if (self.config.tables[table].keyPath) {\r\n                                const objectStore = db.createObjectStore(self.config.tables[table].name, {\r\n                                    keyPath: self.config.tables[table].keyPath,\r\n                                });\r\n                                if (Array.isArray(self.config.tables[table].keyPath)) {\r\n                                    for (let key of self.config.tables[table].keyPath) {\r\n                                        objectStore.createIndex(key, key, {unique: false, multiEntry: true});\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                db.createObjectStore(self.config.tables[table].name);\r\n                            }\r\n                        }\r\n                    }\r\n                    console.groupEnd();\r\n                } else if (db.objectStoreNames.length === 0) {\r\n                    e.target['transaction'].abort();\r\n                    resolve();\r\n                } else {\r\n                    console.log('no data given');\r\n                }\r\n            };\r\n\r\n            // Fires once the database is opened (and onupgradeneeded completes, if onupgradeneeded was called)\r\n            dbOpen.onsuccess = e => {\r\n                db = e.target['result'];\r\n                resolve(db);\r\n            };\r\n\r\n            // Fires when we can't open the database\r\n            dbOpen.onerror = e => {\r\n                reject(`error[${e.target['error'].code}] ${e.target['error'].message}`);\r\n            };\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Intencją tej metody jest otworzyć bazę danych do odczytu i/lub zapisu\r\n     *\r\n     * @param data\r\n     * @return {Promise<*>}\r\n     */\r\n    useDB = async (data) => {\r\n        const self = this;\r\n        if (!self.db) {\r\n            await this.setupDB(data).then(async db => {\r\n                self.db = db;\r\n                return await self.db;\r\n            });\r\n        }\r\n        return await self.db;\r\n    };\r\n\r\n    /**\r\n     * Intencją tej metody jest odczytanie wszystkich danych z bazy\r\n     */\r\n    readData = async () => {\r\n        const self = this;\r\n        return await self.useDB().then(async db => {\r\n            if (db) {\r\n                // let data = self.data;\r\n                for (let table of db.objectStoreNames) {\r\n                    await self._tableObject(table).then(result => {\r\n                        if (['config', 'current'].indexOf(table) !== -1) {\r\n                            self.data[table] = result;\r\n                        } else {\r\n                            self.data.collection[table] = result.length ? result : null;\r\n                        }\r\n                    });\r\n                }\r\n                // test for only one company\r\n                // self.data.collection.company = [self.data.collection.company[0]];\r\n                if (self.data.collection.company.length === 1) {\r\n                    await self.setCurrent(self.data.collection.company[0].id, 'company')\r\n                }\r\n                return self.data;\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Intencją tej metody jest wypełnienie bazy danych danymi $data\r\n     *\r\n     * @param data\r\n     */\r\n    fillData = async (data) => {\r\n        return await this.useDB(data).then(async () => {\r\n            for (let entityName in data) {\r\n                if (data.hasOwnProperty(entityName)) {\r\n                    await this._saveData(data[entityName], entityName);\r\n                }\r\n            }\r\n\r\n            return this.data;\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Intencją tej metody jest ustawienie w tabeli 'current' $data o kluczu $name\r\n     *\r\n     * @param data\r\n     * @param name\r\n     */\r\n    setCurrent = async (data, name) => {\r\n        //@important data powinno być konwertowalne do typu 'number'\r\n        const id = Number(data);\r\n        if (isNaN(id)) {\r\n            throw new Error(`Nierawidłowa wartość id='${data}' dla kolekcji '${name}'!`)\r\n        }\r\n        return await this.useDB().then(async () => await this._saveData(id, name));\r\n    };\r\n\r\n    /**\r\n     * Intencją tej metody jest ustawienie w tabeli 'current' $data o kluczu $name\r\n     *\r\n     * @param data\r\n     * @param name\r\n     */\r\n    setConfig = async (data, name) => {\r\n        console.log(name, data);\r\n        return await this.useDB().then(async () => await this._saveData(data, name));\r\n    };\r\n\r\n    /**\r\n     * Intencją tej metody jest dodanie/aktualizacja danych $data w tabeli kolekcji $name\r\n     *\r\n     * @param data\r\n     * @param name\r\n     */\r\n    setData = async (data, name) => {\r\n        const key = [data.owner, data.id];\r\n\r\n        return await this.useDB().then(async (db) => {\r\n            await this._saveData(data, name, key);\r\n            return data;\r\n        });\r\n    };\r\n\r\n    /**\r\n     * PRIVATE functions\r\n     */\r\n\r\n    /**\r\n     * Pobiera dane z tabeli (store) IndexedDB\r\n     *\r\n     * @param table\r\n     * @private\r\n     */\r\n    _tableObject = async (table) => {\r\n        const self = this;\r\n        return await new Promise((resolve, reject) => {\r\n            const tableObject = self.db.transaction([table]).objectStore(table);\r\n            const keyPath = tableObject.keyPath;\r\n            const request = tableObject.getAll();\r\n            const list = {};\r\n            request.onsuccess = e => {\r\n                if (keyPath) {\r\n                    return resolve(e.target.result);\r\n                } else {\r\n                    const cursorRequest = tableObject.openCursor();\r\n                    cursorRequest.onsuccess = async ce => {\r\n                        const cursor = await ce.target.result;\r\n                        if (cursor) {\r\n                            // console.log(`cursor(${cursor.key}):`, cursor.value);\r\n                            list[cursor.key] = cursor.value;\r\n                            cursor.continue();\r\n                        } else {\r\n                            // console.log(`Entries(${table}) all displayed:`, list);\r\n                            resolve(list)\r\n                        }\r\n                    };\r\n                }\r\n            };\r\n            request.onerror = (e) => {\r\n                // throw e.target['error'].message;\r\n                reject(`[readData].requestKeys: ${e.target['error'].name}(${e.target['error'].code}): ${e.target['error'].message}`);\r\n            };\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Zapisuje dane do bazy IndexedDB w zależności od predefiniowanego kontekstu zależnego od typu danych\r\n     *\r\n     * Kiedy dataType jest wartością? - wartość kluczas obiektu - (tabela current/cursor do wyszukiwania)\r\n     *  Powinniśmy dostać {keyName: $entityName, keyValue:number} e.g. {company: 3}\r\n     *  Dane powinny zoistać odczytane z odpowiedniego stora kolekcji poprzez index id\r\n     *  Date trafiają do tabeli 'current'\r\n     *\r\n     * Kiedy dataType jest obiektem? - encja o zdefiniowaym przez data kluczu - (tabela config)\r\n     *  Powinniśmy dostać {entityName:string} oraz {data:object} e.g. {entityName: $data}\r\n     *  Date trafiają do tabeli 'config'\r\n     *\r\n     * Kiedy dataType jest itemem? - entityName to nazwa store który nie jest config natomiast data jest obiektem\r\n     *  Powinniśmy dostać {entityName:string}, {data:object}, {key:keyPath} e.g. {entityName:{$key: $data}}\r\n     *  Date trafiają do tabeli 'config'\r\n     *\r\n     * Kiedy dataType jest kolekcją? - tablica obiektów kolekcji - (tabele kolekcji)\r\n     *  Powinniśmy dostać {data:array} e.g. [{entityName: $values}]\r\n     *  Date trafiają do tabel $entityName\r\n     *\r\n     * @private\r\n     * @param data - dane do zapisu\r\n     * @param entityName - nazwa tabeli/store w której mają być zapisane dane\r\n     */\r\n    _saveData = async (data, entityName, key) => {\r\n        this.log = [];\r\n        /*\r\n         const exampleData = {\r\n            //do tabeli 'current' d.w.({$klucz: $wartość}) zapisywany rekord z kolekcji $klucz o id=$wartość\r\n            company:    3,\r\n            book:       1,\r\n            settlement: 4,\r\n            document:   26,\r\n            //trafiają do tabeli 'config'\r\n            user:       {\r\n                email:        'user@company.com',\r\n                firstName:    'Aldefons',\r\n                lastNameName: 'Ownerski',\r\n            },\r\n            //trafiają do tabel wg indexu\r\n            company:    [\r\n                {\r\n                    companyName: 'Firma A',\r\n                    ...{otherValues: ''},\r\n                },\r\n                {\r\n                    companyName: 'Firma B',\r\n                    ...{otherValues: ''},\r\n                },\r\n            ],\r\n            book:       [\r\n                {\r\n                    year: 2017,\r\n                    ...{otherValues: ''},\r\n                },\r\n                {\r\n                    year: 2018,\r\n                    ...{otherValues: ''},\r\n                },\r\n            ],\r\n        };\r\n         //*/\r\n\r\n        let stores = [];\r\n\r\n\r\n        if (typeof data === 'number') {\r\n            await stores.push('current', entityName);\r\n        } else if (typeof data === 'object' && !Array.isArray(data) && !key) {\r\n            await stores.push('config');\r\n        } else if (typeof data === 'object' && Array.isArray(data) && !key) {\r\n            await stores.push(entityName);\r\n        } else if (typeof data === 'object' && !Array.isArray(data) && key) {\r\n            await stores.push(entityName);\r\n        } else {\r\n            console.error('requested data:', data);\r\n            throw new Error(`Trying to save Data in IndexedDB, but: Unsupported type of data`);\r\n        }\r\n        stores = [...new Set(stores)];\r\n\r\n        let tx = null;\r\n        if (this.db) {\r\n            tx = await this.db.transaction(stores, 'readwrite');\r\n        } else {\r\n            throw new Error('No database (self.db) defined!')\r\n        }\r\n\r\n        //executing\r\n        if (tx) {\r\n            if (typeof data === 'number') {\r\n                // console.log(`current of ${entityName}:`, data);\r\n\r\n                console.log('entityName:', entityName);\r\n\r\n                const entityData = await this._get(tx, entityName, data);\r\n                await console.log(`entityData =`, entityData);\r\n\r\n                await this._put(tx, 'current', entityData, entityName);\r\n                if (!this.data['current']) {\r\n                    this.data['current'] = {};\r\n                }\r\n                this.data['current'][entityName] = entityData;\r\n                return entityData\r\n            } else if (typeof data === 'object' && !Array.isArray(data) && !key) {\r\n                console.log(`object  of ${entityName}:`, data);\r\n                await this._put(tx, 'config', data, entityName);\r\n                if (!this.data['config']) {\r\n                    this.data['config'] = {};\r\n                }\r\n                this.data['config'][entityName] = data;\r\n                return data;\r\n            } else if (typeof data === 'object' && Array.isArray(data) && !key) {\r\n                console.log(`collection of ${entityName}`, data);\r\n                for (let item of data) {\r\n                    await this._put(tx, entityName, item);\r\n                    if (!this.data['collection']) {\r\n                        this.data['collection'] = {};\r\n                    }\r\n                    if (!this.data['collection'][entityName]) {\r\n                        this.data['collection'][entityName] = [];\r\n                    }\r\n                    await this.data['collection'][entityName].push(item);\r\n                }\r\n            } else if (typeof data === 'object' && !Array.isArray(data) && key) {\r\n                console.log(`item of ${entityName} with key(${key}):`, data['bankAccounts'][0]);\r\n                await this._put(tx, entityName, data);\r\n            } else {\r\n                console.error('requested data:', data);\r\n                throw new Error('Unsupported type of data');\r\n            }\r\n        } else {\r\n            throw new Error('No transaction (tx) defined!');\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add data to IndexedDB\r\n     *\r\n     * @param tx - rozpoczęta transakcja\r\n     * @param table - nazwa tabeli (store)\r\n     * @param data - dane do wstawienia\r\n     * @param key (optional) - klucz pod którym mają być zapisane dane\r\n     * @return {Promise<void>}\r\n     * @private\r\n     */\r\n    _add = async (tx, table, data, key) => {\r\n        const tableObject = tx.objectStore(table);\r\n        let add = null;\r\n        if (key) {\r\n            add = tableObject.add(data[key], key);\r\n        } else {\r\n            add = tableObject.add(data[key]);\r\n        }\r\n        add.onsuccess = async result => {\r\n            //event on put operation\r\n            // console.log(`put.${table}.result`, result);\r\n            this.data[table][key] = await data[key];\r\n        };\r\n    };\r\n    /**\r\n     * Put data to IndexedDB\r\n     *\r\n     * @param tx - rozpoczęta transakcja\r\n     * @param table - nazwa tabeli (store)\r\n     * @param data - dane do aktualizacji/wstawienia\r\n     * @param key (optional) - klucz pod którym mają być zapisane dane\r\n     * @return {Promise<void>}\r\n     * @private\r\n     */\r\n    _put = async (tx, table, data, key) => {\r\n        const tableObject = await tx.objectStore(table);\r\n        if (key) {\r\n            await tableObject.put(data, key);\r\n        } else {\r\n            await tableObject.put(data);\r\n        }\r\n    };\r\n    /**\r\n     * Get data from index TODO: it should get data from store by key also\r\n     *\r\n     * @param tx\r\n     * @param table\r\n     * @param key\r\n     * @private\r\n     */\r\n    _get = async (tx, table, key) => {\r\n        const tableObject = tx.objectStore(table);\r\n        return await new Promise((resolve, reject) => {\r\n            let getIndex = tableObject.index('id');\r\n            let getCursor = getIndex.openCursor(IDBKeyRange.only(key));\r\n            getCursor.onsuccess = async e => {\r\n                const cursor = e.target['result'];\r\n                await resolve(cursor.value);\r\n            };\r\n            getCursor.onerror = e => {\r\n                console.log('Zonkol: ', e.target.error);\r\n                throw new Error(`Wystąpił jednak błąd: ${e.target.error.message}`)\r\n            };\r\n        });\r\n    };\r\n    _delete = async (tx, table, key) => {\r\n        console.error('ResourceClass._delete is TODO');\r\n        throw new Error(`TODO: Należy zaimplementować ResourceClass._delete`);\r\n    };\r\n\r\n\r\n}","import Resource from \"./Api/Resource\";\r\n\r\nlet logInside = true;\r\n\r\nconst ApiPlugin = {\r\n    name: 'api',\r\n    // extend app params with resource params\r\n    params: {\r\n        api: false,\r\n    },\r\n    create: function () {\r\n        const app = this;\r\n        // extend app methods with resource methods when app instance just created\r\n        app.api = {\r\n            resource: new Resource(),\r\n            init: async () => {\r\n                return await this.api.resource.readData().then(result => {\r\n                    // console.log('Okazuje się że result to:',result);\r\n                    let resultData = null;\r\n                    if (result) {\r\n                        resultData = result;\r\n                    }\r\n                    // this.logger.log(resultData);\r\n                    return resultData;\r\n                });\r\n            },\r\n        };\r\n\r\n        app.api.enable = () => {\r\n            logInside = true;\r\n        };\r\n        app.api.disable = () => {\r\n            logInside = false;\r\n        };\r\n    },\r\n    on: {\r\n        //TODO: Here we can load IndexedDB data or other things before instantiate app\r\n        init: function () {\r\n            const app = this;\r\n            if (app.params.helper) logInside = true;\r\n            if (logInside) console.log('ApiPlugin init');\r\n\r\n\r\n        },\r\n    },\r\n};\r\nexport default ApiPlugin;","// import Resource from \"./Api/Resource\";\r\n\r\nlet logInside = true;\r\n\r\nconst PWAPlugin = {\r\n    name: 'pwa',\r\n    // extend app params with resource params\r\n    params: {\r\n        pwa: false,\r\n        installed: false,\r\n    },\r\n    create: function () {\r\n        const app = this;\r\n        // extend app methods with resource methods when app instance just created\r\n        app.pwa = {\r\n            installed: false,\r\n        };\r\n            //     resource: new Resource(),\r\n\r\n        /*\r\n        await this.app.pwa.resource.readData().then(result => {\r\n            console.log('Okazuje się że result to:', result);\r\n            let resultData = null;\r\n            if (result) {\r\n                resultData = result;\r\n            }\r\n            console.info('resultData', resultData);\r\n            this.app.data = resultData;\r\n            console.log('resource', this.app.data);\r\n        });\r\n        //*/\r\n\r\n        app.pwa.enable = () => {\r\n            logInside = true;\r\n        };\r\n        app.pwa.disable = () => {\r\n            logInside = false;\r\n        };\r\n    },\r\n    on: {\r\n        init: function () {\r\n            const app = this;\r\n            if (app.params.helper) logInside = true;\r\n            if (logInside) console.log('PWAPlugin init');\r\n        },\r\n    },\r\n};\r\nexport default PWAPlugin;","let logInside = false;\r\n\r\nconst DisplayablePlugin = {\r\n    name: 'displayable',\r\n    // extend app params with resource params\r\n    params: {\r\n        api: false,\r\n        display: {},\r\n    },\r\n    create: function () {\r\n        const app = this;\r\n        // extend app methods with resource methods when app instance just created\r\n        app.displayable = (displayName) => {\r\n\r\n            if (!this.display) this.display = {};\r\n            // const data = this.api.resource.data;\r\n            if (!app.helper) {\r\n                throw new Error('You have to install HelperPlugin before DisplayablePlugin');\r\n            }\r\n            if (!app.api) {\r\n                throw new Error('You have to install ApiPlugin before DisplayablePlugin');\r\n            }\r\n            // if (!app.pwa) {\r\n            //     throw new Error('You have to install PWAPlugin before DisplayablePlugin');\r\n            // }\r\n\r\n            switch (app.helper.lcfirst(displayName)) {\r\n                case 'resourceData':\r\n                    this.display.resourceData = app.api.resource.data && Object.keys(app.api.resource.data).length > 0;\r\n                    return this.display.resourceData;\r\n                case 'shellNavbar':\r\n                    if (!this.display.shell) this.display.shell = {};\r\n\r\n                    this.display.shell.navbar = true;\r\n                    break;\r\n                case 'panelLeft':\r\n                    if (!this.display.panel) this.display.panel = {};\r\n\r\n                    this.display.panel.left = false;\r\n                    break;\r\n                case 'panelRight':\r\n                    if (!this.display.panel) this.display.panel = {};\r\n                    this.display.panel.right = app.displayable('buttonCompany') || app.displayable('buttonLogout');\r\n                    break;\r\n                case 'company':\r\n                    this.display.company = app.api.resource.data && app.api.resource.data.current && app.api.resource.data.current.company;\r\n                    return this.display.company;\r\n                case 'companyCollection':\r\n                    this.display.companyCollection = app.api.resource.data.collection && app.api.resource.data.collection.company;\r\n                    return this.display.companyCollection;\r\n                case 'book':\r\n                    this.display.book = app.api.resource.data.collection && app.api.resource.data.collection.book;\r\n                    return this.display.book;\r\n                case 'user':\r\n                    this.display.user = app.api.resource.data && app.api.resource.data.config && app.api.resource.data.config.user;\r\n                    return this.display.user;\r\n                case 'buttonInstall':\r\n                    if (!this.display.button) this.display.button = {};\r\n                    this.display.button.install = app.online && !app.pwa.installed && app.displayable('user');\r\n                    break;\r\n                case 'buttonCompany':\r\n                    if (!this.display.button) this.display.button = {};\r\n                    this.display.button.company = app.api.resource.data && app.api.resource.data.current && app.api.resource.data.current.company &&\r\n                        app.api.resource.data.collection && app.api.resource.data.collection.company;\r\n                    break;\r\n                case 'buttonLogout':\r\n                    if (!this.display.button) this.display.button = {};\r\n                    this.display.button.logout = app.online && app.api.resource.data.config && app.api.resource.data.config.user;\r\n                    break;\r\n                default:\r\n                    console.error('zonk');\r\n                    throw new Error(`Undefined displayName`);\r\n            }\r\n\r\n\r\n            const indexes = app.helper.camelToArray(displayName);\r\n            let canDisplay = true;\r\n            if (indexes.length === 1) {\r\n                canDisplay = this.display[indexes[0]];\r\n            } else if (indexes.length === 2) {\r\n                canDisplay = this.display[indexes[0]][indexes[1]];\r\n            } else if (indexes.length === 3) {\r\n                canDisplay = this.display[indexes[0]][indexes[1]][indexes[2]];\r\n            }\r\n            // console.log(`Can I display ${displayName}? The answer is:`,canDisplay);\r\n            // console.groupCollapsed(`display('${displayName}'): `, Boolean(canDisplay));\r\n            // console.log('this.display', this.display);\r\n            // console.log('indexes', indexes);\r\n            // console.groupEnd();\r\n            if (logInside) {\r\n                console.info(`Checking if can display \"${displayName}\" component:`, Boolean(canDisplay));\r\n            }\r\n\r\n            return Boolean(canDisplay);\r\n        };\r\n\r\n        app.displayable.enable = () => {\r\n            logInside = true;\r\n        };\r\n        app.displayable.disable = () => {\r\n            logInside = false;\r\n        };\r\n    },\r\n    on: {\r\n        init: function () {\r\n            const app = this;\r\n            if (app.params.helper) logInside = true;\r\n            if (logInside) console.log('DisplayablePlugin init');\r\n        },\r\n    },\r\n};\r\nexport default DisplayablePlugin;","import React from \"react\";\r\nimport {\r\n    AccordionContent,\r\n    Button,\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    Icon,\r\n    List,\r\n    ListItem,\r\n    NavTitle,\r\n    Segmented,\r\n} from \"framework7-react\";\r\n\r\n/**\r\n * @class SwipeableCollectionWidget\r\n * @memberOf WidgetPrototype\r\n * @summary [wzorzec: Prototype -> ConcretePrototype -> PrototypeInstance]\r\n */\r\nexport default class SwipeableCollectionWidget {\r\n    /**\r\n     * @type {string}\r\n     * @private\r\n     */\r\n    _type = 'card';\r\n    _app;\r\n    _formConfig;\r\n    _itemPrototype = null;\r\n    /**\r\n     * @type {{}}\r\n     * @private\r\n     */\r\n    _handlers = {};\r\n    /**\r\n     * @type {{}}\r\n     * @private\r\n     */\r\n    _events = {};\r\n\r\n    /**\r\n     * @type {{\r\n     *      wrapperClass: array,\r\n     *      mediaList: boolean,\r\n     *      parentForm: null?,\r\n     *      title: null,\r\n     *      actions: {\r\n     *          add: {\r\n     *              color: string,\r\n     *              action: null,\r\n     *              label: string\r\n     *          }\r\n     *      }\r\n     * }}\r\n     */\r\n    widget = {\r\n        wrapperClass: ['width-100', 'flex-grow-1', 'no-margin-left', 'no-margin-right', 'card-outline'],\r\n        title: null,\r\n        actions: {\r\n            add: {color: 'green', label: 'Dodaj', action: null},\r\n        },\r\n        parentForm: null,\r\n        mediaList: false,\r\n    };\r\n    /**\r\n     *\r\n     * @type {{name: null}}\r\n     */\r\n    field = {\r\n        name: null,\r\n    };\r\n    /**\r\n     *\r\n     * @type {{\r\n     *      preview: {},\r\n     *      type: string,\r\n     *      actions: {\r\n     *          left: {},\r\n     *          right: {\r\n     *              edit: {\r\n     *                  color: string,\r\n     *                  action: null,\r\n     *                  label: string\r\n     *              },\r\n     *              delete: {\r\n     *                  color: string,\r\n     *                  action: null,\r\n     *                  label: string\r\n     *              }\r\n     *          }\r\n     *      }\r\n     * }}\r\n     */\r\n    item = {\r\n        type: 'item', //radio, checkbox,item - domyślnie 'item'\r\n        actions: { // akcje dla przycisków które się pokazują po przesunięciu itema w lewo lub w prawo\r\n            left: {},\r\n            right: {\r\n                edit: {color: 'orange', label: 'Edit', action: null},\r\n                delete: {color: 'red', label: 'Usuń', action: null},\r\n            },\r\n        },\r\n        preview: {},\r\n    };\r\n    /**\r\n     * @type {{\r\n     *      current: {\r\n     *          data: null,\r\n     *          field: {\r\n     *              subtitle: null|string|function,\r\n     *              after: null|string|function,\r\n     *              text: null|string|function,\r\n     *              title: null|string|function\r\n     *          },\r\n     *          index: null\r\n     *      },\r\n     *      errorMessage: null,\r\n     *      items: null\r\n     *  }}\r\n     */\r\n    data = {\r\n        items: null, // kolekcja itemów\r\n        current: {\r\n            data: null,\r\n            field: {\r\n                title: null,\r\n                after: null,\r\n                subtitle: null,\r\n                text: null,\r\n            },\r\n            index: null,\r\n        },\r\n        errorMessage: null,\r\n    };\r\n\r\n    constructor(build) {\r\n        console.log('build', build);\r\n        this._type = build.type;\r\n        this._app = build.app;\r\n        this._formConfig = build.formConfig;\r\n\r\n        this._itemPrototype = this._app.widget.SwipeableItem(this._formConfig.item.preview.type)\r\n            .withApp(this._app)\r\n            .withConfig(this._formConfig.item)\r\n            .buildItem();\r\n        // console.log('this._itemPrototype', this._itemPrototype);\r\n        // this._itemPrototype = this._itemPrototype.prototypeInstance();\r\n        // this._itemPrototype = new SwipeableItemWidget.Builder(this._formConfig.item.preview.type).withApp(this).prototypeInstance();\r\n\r\n        /*\r\n        switch (this._formConfig.item.preview.type) {\r\n            case 'simple': {\r\n                // throw new SwipeableCollectionWidgetPrototypeException('SwipeableSimpleItemWidget nie został zaimplementowany');\r\n                this._itemPrototype = (new SwipeableSimpleItemWidget(this._formConfig.item)).prototypeInstance();\r\n                break;\r\n            }\r\n            case 'checkbox': {\r\n                throw new SwipeableCollectionWidgetPrototypeException('SwipeableSimpleItemWidget nie został zaimplementowany');\r\n                // this._itemPrototype = (new SwipeableCheckboxItemWidget(itemConfig)).prototypeInstance();\r\n                // break;\r\n            }\r\n            case 'radio': {\r\n                this._itemPrototype = (new SwipeableRadioItemWidget(this._formConfig.item, this.app)).prototypeInstance();\r\n                break;\r\n            }\r\n            default: {\r\n                throw new SwipeableCollectionWidgetPrototypeException(`Nieznany typ itema widgetu SwipeableCollection!!!\r\nSprawdź konfigurację '${this.__proto__.constructor.name}'`);\r\n            }\r\n        }\r\n        //*/\r\n    }\r\n\r\n    static get Builder() {\r\n        class Builder {\r\n            constructor(type) {\r\n                this.type = type;\r\n            }\r\n\r\n            withApp(app) {\r\n                this.app = app;\r\n                return this;\r\n            }\r\n\r\n            withConfig(config) {\r\n                console.log('which should set config');\r\n                this.formConfig = config;\r\n                return this;\r\n            }\r\n\r\n            withHandlers(handlers) {\r\n                console.log('and should set handlers');\r\n                this.handle = handlers;\r\n                return this;\r\n            }\r\n\r\n            withEvents(events) {\r\n                console.log('and should set events');\r\n                this.event = events;\r\n                return this;\r\n            }\r\n\r\n            /**\r\n             *\r\n             * @returns {SwipeableCollectionWidget}\r\n             */\r\n            buildWidget() {\r\n                const newCollectionWidget = new SwipeableCollectionWidget(this);\r\n                console.log('then should create SwipeableCollectionWidget');\r\n                // const clone = newCollectionWidget._clone();\r\n                // console.log('clone', clone);\r\n                console.log('and return it');\r\n                return newCollectionWidget.collectionWidget;\r\n                // return clone;\r\n            }\r\n        }\r\n\r\n        console.log('should return Builder');\r\n\r\n        return Builder;\r\n    }\r\n\r\n    collectionWidget = (props) => {\r\n        // console.log(`${this.__proto__.constructor.name}.collectionWidget:`, this);\r\n        this.configureProps(props);\r\n        const actions = this.widget.actions;\r\n        // console.warn(`Będziemy renderować collectionCardWidget( ${this.name} )`, this);\r\n\r\n        let card = null;\r\n        switch (this._type) {\r\n            case 'card':\r\n                card = this._renderCard(props);\r\n                break;\r\n            case 'accordion':\r\n                card = this._renderAccordion(props);\r\n                break;\r\n            case 'list':\r\n                card = this._renderList(props);\r\n                break;\r\n            default:\r\n                card = this._renderList(props);\r\n                break;\r\n        }\r\n\r\n        if (this.item.type === 'item') {\r\n            return <li className=\"item-content\">\r\n                <div className=\"item-inner\">\r\n                    {card}\r\n                </div>\r\n            </li>;\r\n        } else return card;\r\n    };\r\n\r\n    _renderCard = (props) => {\r\n        return <Card className={this.widget.wrapperClass.join(' ')}>\r\n            <div className={this.data.errorMessage && 'item-input-wrap'}>\r\n                <CardHeader ref={e => this.buttonToPopoverWrapper = e}>\r\n                    <NavTitle>{this.widget.title}</NavTitle>\r\n                    <Segmented>\r\n                        {Object.keys(this.widget.actions).map(key => {\r\n                            const button = this.widget.actions[key];\r\n                            return <Button key={key} tabLinkActive\r\n                                           color={button.color}\r\n                                           href={button.action}\r\n                                           data-parent-form={this.widget.parentForm}>\r\n                                <Icon icon={button.icon}>{button.label}</Icon>\r\n                            </Button>\r\n                        })}\r\n                    </Segmented>\r\n                </CardHeader>\r\n                {this.data.items && <CardContent>\r\n                    <List mediaList={this.widget.mediaList}>\r\n                        {this.data.items.map((item, index) => this.renderItem(this.item.preview.type, item, index))}\r\n                    </List>\r\n                </CardContent>}\r\n                {this.data.errorMessage && <div className=\"item-input-error-message\">{\r\n                        Array.isArray(this.data.errorMessage) ?\r\n                            this.settings.data.errorMessage.join(' • ') :\r\n                            this.settings.data.errorMessage\r\n                    }</div>}\r\n            </div>\r\n        </Card>;\r\n    };\r\n    _renderAccordion = (props) => {\r\n        const accordionContent = <AccordionContent>\r\n            <List mediaList={this.widget.mediaList}>\r\n                {this.data.items.map((item, index) => {\r\n                    // return <div key={index}>item dupa</div>\r\n                    return this.renderItem(this.item.type, item, index)\r\n                })}\r\n            </List>\r\n        </AccordionContent>;\r\n\r\n        const accordionItem = <ListItem accordionItem title={this.data.current.field.title}\r\n                                        badge={this.data.items.length}>\r\n            <Icon slot=\"media\" icon=\"fad fa-briefcase\"/>\r\n            {accordionContent}\r\n        </ListItem>;\r\n\r\n        if (props.item) {\r\n            return accordionItem;\r\n        } else {\r\n            return (\r\n                <List accordionList inset>\r\n                    {accordionItem}\r\n                </List>\r\n            );\r\n        }\r\n    };\r\n    _renderList = (props) => {\r\n        return <div>dupa collection list widget dla '{this.props.field}' </div>;\r\n    };\r\n\r\n    renderItem = (type, item, index) => {\r\n        // console.warn('Będziemy renderować item');\r\n        // this._app.logger.log({\r\n        //     this: this,\r\n        //     'this._itemPrototype': this._itemPrototype,\r\n        //     type: type,\r\n        //     item: item,\r\n        // });\r\n        this._itemPrototype.configure(index, item, this.item);\r\n        return this._itemPrototype.render();\r\n    };\r\n\r\n\r\n    configureProps = (props) => {\r\n        // console.log(`${this.__proto__.constructor.name}.configureProps[props]`, props);\r\n        // console.log(`${this.__proto__.constructor.name}.configureProps[this]`, this);\r\n\r\n        const fieldName = props.field;\r\n        this.name = fieldName;\r\n        this.field.name = fieldName;\r\n        const formConfig = this._formConfig;\r\n        const itemConfig = formConfig.item;\r\n        const fieldConfig = formConfig.fields[fieldName];\r\n        const values = props.data.form;\r\n\r\n        // this._app.logger.log({\r\n        //     'this._formConfig': this._formConfig,\r\n        //     fieldName: fieldName,\r\n        //     formConfig: formConfig,\r\n        //     fieldConfig: fieldConfig,\r\n        //     itemConfig: itemConfig,\r\n        //     values: values,\r\n        // });\r\n\r\n        if (fieldConfig) {\r\n            this.widget.title = fieldConfig.collection.title;\r\n            this.widget.actions = fieldConfig.collection.preview.actions;\r\n        } else {\r\n            this.widget.title = formConfig.collection.title;\r\n            this.widget.actions = formConfig.collection.preview.actions;\r\n        }\r\n\r\n        this.widget.parentForm = this._formConfig.collection.parentForm;\r\n\r\n\r\n        if (fieldConfig) {\r\n            this.item = fieldConfig.item;\r\n        } else {\r\n            this.item = itemConfig;\r\n        }\r\n        // this.settings.item.type = itemConfig.preview.type;\r\n        //action do itema są ustawiane w kontekście itema zatem nie tu\r\n        // this.settings.item.actions.right.edit.href = 'TODO';\r\n        // this.settings.item.actions.right.edit.onclick = 'TODO';\r\n        // this.settings.item.actions.right.delete.href = 'TODO';\r\n        // this.settings.item.actions.right.delete.onclick = 'TODO';\r\n\r\n        // if (props) {\r\n        //     console.groupCollapsed('Zostały dane props z kórymi coś trzeba zrobić');\r\n        //     console.log('props', props);\r\n        //     console.groupEnd();\r\n        // }\r\n\r\n        if (props.mediaList) {\r\n            this.widget.mediaList = props.mediaList;\r\n        }\r\n        // console.clear();\r\n        // console.log('this', this);\r\n        // console.log('this._itemPrototype', this._itemPrototype);\r\n        this._itemPrototype.widget.mediaList = this.widget.mediaList;\r\n\r\n        if (props.data) {\r\n            this.updateData(props.data);\r\n        }\r\n    };\r\n\r\n\r\n    updateData = (data) => {\r\n        // Log.log({\r\n        //     data: data,\r\n        //     this: this,\r\n        // });\r\n        if (data.items) {\r\n            this.data.items = data.items;\r\n        } else if (data.form && data.form[this.field.name]) {\r\n            this.data.items = data.form[this.field.name];\r\n        }\r\n\r\n        if (data.current) {\r\n            this.data.current.data = data.current;\r\n            this.data.current.field = this._itemPrototype._composeItem(\r\n                data.current,\r\n                this._formConfig.item.preview,\r\n            );\r\n        }\r\n\r\n        if (data.errorMessage) {\r\n            console.log('data.errors', data.errors);\r\n            this.data.errorMessage = data.errorMessage;\r\n            this.widget.wrapperClass = [\r\n                ...this.widget.wrapperClass,\r\n                'item-input-with-error-message',\r\n                'item-input-invalid',\r\n                'border-color-red',\r\n            ];\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * @return {WidgetPrototypeAbstract}\r\n     */\r\n    prototypeInstance = () => {\r\n        return this._clone();\r\n    };\r\n\r\n    /**\r\n     * Ustawia właściwość obiektu\r\n     *\r\n     * @param property\r\n     * @param value\r\n     */\r\n    setProperty = (property, value) => {\r\n        this[property] = value;\r\n    };\r\n\r\n    /**\r\n     * Kopiuje właściwości prototypu do klona\r\n     *\r\n     * @return {WidgetPrototypeAbstract}\r\n     */\r\n    _clone = () => {\r\n        console.log(`${this.__proto__.constructor.name}`, this);\r\n        let widget = new this.__proto__.constructor(this._formConfig);\r\n        let keys = Object.keys(this);\r\n        keys.forEach(k => {\r\n            widget.setProperty(k, this[k]);\r\n        });\r\n        console.log(', clone it:', widget);\r\n\r\n        return widget;\r\n    };\r\n}","import React from \"react\";\r\nimport {Icon, ListItem, SwipeoutActions, SwipeoutButton} from \"framework7-react\";\r\n\r\n/**\r\n * @class SwipeableItemWidget\r\n * @memberOf WidgetPrototype\r\n * @instance\r\n * @summary [wzorzec: Prototype -> ConcretePrototype -> PrototypeInstance]\r\n */\r\nexport default class SwipeableItemWidget {\r\n    /**\r\n     * @type {string}\r\n     * @private\r\n     */\r\n    _type = 'simple';\r\n    _app;\r\n    _itemConfig;\r\n    state = {\r\n        opened: false,\r\n    };\r\n\r\n    key = null;\r\n    widget = {\r\n        sortable: false,\r\n        mediaList: null,\r\n    };\r\n    item = {\r\n        name: null,\r\n        value: null,\r\n        defaultChecked: null,\r\n        data: {\r\n            header: '',\r\n            title: '',\r\n            after: '',\r\n            subtitle: '',\r\n            text: '',\r\n            footer: '',\r\n        },\r\n        onChange: null,\r\n        actions: {\r\n            left: {\r\n                btnLeft1: {\r\n                    color: 'blue',\r\n                    label: 'Left1',\r\n                },\r\n            },\r\n            right: {\r\n                btnRight1: {\r\n                    color: 'blue',\r\n                    label: 'Right1',\r\n                },\r\n            },\r\n        },\r\n    };\r\n    data = {};\r\n\r\n\r\n    constructor(build) {\r\n        console.log('build', build);\r\n        this._type = build.type;\r\n        this._itemConfig = build.itemConfig;\r\n        this._app = build.app;\r\n        this._formConfig = build.formConfig;\r\n    }\r\n\r\n    static get Builder() {\r\n        class Builder {\r\n            constructor(type) {\r\n                this.type = type;\r\n            }\r\n\r\n            withApp(app) {\r\n                console.log('which should set app object');\r\n                this.app = app;\r\n                return this;\r\n            }\r\n\r\n            withConfig(config) {\r\n                console.log('which should set config');\r\n                this.itemConfig = config;\r\n                return this;\r\n            }\r\n\r\n            withHandlers(handlers) {\r\n                console.log('and should set handlers');\r\n                this.handle = handlers;\r\n                return this;\r\n            }\r\n\r\n            withEvents(events) {\r\n                console.log('and should set events');\r\n                this.event = events;\r\n                return this;\r\n            }\r\n\r\n            /**\r\n             *\r\n             * @returns {SwipeableItemWidget}\r\n             */\r\n            buildItem() {\r\n                const newItemWidget = new SwipeableItemWidget(this);\r\n                console.log('then should create SwipeableItemWidget');\r\n                // const clone = newCollectionWidget._clone();\r\n                // console.log('clone', clone);\r\n                console.log('and return it', newItemWidget);\r\n                return newItemWidget;//.itemWidget();\r\n                // return clone;\r\n            }\r\n        }\r\n\r\n        // console.log('should return Builder',Builder);\r\n\r\n        return Builder;\r\n    }\r\n\r\n    configure = (index, item, useConfig) => {\r\n        // console.warn('Konfiguracja itema...',index, item, useConfig);\r\n        this._configureSettings(index, item, useConfig);\r\n    };\r\n\r\n\r\n    itemWidget = () => {\r\n        return <ListItem key={this.item.key} swipeout radio\r\n                         name={this.item.name}\r\n                         value={this.item.value}\r\n                         defaultChecked={this.item.defaultChecked}\r\n                         header={this.item.data.header}\r\n                         title={this.item.data.title}\r\n                         after={this.item.data.after}\r\n                         subtitle={this.item.data.subtitle}\r\n                         text={this.item.data.text}\r\n                         onClick={(e) => {\r\n                             if (this.state.opened) {\r\n                                 e.preventDefault();\r\n                             }\r\n                         }}\r\n                         footer={this.item.data.footer}\r\n                         onSwipeoutOpen={() => {\r\n                             this.state.opened = true;\r\n                         }}\r\n                         onSwipeoutClosed={() => {\r\n                             this.state.opened = false;\r\n                         }}\r\n                         onChange={e => {\r\n                             if (!this.state.opened) {\r\n                                 // console.log('this',this);\r\n                                 return this.item.onChange(e)\r\n                             } else {\r\n                                 e.preventDefault();\r\n                             }\r\n                         }}\r\n        >\r\n            {this.widget.sortable && <Icon slot=\"media\" icon=\"fad fa-bars\"/>}\r\n            {this._renderActions(this.data, this.key)}\r\n        </ListItem>;\r\n    };\r\n\r\n    render = () => {\r\n        return this.itemWidget()\r\n    };\r\n\r\n    _composeItem = (item, configPreview) => {\r\n        let itemConfig = {\r\n            name: null,\r\n            value: null,\r\n            defaultChecked: null,\r\n            data: {\r\n                header: null,\r\n                title: 'Wybierz',\r\n                after: null,\r\n                subtitle: null,\r\n                text: null,\r\n                footer: null,\r\n            },\r\n            onChange: null,\r\n            actions: {\r\n                left: null,\r\n                right: null,\r\n            },\r\n        };\r\n\r\n        // this._app.logger.info({\r\n        //     configPreview: configPreview,\r\n        // });\r\n\r\n        if (item) {\r\n            if (typeof configPreview.defaultChecked === 'function') {\r\n                itemConfig.defaultChecked = configPreview.defaultChecked(item);\r\n            } else {\r\n                itemConfig.defaultChecked = item[configPreview.defaultChecked];\r\n            }\r\n            if (configPreview.data.title) {\r\n                if (typeof configPreview.data.title === 'function') {\r\n                    itemConfig.data.title = configPreview.data.title(item)\r\n                } else {\r\n                    itemConfig.data.title = item[configPreview.data.title];\r\n                }\r\n            }\r\n            if (configPreview.data.subtitle) {\r\n                let subtitleValue = '';\r\n                if (typeof configPreview.data.subtitle === 'function') {\r\n                    subtitleValue = configPreview.data.subtitle(item)\r\n                } else {\r\n                    subtitleValue = item[configPreview.data.subtitle];\r\n                }\r\n                itemConfig.data.subtitle = subtitleValue;\r\n            }\r\n            if (configPreview.data.after) {\r\n                let afterValue = null;\r\n                if (typeof configPreview.data.after === 'function') {\r\n                    afterValue = configPreview.data.after(item)\r\n                } else {\r\n                    afterValue = item[configPreview.data.after];\r\n                }\r\n                if (this.widget.mediaList) {\r\n                    itemConfig.data.after = afterValue;\r\n                } else {\r\n                    itemConfig.data.footer = afterValue;\r\n                }\r\n            }\r\n            if (configPreview.data.header) {\r\n                let headerValue = null;\r\n                if (typeof configPreview.data.header === 'function') {\r\n                    headerValue = configPreview.data.header(item)\r\n                } else {\r\n                    headerValue = item[configPreview.data.header];\r\n                }\r\n                itemConfig.data.header = headerValue;\r\n            }\r\n            if (configPreview.data.text) {\r\n                let textValue = '';\r\n                if (typeof configPreview.data.text === 'function') {\r\n                    textValue = configPreview.data.text(item);\r\n                } else {\r\n                    textValue = item[configPreview.data.text];\r\n                }\r\n                itemConfig.data.text = textValue;\r\n            }\r\n            if (configPreview.data.footer) {\r\n                let footerValue = null;\r\n                if (typeof configPreview.data.footer === 'function') {\r\n                    footerValue = configPreview.data.footer(item)\r\n                } else {\r\n                    footerValue = item[configPreview.data.footer];\r\n                }\r\n                itemConfig.data.footer = footerValue;\r\n            }\r\n        } else {\r\n            itemConfig = configPreview.emptyValue;\r\n        }\r\n\r\n        // console.log('this._app.handle',this._app.handle);\r\n        // console.log('this._app.event',this._app.event);\r\n        // console.log('this._itemConfig.event',this._itemConfig.event);\r\n\r\n        itemConfig.onChange = this._app.event[this._itemConfig.event];\r\n\r\n        if (configPreview.actions.left) {\r\n            if (!itemConfig.actions) {\r\n                itemConfig.actions = {};\r\n            }\r\n            itemConfig.actions.left = configPreview.actions.left\r\n        }\r\n        if (configPreview.actions.right) {\r\n            if (!itemConfig.actions) {\r\n                itemConfig.actions = {};\r\n            }\r\n            itemConfig.actions.right = configPreview.actions.right\r\n        }\r\n        return itemConfig;\r\n    };\r\n\r\n    _configureSettings = (index, item, useConfig) => {\r\n        // console.warn('Konfiguracja settings', this.config);\r\n        this.data = item;\r\n        // this.item = this._composeItem(item, this.config.preview);\r\n        this.item = this._composeItem(item, useConfig.preview);\r\n        this.item.key = index;\r\n        this.item.name = this._itemConfig.name;\r\n        this.item.value = item.id;\r\n\r\n    };\r\n\r\n    _renderActions = (item, index) => {\r\n        const itemActions = this.item.actions;\r\n        return <React.Fragment>\r\n            {itemActions.left && this._renderAction('left', item, index)}\r\n            {itemActions.right && this._renderAction('right', item, index)}\r\n        </React.Fragment>\r\n    };\r\n\r\n    _renderAction = (side, item, index) => {\r\n        // console.info('rendering action with index', index);\r\n        const actionsProps = {};\r\n        if (side === 'left') {\r\n            actionsProps.left = true;\r\n        } else {\r\n            actionsProps.right = true;\r\n        }\r\n        const itemActions = this.item.actions;\r\n        return <SwipeoutActions {...actionsProps}>\r\n            {Object.keys(itemActions[side]).map((action, i) => {\r\n                const buttonProps = {\r\n                    color: itemActions[side][action].color,\r\n                };\r\n                if (typeof itemActions[side][action].action === 'string') {\r\n                    buttonProps.href = `/${item.id === null ? 'collection' : 'form'}/${itemActions[side][action].action}/${item.id === null ? index : item.id}/`;\r\n                } else if (typeof itemActions[side][action].action === 'function') {\r\n                    buttonProps.onClick = itemActions[side][action].action;\r\n                }\r\n                const buttonAttributes = {\r\n                    label: itemActions[side][action].label,\r\n                    icon: itemActions[side][action].icon,\r\n                };\r\n                return (\r\n                    <SwipeoutButton key={i} {...buttonProps}>\r\n                        <Icon icon={buttonAttributes.icon}>\r\n                        </Icon>\r\n                        {buttonAttributes.label ? buttonAttributes.label : ''}\r\n                    </SwipeoutButton>\r\n                )\r\n            })}\r\n        </SwipeoutActions>;\r\n    };\r\n\r\n\r\n    /* PROTOTYPING */\r\n\r\n\r\n    /**\r\n     * @return {WidgetPrototypeAbstract}\r\n     */\r\n    prototypeInstance = () => {\r\n        return this._clone();\r\n    };\r\n\r\n    /**\r\n     * Ustawia właściwość obiektu\r\n     *\r\n     * @param property\r\n     * @param value\r\n     */\r\n    setProperty = (property, value) => {\r\n        this[property] = value;\r\n    };\r\n\r\n    /**\r\n     * Kopiuje właściwości prototypu do klona\r\n     *\r\n     * @return {WidgetPrototypeAbstract}\r\n     */\r\n    _clone = () => {\r\n        console.log(`trying to clone......`);\r\n        let widget = new this.constructor(this._itemConfig);\r\n        let keys = Object.keys(this);\r\n        keys.forEach(k => {\r\n            widget.setProperty(k, this[k]);\r\n        });\r\n        widget.app = this.app;\r\n\r\n        return widget;\r\n    }\r\n}","import SwipeableCollectionWidget\r\n    from \"../Patterns/Prototype/ConcretePrototype/SwipeableWidget/SwipeableCollectionWidget\";\r\nimport SwipeableItemWidget from \"../Patterns/Prototype/ConcretePrototype/SwipeableWidget/SwipeableItemWidget\";\r\n\r\nlet logInside = true;\r\n\r\nconst WidgetPlugin = {\r\n    name: 'widget',\r\n    // extend app params with resource params\r\n    params: {\r\n        widget: false,\r\n    },\r\n    create: function () {\r\n        const app = this;\r\n        // extend app methods with resource methods when app instance just created\r\n\r\n\r\n        // widgetFactory.setFormConfig(new CompanyConfig());\r\n\r\n        // const widgetFactory = new WidgetFactory(type);\r\n        // widgetFactory.setApp(app);\r\n        // return widgetFactory;\r\n\r\n        app.widget = {\r\n            /**\r\n             *\r\n             * @param type - type of collection widget (simple, card)\r\n             * @returns {Builder}\r\n             * @constructor\r\n             */\r\n            SwipeableCollection: (type) => {\r\n                console.log('plugin widget SwipeableCollection');\r\n                const swipeableCollection = new SwipeableCollectionWidget.Builder(type).withApp(this);\r\n                return new SwipeableCollectionWidget.Builder(type).withApp(this);\r\n            },\r\n            /**\r\n             *\r\n             * @param type - type of item widget (simple, radio, checkbox)\r\n             * @returns {Builder}\r\n             * @constructor\r\n             */\r\n            SwipeableItem: (type) => {\r\n                console.log(`plugin widget SwipeableItem(${type})`);\r\n                const swipeableItem = new SwipeableItemWidget.Builder(type);\r\n                return new SwipeableItemWidget.Builder(type).withApp(this);\r\n                // return new SwipeableItemWidget.Builder(type).withApp(this);\r\n            },\r\n            // CollectionWidget: widgetFactory.createSwipeableCollectionWidget('card').prototypeInstance().collectionWidget,\r\n        };\r\n\r\n        app.widget.enable = () => {\r\n            logInside = true;\r\n        };\r\n        app.widget.disable = () => {\r\n            logInside = false;\r\n        };\r\n    },\r\n\r\n    on: {\r\n        init: function () {\r\n            const app = this;\r\n            if (app.params.helper) logInside = true;\r\n            if (logInside) console.log('WidgetPlugin init');\r\n        },\r\n    },\r\n};\r\nexport default WidgetPlugin;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './scss/layout.scss';\r\nimport 'framework7/css/framework7.bundle.min.css';\r\n// Import F7 Bundle\r\nimport Framework7 from 'framework7/framework7.esm.bundle';\r\n// Import F7-React Plugin\r\nimport Framework7React from 'framework7-react';\r\nimport Shell from './Shell';\r\n\r\n// Import KPIR Plugins\r\nimport HelperPlugin from \"./Plugin/HelperPlugin\";\r\nimport LoggerPlugin from \"./Plugin/LoggerPlugin\";\r\nimport ApiPlugin from \"./Plugin/ApiPlugin\";\r\nimport PWAPlugin from \"./Plugin/PWAPlugin\";\r\nimport DisplayablePlugin from \"./Plugin/DisplayablePlugin\";\r\nimport WidgetPlugin from \"./Plugin/WidgetPlugin\";\r\n\r\n// Init F7-React Plugin\r\nFramework7.use(Framework7React);\r\n\r\n// Init KPiR Plugins\r\nFramework7.use(HelperPlugin);\r\nFramework7.use(LoggerPlugin);\r\nFramework7.use(ApiPlugin);\r\nFramework7.use(PWAPlugin);\r\nFramework7.use(DisplayablePlugin);\r\nFramework7.use(WidgetPlugin);\r\n\r\nReactDOM.render(<Shell f7={Framework7}/>, document.getElementById('root'));\r\n"],"sourceRoot":""}